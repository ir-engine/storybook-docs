import{r as b,R as o}from"./index-DPzuYzxM.js";import{d as g,s as I,u as v,g as l,a as M,n as y,e as D}from"./WebRTCTransportFunctions-mB_FREj1.js";import{d as H,p as S,U as p,w as R,P as T,e as h,s as O,r as A}from"./UUIDComponent-GqVY2Xw8.js";import{eG as B}from"./ZoomOutSm-BKYTao-C.js";import{j as P,k as j,l as z}from"./index-C0GIA9vz.js";import"./index-Dls6AtJn.js";import"./index-PchlGXp2.js";import"./index-B8Egbi3s.js";import"./index-C53TPVpl.js";import"./index-CvvRAf94.js";import"./index-BmZLy_Eh.js";import{T as G}from"./index-DNUDjAZy.js";import{t as C}from"./tw-merge-Ds6tgvmq.js";const N=H({name:"SelectTagComponent"}),L=g({name:"HierarchyTreeState",initial:{expandedNodes:{},search:{local:"",query:""},firstSelectedEntity:null,manualCollapseExpand:!1},extension:I(["expandedNodes"])}),f=g({name:"SelectionState",initial:{selectedEntities:[]},updateSelection:t=>{l(L).manualCollapseExpand.set(!1),l(f).selectedEntities.set(t)},getSelectedEntities:(t=S.Authoring)=>M(f).selectedEntities.map(n=>p.getEntityByUUID(n,t)),useSelectedEntities:(t=S.Authoring)=>v(l(f).selectedEntities).value.map(n=>p.getEntityByUUID(n,t))}),q=()=>{const t=v(l(f).selectedEntities);return b.useEffect(()=>{const n=[...t.value].map(e=>p.getEntityByUUID(e,S.Authoring));for(const e of n)h(e)&&O(e,N);return()=>{for(const e of n)h(e)&&A(e,N)}},[t]),null};R({uuid:"ee.engine.EditorSelectionReceptorSystem",insert:{before:T},reactor:q});const m=g({name:"ComponentDropdownState",initial:()=>({componentStates:{}}),addOrUpdateEntity:(t,n,e,a=!0)=>{const s=p.get(t);if(!s)return;const i=l(m).componentStates;i.value[s]||(i[s].set({}),i[s][n].set(e)),a&&i[s][n].set(e)},addOrUpdateUUID:(t,n,e)=>{const a=l(m).componentStates;a.value[t]||a[t].set({}),a[t][n].set(e)},removeEntityUUIDs:t=>{const n=l(m).componentStates;for(const e of t)n[e].set(y)},removeComponentEntry:(t,n)=>{for(const e of t){const a=p.get(e);if(!a)continue;const s=l(m).componentStates;if(!s.value[a])continue;s[a][n].set(y);const i=s[a].value;Object.keys(i).length===0&&s[a].set(y)}}});function ne({minimizedDefault:t,Icon:n=j,name:e,slug:a,description:s,children:i,onClose:U,entity:k}){const d=p.get(k),x=D(m).componentStates,c=v(()=>{var u;const r=t??!1;return e?((u=x[d][e])==null?void 0:u.value)??t??r:r});b.useEffect(()=>{var w;const r=t??!1,u=e?((w=x[d][e])==null?void 0:w.value)??t??r:r;c.set(u)},[x,d,e,t]);const E=()=>{if(e){const r=!c.value;m.addOrUpdateUUID(d,e,r),c.set(r)}};return o.createElement("div",{className:C("group/component-dropdown w-full bg-surface-3 ",c.value&&"h-10"),tabIndex:0},o.createElement("div",{className:"grid w-full cursor-pointer grid-cols-1 items-center p-2",onClick:E},o.createElement("div",{className:"col-span-1 flex w-full items-center"},o.createElement(G,{content:c.value?"maximize":"minimize"},o.createElement("button",{className:"my-1 text-text-secondary",onClick:E},o.createElement(P,{className:C("h-4 w-4 transition-transform duration-300",c.value?"":"rotate-90"),onClick:E}))),o.createElement("div",{className:"flex items-center gap-x-2"},o.createElement("button",{className:"ml-2 text-text-secondary group-hover/component-dropdown:text-text-primary group-focus/component-dropdown:text-text-primary"},o.createElement(n,{className:"h-5 w-5"})),o.createElement("span",{className:"text-sm leading-6 text-text-secondary group-hover/component-dropdown:text-text-primary group-focus/component-dropdown:text-text-primary"},e),a&&o.createElement("a",{className:"text-text-secondary hover:text-text-primary",target:"_blank",href:`https://docs.ir.world/${a}`,onClick:r=>r.stopPropagation()},o.createElement(B,null))),U&&o.createElement("button",{className:"ml-auto text-text-inactive",onClick:U},o.createElement(z,{className:"h-4 w-4"}))),!c.value&&o.createElement("div",{className:"col-span-1 w-full pl-6 pt-2 text-start text-xs text-text-secondary"},s)),o.createElement("div",{className:c.value?"hidden":""},i))}export{m as C,f as S,ne as a};
