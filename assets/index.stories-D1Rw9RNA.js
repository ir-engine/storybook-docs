import{r as x,R as e}from"./index-CBqU2yxZ.js";import{V as L}from"./three.module-D2RMN07C.js";import{f as w,b as s,U as E}from"./index-_wFD3GG2.js";import{P as S,a as D,b as o}from"./PortalComponent-CME2GO_9.js";import{u,c as l,a as v}from"./Util-CG5_y5Pm.js";import{b as B,a as O}from"./uploadEnvMapBake-D5gCIyCQ.js";import{i as _}from"./VideoComponent-TZ9Icu9Q.js";import{c as G,N as V}from"./ActionFunctions-CxzuxLxN.js";import{z as j,N as A}from"./EditorServices-BJKHmurs.js";import{B as q}from"./index-CCAuFDbE.js";import{G as z}from"./index-B_6CNmLi.js";import{B as y}from"./index-CGhkeU3i.js";import{E as H}from"./index-Ci1UbFw0.js";import{I as n}from"./index-DZ02_pf3.js";import{I as M}from"./index-tYKeBweK.js";import{S as d}from"./index-CmJ8aZaS.js";import{S as X,C as Y}from"./index-OAa3bMdv.js";import{a as F}from"./index-fFxXVS77.js";import{N as J}from"./index-BXX5lIfA.js";import{u as K}from"./useTranslation-C8TD7CCW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./v4-Dz_GI0CC.js";import"./MathLerpFunctions-CYXVD2J2.js";import"./ArrowHelperComponent-C9MpZgBb.js";import"./EditorControlFunctions-DO7c3hDV.js";import"./ScenePreviewCamera-C6tUz1E8.js";import"./assetFunctions-Bvb93VNm.js";import"./i18next-ntfi3Ha_.js";import"./nonIterableRest-Y-KoC6Zs.js";import"./setPrototypeOf-NYsvoNVB.js";import"./getPrototypeOf-BYVhAdwF.js";import"./NotificationService-BtHCxsFA.js";import"./index-DfU-XIjm.js";import"./index-DaaykCGs.js";import"./index-DJX7trsF.js";import"./iconBase-vdkxwKJc.js";import"./miscUtils-D11F-TOL.js";import"./utils-DTErvVTk.js";import"./MediaSystem-C5w1lrFL.js";import"./MediaComponent-BbvQujMt.js";import"./iframe-BwaUBtZe.js";import"../sb-preview/runtime.js";import"./PositionalAudioComponent-CGM_4wyN.js";import"./XRState-BS8ja_cl.js";import"./AssetType-LSGL9ANY.js";import"./WebContainer3D-CgDOwl0k.js";import"./lodash-BYTxXjAY.js";import"./client-DMi1NERe.js";import"./index-DCS5Ru-F.js";import"./index-vJCBmx79.js";import"./index-CqRG3f1I.js";import"./tw-merge-Ds6tgvmq.js";import"./index-Cb0NQbVM.js";import"./index-ChWBCYBM.js";import"./index-DWVs1sLR.js";import"./index-6-YOBPgK.js";/* empty css                */import"./index-B-xzzier.js";import"./useDrop-DvNNwWYR.js";import"./index--lohHrd2.js";import"./index-B6RCC45a.js";import"./index-CXvzSdoX.js";import"./useClickOutside-D1hZxvBu.js";import"./index-Dn0AHKmy.js";import"./index-DVAwpzAq.js";import"./index-BqFAen_F.js";import"./index-DGVNGK2X.js";const f=r=>{const m=G({portals:[],previewImageData:null,previewImageURL:""}),{t:a}=K(),g=w(r.entity,j),i=w(r.entity,o);x.useEffect(()=>{},[]);const R=async()=>{const t=await B(g.value.position.clone().add(new L(0,2,0).multiply(g.scale.value))),p=await _(t);m.previewImageData.set(t),m.previewImageURL.set(URL.createObjectURL(p))},C=async()=>{const t=[];try{t.push(),console.log("portalsDetail",t,s(r.entity,E))}catch(p){throw new Error(p)}m.portals.set(t.filter(p=>p.portalEntityId!==s(r.entity,E)).map(({portalEntityId:p,portalEntityName:U,sceneName:k})=>({value:p,label:k+": "+U})))},N=async()=>{if(!m.previewImageData.value)return;const t=await O(s(r.entity,A),m.previewImageData.value);v(o,{previewImageURL:t},[r.entity])},T=t=>{v(o,{spawnRotation:t})},h=t=>{v(o,{previewType:t}),C()};return e.createElement(J,{name:a("editor:properties.portal.name"),description:a("editor:properties.portal.description"),icon:e.createElement(f.iconComponent,null),...r},e.createElement(n,{name:"Location",label:a("editor:properties.portal.lbl-locationName")},e.createElement(X,{value:i.location.value,onChange:u(o,"location"),onRelease:l(o,"location")})),e.createElement(n,{name:"Portal",label:a("editor:properties.portal.lbl-portal")},e.createElement(d,{key:r.entity,options:m.portals.get(V),value:i.linkedPortalId.value,onChange:l(o,"linkedPortalId")})),e.createElement(n,{name:"Portal",label:a("editor:properties.portal.lbl-redirect")},e.createElement(q,{onChange:l(o,"redirect"),value:i.redirect.value})),e.createElement(n,{name:"Effect Type",label:a("editor:properties.portal.lbl-effectType")},e.createElement(d,{key:r.entity,options:Array.from(S.keys()).map(t=>({value:t,label:t})),value:i.effectType.value,onChange:l(o,"effectType")})),e.createElement(n,{name:"Preview Type",label:a("editor:properties.portal.lbl-previewType")},e.createElement(d,{key:r.entity,options:Array.from(D.values()).map(t=>({value:t,label:t})),value:i.previewType.value,onChange:h})),e.createElement(n,{name:"Saved Image URL",label:a("editor:properties.portal.lbl-savedImageURL")},e.createElement(Y,{value:i.previewImageURL.value,onChange:u(o,"previewImageURL"),onRelease:l(o,"previewImageURL")})),e.createElement(n,{name:"Preview Image Bake",label:"Preview Image Bake"},e.createElement("div",{className:"flex flex-col"},e.createElement("div",{className:"flex w-auto flex-row gap-1"},e.createElement(y,{className:"h-10 bg-neutral-700 text-xs",onClick:()=>{R()}},a("editor:properties.portal.lbl-generateImage")),e.createElement(y,{onClick:()=>{N()},className:"h-10 text-xs"},a("editor:properties.portal.lbl-saveImage"))))),e.createElement(M,{previewOnly:!0,value:m.previewImageURL.value??i.previewImageURL.value}),e.createElement(n,{name:"Spawn Position",label:a("editor:properties.portal.lbl-spawnPosition"),className:"w-auto"},e.createElement(F,{value:i.spawnPosition.value,onChange:u(o,"spawnPosition"),onRelease:l(o,"spawnPosition")})),e.createElement(n,{name:"Spawn Rotation",label:a("editor:properties.portal.lbl-spawnRotation"),className:"w-auto"},e.createElement(H,{quaternion:i.spawnRotation.value,onChange:T,onRelease:()=>l(o,"spawnRotation")(s(r.entity,o).spawnRotation)})))};f.iconComponent=z;const Q={},st={title:"Editor/Properties/Portal",component:f,parameters:{componentSubtitle:"PortalNodeEditor",jest:"portalNodeEditor.test.tsx",design:{type:"figma",url:""}},argTypes:Q},c={args:{}};var b,I,P;c.parameters={...c.parameters,docs:{...(b=c.parameters)==null?void 0:b.docs,source:{originalSource:`{
  args: {}
}`,...(P=(I=c.parameters)==null?void 0:I.docs)==null?void 0:P.source}}};const ct=["Default"];export{c as Default,ct as __namedExportsOrder,st as default};
