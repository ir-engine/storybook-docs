import{u as $}from"./WebRTCTransportFunctions-mB_FREj1.js";import{r as D,R as r}from"./index-DPzuYzxM.js";import{d as w,S as s,u as H,s as J,r as G,a as W,t as _,o as U,h as z,v as M,g as d,p as Q,E as F,U as L}from"./UUIDComponent-GqVY2Xw8.js";import{E,a as h,c as m,u as k}from"./Util-D6kE0IP9.js";import{N as q}from"./NodeEditor-SBboXx3y.js";import{S as f}from"./index-Dp9Z83cc.js";import{o as x,C as S,l as p,p as N,N as T}from"./resourceLoaderHooks-CRL4d032.js";import{G as K}from"./iconBase-qHBVS_PM.js";import{e as V,h as X}from"./index-C0GIA9vz.js";import{B as R}from"./index-Dls6AtJn.js";import{I as b}from"./index-dk6FhMkf.js";import{N as Y}from"./index-BuC9Ej5g.js";import{S as I}from"./index-CYqQ2WW8.js";import{S as B}from"./index-BLE7IG60.js";import{u as Z}from"./useTranslation-CW9c4UDM.js";import"./_commonjsHelpers-C4iS2aBk.js";import"./index-DYLXRpC5.js";import"./v4-BOvFkHkt.js";import"./three.module-BizNiMhn.js";import"./ShadowComponent-DnhO6zHH.js";import"./useFeatureFlags-Dn9l-n2t.js";import"./FeathersHooks-Bcw5IzUg.js";import"./EditorServices-5l66pnva.js";import"./AuthService-CgpOViw1.js";import"./___vite-browser-external_commonjs-proxy-BqV5D26a.js";import"./index-BmZLy_Eh.js";import"./index-CO8llcWC.js";import"./index-PchlGXp2.js";import"./ZoomOutSm-BKYTao-C.js";import"./tw-merge-Ds6tgvmq.js";import"./index-B8Egbi3s.js";import"./index-C53TPVpl.js";import"./index-D9X8Um7J.js";import"./index-CvvRAf94.js";import"./index-DNUDjAZy.js";import"./utils-C_TihLnJ.js";import"./lodash-AQPfkADg.js";import"./AssetType-CNZ47EUo.js";import"./index-YWE9xQ_z.js";import"./index-Bs5DOUC-.js";import"./useDrop-GcAn0hgk.js";import"./index-TG03Y8s6.js";import"./index-DFnjDgZz.js";import"./fuse-Ch1WBRTM.js";import"./index-K3LPJkAj.js";const a=w({name:"TriggerCallbackComponent",jsonID:"EE_trigger",schema:s.Object({triggers:s.Array(s.Object({onEnter:s.String(),onExit:s.String(),target:s.EntityID()}))}),reactor:()=>{const e=H();return D.useEffect(()=>(J(e,x),()=>{G(e,x)}),[]),null}});function ee(e){return K({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M254.25 121.03A60 60 0 0 0 196 181a60 60 0 0 0 120 0 60 60 0 0 0-61.75-59.97zM136 271l-60 60H46c-15 0-30 15-30 30v30h480v-30c0-15-15-30-30-30h-30l-60-60-60 60-60-60-60 60-60-60z"},child:[]}]})(e)}const C=e=>{const{t:i}=Z(),y=$([{label:"",value:"",callbacks:[]}]),u=W(e.entity,a),O=_(e.entity,[p]),v=U([N,T,F],Q.Authoring);return D.useEffect(()=>{if(!z(e.entity,S)){const o=f.getSelectedEntities();E.addOrRemoveComponent(o,S,!0)}if(!M(e.entity,[p])){const o=f.getSelectedEntities();E.addOrRemoveComponent(o,p,!0)}const n=[];for(const o of v){const t=d(o,N);n.push({label:d(o,T),value:d(o,L).entityID,callbacks:Object.keys(t).map(l=>({label:l,value:l}))})}y.set(n)},[JSON.stringify(v)]),r.createElement(q,{...e,name:i("editor:properties.trigger.name"),description:i("editor:properties.trigger.description"),Icon:C.iconComponent},r.createElement("div",{className:"my-3 flex justify-end"},!O&&r.createElement(R,{title:i("editor:properties.triggerVolume.lbl-addRigidBody"),className:"text-text-primary",variant:"tertiary",onClick:()=>{const n=f.getSelectedEntities();E.addOrRemoveComponent(n,p,!0,{type:"fixed"})}},r.createElement(V,null),i("editor:properties.triggerVolume.lbl-addRigidBody"))),r.createElement("div",{className:"my-3 flex justify-end"},r.createElement(R,{title:i("editor:properties.triggerVolume.lbl-addTrigger"),className:"text-text-primary",variant:"tertiary",onClick:()=>{const n=[...u.triggers.value,{target:"",onEnter:"",onExit:""}];h(a,{triggers:JSON.parse(JSON.stringify(n))},[e.entity])}},r.createElement(V,null),i("editor:properties.triggerVolume.lbl-addTrigger"))),u.triggers.map((n,o)=>{const t=y.value.find(c=>c.value===n.target.value),l=t?t.value:"";return r.createElement("div",{className:"ml-4 h-[calc(100%+1.5rem)] w-[calc(100%-2rem)] bg-[#1A1A1A] px-1 pb-1.5 pt-1"},r.createElement("button",{title:i("editor:properties.triggerVolume.lbl-removeTrigger"),className:"ml-auto text-sm text-[#8B8B8D]",onClick:()=>{const c=[...u.triggers.value];c.splice(o,1),h(a,{triggers:JSON.parse(JSON.stringify(c))},[e.entity])}},r.createElement(X,null)),r.createElement(b,{name:"Target",label:i("editor:properties.triggerVolume.lbl-target"),info:i("editor:properties.triggerVolume.info-target")},r.createElement(Y,{value:n.target.value??"",onRelease:m(a,`triggers.${o}.target`),disabled:e.multiEdit})),r.createElement(b,{name:"On Enter",label:i("editor:properties.triggerVolume.lbl-onenter"),info:i(e.multiEdit||!l?"editor:properties.triggerVolume.info-disabled-callback":"editor:properties.triggerVolume.info-onenter")},t!=null&&t.callbacks.length?r.createElement(I,{value:n.onEnter.value,onChange:m(a,`triggers.${o}.onEnter`),options:t!=null&&t.callbacks?t.callbacks.slice():[],disabled:e.multiEdit||!l,showClearButton:!0,width:"full"}):r.createElement(B,{value:n.onEnter.value,onChange:k(a,`triggers.${o}.onEnter`),onRelease:m(a,`triggers.${o}.onEnter`),disabled:e.multiEdit||!l,fullWidth:!0})),r.createElement(b,{name:"On Exit",label:i("editor:properties.triggerVolume.lbl-onexit"),info:i(e.multiEdit||!l?"editor:properties.triggerVolume.info-disabled-callback":"editor:properties.triggerVolume.info-onexit")},t!=null&&t.callbacks.length?r.createElement(I,{value:n.onExit.value,onChange:m(a,`triggers.${o}.onExit`),options:t!=null&&t.callbacks?t.callbacks.slice():[],disabled:e.multiEdit||!l,showClearButton:!0,width:"full"}):r.createElement(B,{value:n.onExit.value,onRelease:k(a,`triggers.${o}.onExit`),onChange:m(a,`triggers.${o}.onExit`),disabled:e.multiEdit||!l,fullWidth:!0})))}))};C.iconComponent=ee;const te={},Fe={title:"Editor/Properties/TriggerProperties",component:C,parameters:{componentSubtitle:"TriggerPropertiesNodeEditor",jest:"TriggerPropertiesNodeEditor.test.tsx",design:{type:"figma",url:""}},argTypes:te},g={args:{}};var P,A,j;g.parameters={...g.parameters,docs:{...(P=g.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {}
}`,...(j=(A=g.parameters)==null?void 0:A.docs)==null?void 0:j.source}}};const Le=["Default"];export{g as Default,Le as __namedExportsOrder,Fe as default};
