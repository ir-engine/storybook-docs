import{r as M,R as a}from"./index-DPzuYzxM.js";import{a as B,g as O,u as q}from"./WebRTCTransportFunctions-mB_FREj1.js";import{d as _,S as n,u as X,a as $,o as J,p as K,h as I,g as Y,U as k,z as Z,A as ee,n as ae}from"./UUIDComponent-GqVY2Xw8.js";import{c as i,u as s,a as te}from"./Util-D6kE0IP9.js";import{N as re}from"./NodeEditor-SBboXx3y.js";import{x as w,y as D,z as N,E as S,H as j,N as A,G as le,M as ne}from"./resourceLoaderHooks-CRL4d032.js";import{a as ie}from"./index-CkoKGIuM.js";import{e as V,a as oe}from"./three.module-BizNiMhn.js";import{B as F}from"./index-Dls6AtJn.js";import{C as p}from"./index-PchlGXp2.js";import{L as H}from"./index-Bs5DOUC-.js";import{d as se}from"./index-DU7wt8RI.js";import{l as me}from"./index-C0GIA9vz.js";import{T as ce}from"./index-D9X8Um7J.js";import{S as x}from"./index-CYqQ2WW8.js";import{u as G}from"./useTranslation-CW9c4UDM.js";import{I as o}from"./index-dk6FhMkf.js";import{N as m}from"./index-DYUpM6SD.js";import"./_commonjsHelpers-C4iS2aBk.js";import"./index-DYLXRpC5.js";import"./v4-BOvFkHkt.js";import"./ShadowComponent-DnhO6zHH.js";import"./useFeatureFlags-Dn9l-n2t.js";import"./FeathersHooks-Bcw5IzUg.js";import"./EditorServices-5l66pnva.js";import"./AuthService-CgpOViw1.js";import"./___vite-browser-external_commonjs-proxy-BqV5D26a.js";import"./index-BmZLy_Eh.js";import"./index-CO8llcWC.js";import"./iconBase-qHBVS_PM.js";import"./index-B8Egbi3s.js";import"./tw-merge-Ds6tgvmq.js";import"./index-C53TPVpl.js";import"./index-CvvRAf94.js";import"./ZoomOutSm-BKYTao-C.js";import"./index-DNUDjAZy.js";import"./index-Dp9Z83cc.js";import"./utils-C_TihLnJ.js";import"./lodash-AQPfkADg.js";import"./AssetType-CNZ47EUo.js";import"./index-DFnjDgZz.js";import"./fuse-Ch1WBRTM.js";import"./index-K3LPJkAj.js";import"./index-YWE9xQ_z.js";const l=_({name:"CameraSettingsComponent",jsonID:"EE_camera_settings",schema:n.Object({cameraNearClip:n.Number({default:.1}),cameraFarClip:n.Number({default:1e3}),projectionType:n.Enum(j,{$comment:"An indexed enum, ie. the numeric index of a value in the following sequence: 'Orthographic', 'Perspective'",default:j.Perspective}),fov:n.Number({default:60}),cameraMode:n.Enum(S,{$comment:"An indexed enum, ie. the numeric index of a value in the following sequence: 'FOLLOW', 'POI' ",default:S.FOLLOW}),minPhi:n.Number({default:-70}),maxPhi:n.Number({default:85}),isAvatarVisible:n.Bool({default:!0}),followCameraScrollSensitivity:n.Number({default:1}),canCameraFirstPerson:n.Bool({default:!0}),canCameraThirdPerson:n.Bool({default:!0}),canCameraTopDown:n.Bool({default:!0}),isFistPersonFreeCamera:n.Bool({default:!0}),isThirdPersonFreeCamera:n.Bool({default:!0}),isTopDownFreeCamera:n.Bool({default:!1}),firstPersonCameraLimits:n.Number({default:360}),thirdPersonCameraLimits:n.Number({default:360}),topDownCameraLimits:n.Number({default:360}),isFirstPersonCameraReset:n.Bool({default:!0}),isThirdPersonCameraReset:n.Bool({default:!0}),isTopDownCameraReset:n.Bool({default:!0}),thirdPersonMinDistance:n.Number({default:1.5}),thirdPersonMaxDistance:n.Number({default:50}),thirdPersonDefaultDistance:n.Number({default:3}),topDownMinDistance:n.Number({default:10}),topDownMaxDistance:n.Number({default:70}),topDownDefaultDistance:n.Number({default:40}),poiEntities:n.Array(n.EntityUUID()),poiLerpSpeed:n.Number({default:.5}),scrollDeadzone:n.Number({default:1}),scrollSensitivity:n.Number({default:.1}),scrollDistancePerPoi:n.Number({default:3}),scrollBehavior:n.Enum(N,{default:N.Clamp}),poiScrollTransitionType:n.Enum(D,{default:D.Scrolling}),enableTransitionButtons:n.Bool({default:!1})}),reactor:()=>{const c=X(),t=$(c,l);for(const r of Object.keys(B(w)))M.useEffect(()=>{t[r].value!==void 0&&t[r].value!==B(w)[r]&&(Array.isArray(t[r].value)?O(w)[r].set(Array.from(t[r].value)):O(w)[r].set(t[r].value))},[t[r].value]);return M.useEffect(()=>{t.poiScrollTransitionType.value===D.Scrolling&&t.enableTransitionButtons.set(!1)},[t.poiScrollTransitionType]),null}}),pe=_({name:"PoiComponent",jsonID:"IR_poi_component",schema:n.Object({hotspotEntityUUIDs:n.Array(n.EntityUUID(),{$comment:"Optional entities that can be hotspots within this POI"})})}),ue=c=>{const t=q([]),r=J(c,K.Authoring);return M.useEffect(()=>{const b=r.map(e=>{const C=I(e,A)?Y(e,A):`Entity ${e}`,h=I(e,k)?k.get(e):`${e}`;return{label:C,value:h,entity:e}});t.set(b)},[r.length,c]),t},de=({value:c,onChange:t,filter:r,placeholder:b,label:e,className:C})=>{const{t:h}=G(),v=ue(r),T=()=>{const f=[...c,""];t(f)},d=f=>{const u=[...c];u.splice(f,1),t(u)},E=(f,u)=>{const g=v.value.find(Q=>Q.value===u);if(!g)return;const R=[...c];R[f]=g.value,t(R)};return a.createElement("div",{className:`flex flex-col ${C}`},e&&a.createElement(H,null,e),a.createElement("div",{className:"mt-2 flex max-h-[300px] flex-col space-y-2 overflow-y-auto"},c.length===0&&a.createElement(ce,{className:"text-sm italic text-gray-400"},b||h("editor:properties.entityList.placeholder")),c.map((f,u)=>a.createElement("div",{key:u,className:"flex items-center space-x-2"},a.createElement(x,{options:v.value.map(g=>({label:g.label,value:g.value})),value:f,onChange:g=>E(u,g),width:"full"}),a.createElement(F,{onClick:()=>d(u),className:"flex-shrink-0"},a.createElement(me,{className:"h-5 w-5"}))))),a.createElement("div",{className:"mt-2 flex justify-end"},a.createElement(F,{variant:"secondary",size:"sm",onClick:T,className:"flex items-center gap-1"},a.createElement(se,{className:"h-3 w-3"}),a.createElement("span",null,h("editor:properties.entityList.addEntity","Add Entity")))))},fe=[{label:"Orthographic",value:0},{label:"Perspective",value:1}],ge=Z([le]),y=new V,L=c=>{const t=$(c.entity,l),{t:r}=G(),b=()=>{const e=new V,C=ge();for(const v of C)ee(v,T=>{var E;const d=ae(T,ne);(E=d==null?void 0:d.geometry)!=null&&E.boundingBox&&(y.copy(d.geometry.boundingBox),y.applyMatrix4(d.matrixWorld),e.union(y))});const h=e.getSize(new oe).length();te(l,{cameraNearClip:.1,cameraFarClip:Math.max(h,100)},[c.entity])};return a.createElement(re,{...c,name:r("editor:properties.cameraSettings.name"),description:r("editor:properties.cameraSettings.description"),Icon:L.iconComponent,entity:c.entity},a.createElement(o,{name:"Projection type",label:r("editor:properties.cameraSettings.lbl-projectionType")},a.createElement(x,{value:t.projectionType.value,onChange:i(l,"projectionType"),options:fe})),a.createElement(o,{name:"Field of view",label:r("editor:properties.cameraSettings.lbl-fov")},a.createElement(m,{onChange:s(l,"fov"),onRelease:i(l,"fov"),min:1,max:180,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.fov.value})),a.createElement("div",{className:"my-1 flex flex-wrap items-center justify-end"},a.createElement(F,{className:"flex flex-wrap items-center justify-end",onClick:b},r("editor:properties.cameraSettings.lbl-calcClippingPlanes"))),a.createElement(o,{name:"cameraClippingPlanes",label:r("editor:properties.cameraSettings.lbl-clippingPlanes"),containerClassName:"gap-2"},a.createElement("div",{className:"flex w-full flex-col gap-2 border-[0.5px] border-[#42454D] pb-1 pl-4 pr-4 pt-1"},a.createElement(o,{name:"Near",label:r("editor:properties.cameraSettings.lbl-nearClip"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:s(l,"cameraNearClip"),onRelease:i(l,"cameraNearClip"),min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.cameraNearClip.value,className:"flex w-full flex-grow"}))),a.createElement(o,{name:"Far",label:r("editor:properties.cameraSettings.lbl-farClip"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:s(l,"cameraFarClip"),onRelease:i(l,"cameraFarClip"),min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.cameraFarClip.value,className:"flex w-full flex-grow"}))))),a.createElement(o,{name:"cameraMode",label:r("editor:properties.cameraSettings.lbl-cameraMode")},a.createElement(x,{value:t.cameraMode.value,onChange:i(l,"cameraMode"),options:[{label:"FOLLOW",value:S.FOLLOW},{label:"POI",value:S.POI}]})),t.cameraMode.value===S.FOLLOW&&a.createElement(a.Fragment,null,a.createElement(o,{name:"avatar",label:r("editor:properties.cameraSettings.lbl-avatar")},a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-avatarVisible"),variantTextPlacement:"right",checked:t.isAvatarVisible.value,onChange:i(l,"isAvatarVisible")})),a.createElement(o,{name:"avatar",label:r("editor:properties.cameraSettings.lbl-scrollingSpeed")},a.createElement(m,{onChange:s(l,"followCameraScrollSensitivity"),onRelease:i(l,"followCameraScrollSensitivity"),min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.followCameraScrollSensitivity.value,className:"flex w-full flex-grow"})),a.createElement(o,{name:"direstCameraModes",label:r("editor:properties.cameraSettings.lbl-followCameraModes")},a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-followCameraFristPerson"),variantTextPlacement:"right",checked:t.canCameraFirstPerson.value,onChange:i(l,"canCameraFirstPerson")}),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-followCameraThirdPerson"),variantTextPlacement:"right",checked:t.canCameraThirdPerson.value,onChange:i(l,"canCameraThirdPerson")}),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-followCameraTopDown"),variantTextPlacement:"right",checked:t.canCameraTopDown.value,onChange:i(l,"canCameraTopDown")}),!t.canCameraFirstPerson.value&&!t.canCameraThirdPerson.value&&!t.canCameraTopDown.value&&a.createElement(H,{className:"text-text-error"},r("editor:properties.cameraSettings.lbl-followCameraError"))),t.canCameraFirstPerson.value&&a.createElement(o,{name:"cameraFirstPerson",label:r("editor:properties.cameraSettings.lbl-firstPersonSettings")},a.createElement("div",{className:"flex w-full flex-col gap-2 border-[0.5px] border-[#42454D] pb-1 pl-4 pr-4 pt-1"},a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-freeCamera"),variantTextPlacement:"right",checked:t.isFistPersonFreeCamera.value,onChange:i(l,"isFistPersonFreeCamera")}),t.isFistPersonFreeCamera.value&&a.createElement(o,{name:"defaultDistance",label:r("editor:properties.cameraSettings.lbl-cameraLimits"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:e=>{e=Math.min(Math.max(e,0),360),s(l,"firstPersonCameraLimits")(e)},onRelease:e=>{e=Math.min(Math.max(e,0),360),i(l,"firstPersonCameraLimits")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.firstPersonCameraLimits.value,className:"flex w-full flex-grow"}))),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-cameraReset"),variantTextPlacement:"right",checked:t.isFirstPersonCameraReset.value,onChange:i(l,"isFirstPersonCameraReset")}))),t.canCameraThirdPerson.value&&a.createElement(o,{name:"cameraThirdPerson",label:r("editor:properties.cameraSettings.lbl-thirdPersonSettings")},a.createElement("div",{className:"flex w-full flex-col gap-2 border-[0.5px] border-[#42454D] pb-1 pl-4 pr-4 pt-1"},a.createElement(o,{name:"ThirdPersonMinDistance",label:r("editor:properties.cameraSettings.lbl-minCamDist"),className:"w-2/3 flex-grow"},a.createElement(m,{onChange:e=>{e=Math.min(e,t.thirdPersonDefaultDistance.value),s(l,"thirdPersonMinDistance")(e)},onRelease:e=>{e=Math.min(e,t.thirdPersonDefaultDistance.value),i(l,"thirdPersonMinDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.thirdPersonMinDistance.value,className:"flex w-full flex-grow"})),a.createElement(o,{name:"Max",label:r("editor:properties.cameraSettings.lbl-maxCamDist"),className:"w-2/3 flex-grow"},a.createElement(m,{onChange:e=>{e=Math.max(e,t.thirdPersonDefaultDistance.value),s(l,"thirdPersonMaxDistance")(e)},onRelease:e=>{e=Math.max(e,t.thirdPersonDefaultDistance.value),i(l,"thirdPersonMaxDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.thirdPersonMaxDistance.value,className:"flex w-full flex-grow"})),a.createElement(o,{name:"defaultDistance",label:r("editor:properties.cameraSettings.lbl-defaultDistance"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:e=>{e<t.thirdPersonMinDistance.value&&(e=t.thirdPersonMinDistance.value),e>t.thirdPersonMaxDistance.value&&(e=t.thirdPersonMaxDistance.value),s(l,"thirdPersonDefaultDistance")(e)},onRelease:e=>{e<t.thirdPersonMinDistance.value&&(e=t.thirdPersonMinDistance.value),e>t.thirdPersonMaxDistance.value&&(e=t.thirdPersonMaxDistance.value),i(l,"thirdPersonDefaultDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.thirdPersonDefaultDistance.value,className:"flex w-full flex-grow"}))),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-freeCamera"),variantTextPlacement:"right",checked:t.isThirdPersonFreeCamera.value,onChange:i(l,"isThirdPersonFreeCamera")}),t.isThirdPersonFreeCamera.value&&a.createElement(o,{name:"defaultDistance",label:r("editor:properties.cameraSettings.lbl-cameraLimits"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:e=>{e=Math.min(Math.max(e,0),360),s(l,"thirdPersonCameraLimits")(e)},onRelease:e=>{e=Math.min(Math.max(e,0),360),i(l,"thirdPersonCameraLimits")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.thirdPersonCameraLimits.value,className:"flex w-full flex-grow"}))),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-cameraReset"),variantTextPlacement:"right",checked:t.isThirdPersonCameraReset.value,onChange:i(l,"isThirdPersonCameraReset")}))),t.canCameraTopDown.value&&a.createElement(o,{name:"cameraTopDown",label:r("editor:properties.cameraSettings.lbl-topDownSettings")},a.createElement("div",{className:"flex w-full flex-col gap-2 border-[0.5px] border-[#42454D] pb-1 pl-4 pr-4 pt-1"},a.createElement(o,{name:"ThirdPersonMinDistance",label:r("editor:properties.cameraSettings.lbl-minCamDist"),className:"w-2/3 flex-grow"},a.createElement(m,{onChange:e=>{e=Math.min(e,t.topDownDefaultDistance.value),s(l,"topDownMinDistance")(e)},onRelease:e=>{e=Math.min(e,t.topDownDefaultDistance.value),i(l,"topDownMinDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.topDownMinDistance.value,className:"flex w-full flex-grow"})),a.createElement(o,{name:"Max",label:r("editor:properties.cameraSettings.lbl-maxCamDist"),className:"w-2/3 flex-grow"},a.createElement(m,{onChange:e=>{e=Math.max(e,t.topDownDefaultDistance.value),s(l,"topDownMaxDistance")(e)},onRelease:e=>{e=Math.max(e,t.topDownDefaultDistance.value),i(l,"topDownMaxDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.topDownMaxDistance.value,className:"flex w-full flex-grow"})),a.createElement(o,{name:"defaultDistance",label:r("editor:properties.cameraSettings.lbl-defaultDistance"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:e=>{e<t.topDownMinDistance.value&&(e=t.topDownMinDistance.value),e>t.topDownMaxDistance.value&&(e=t.topDownMaxDistance.value),s(l,"topDownDefaultDistance")(e)},onRelease:e=>{e<t.topDownMinDistance.value&&(e=t.topDownMinDistance.value),e>t.topDownMaxDistance.value&&(e=t.topDownMaxDistance.value),i(l,"topDownDefaultDistance")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.topDownDefaultDistance.value,className:"flex w-full flex-grow"}))),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-freeCamera"),variantTextPlacement:"right",checked:t.isTopDownFreeCamera.value,onChange:i(l,"isTopDownFreeCamera")}),t.isTopDownFreeCamera.value&&a.createElement(o,{name:"defaultDistance",label:r("editor:properties.cameraSettings.lbl-cameraLimits"),className:"w-2/3 flex-grow"},a.createElement("div",{className:"flex w-full items-center gap-2"},a.createElement(m,{onChange:e=>{e=Math.min(Math.max(e,0),360),s(l,"topDownCameraLimits")(e)},onRelease:e=>{e=Math.min(Math.max(e,0),360),i(l,"topDownCameraLimits")(e)},min:.001,smallStep:.001,mediumStep:.01,largeStep:.1,value:t.topDownCameraLimits.value,className:"flex w-full flex-grow"}))),a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-cameraReset"),variantTextPlacement:"right",checked:t.isTopDownCameraReset.value,onChange:i(l,"isTopDownCameraReset")})))),t.cameraMode.value===S.POI&&a.createElement(a.Fragment,null,a.createElement(o,{name:"poiEntities",label:r("editor:properties.cameraSettings.lbl-poiEntities","POI Entities")},a.createElement(de,{value:Array.from(t.poiEntities.value),onChange:i(l,"poiEntities"),placeholder:"Select entities to use as points of interest",filter:[pe],className:"w-full"})),a.createElement(o,{name:"poiLerpSpeed",label:r("editor:properties.cameraSettings.lbl-poiLerpSpeed","POI Transition Speed")},a.createElement(m,{onChange:s(l,"poiLerpSpeed"),onRelease:i(l,"poiLerpSpeed"),min:.01,max:5,smallStep:.01,mediumStep:.1,largeStep:.5,value:t.poiLerpSpeed.value})),a.createElement(o,{name:"scrollDeadzone",label:r("editor:properties.cameraSettings.lbl-scrollDeadzone","Scroll Deadzone")},a.createElement(m,{onChange:s(l,"scrollDeadzone"),onRelease:i(l,"scrollDeadzone"),min:.1,max:2,smallStep:.05,mediumStep:.1,largeStep:.2,value:t.scrollDeadzone.value})),a.createElement(o,{name:"scrollSensitivity",label:r("editor:properties.cameraSettings.lbl-scrollSensitivity","Scroll Sensitivity")},a.createElement(m,{onChange:s(l,"scrollSensitivity"),onRelease:i(l,"scrollSensitivity"),min:.1,max:1,smallStep:.05,mediumStep:.1,largeStep:.5,value:t.scrollSensitivity.value})),a.createElement(o,{name:"scrollDistancePerPoi",label:r("editor:properties.cameraSettings.lbl-scrollDistancePerPoi","Scroll Distance Per POI")},a.createElement(m,{onChange:s(l,"scrollDistancePerPoi"),onRelease:i(l,"scrollDistancePerPoi"),min:1,max:10,smallStep:.1,mediumStep:.5,largeStep:1,value:t.scrollDistancePerPoi.value})),a.createElement(o,{name:"scrollBehavior",label:r("editor:properties.cameraSettings.lbl-scrollBehavior","Scroll Behavior")},a.createElement(x,{value:t.scrollBehavior.value,onChange:i(l,"scrollBehavior"),options:[{label:"Wrap",value:N.Wrap},{label:"Clamp",value:N.Clamp}]})),a.createElement(o,{name:"poiScrollTransitionType",label:r("editor:properties.cameraSettings.lbl-poiScrollTransitionType","POI Scroll Transition Type")},a.createElement(x,{value:t.poiScrollTransitionType.value,onChange:i(l,"poiScrollTransitionType"),options:[{label:"Scrolling",value:D.Scrolling},{label:"Snapping",value:D.Snapping}]})),t.poiScrollTransitionType.value===D.Snapping&&a.createElement(o,{name:"enableTransitionButtons",label:r("editor:properties.cameraSettings.lbl-enableTransitionButtons","Enable Transition Buttons")},a.createElement(p,{label:r("editor:properties.cameraSettings.lbl-enableTransitionButtonsDescription","Show navigation buttons"),variantTextPlacement:"right",checked:t.enableTransitionButtons.value,onChange:i(l,"enableTransitionButtons")}))))};L.iconComponent=ie;const he={},oa={title:"Editor/Properties/Camera",component:L,parameters:{componentSubtitle:"CameraNodeEditor",jest:"cameraNodeEditor.test.tsx",design:{type:"figma",url:""}},argTypes:he},P={args:{}};var U,z,W;P.parameters={...P.parameters,docs:{...(U=P.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {}
}`,...(W=(z=P.parameters)==null?void 0:z.docs)==null?void 0:W.source}}};const sa=["Default"];export{P as Default,sa as __namedExportsOrder,oa as default};
