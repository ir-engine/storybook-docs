import{u as ze}from"./WebRTCTransportFunctions-mB_FREj1.js";import{r as i,R as u}from"./index-DPzuYzxM.js";import{d as Me,o as He,i as Xe}from"./ZoomOutSm-BKYTao-C.js";import{F as Ce}from"./fuse-Ch1WBRTM.js";import{I as Ye}from"./index-BmZLy_Eh.js";import{D as We}from"./index-K3LPJkAj.js";import{h as Fe}from"./index-CvvRAf94.js";import{T as je}from"./index-DNUDjAZy.js";import{t as Q}from"./tw-merge-Ds6tgvmq.js";function se(){return se=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},se.apply(this,arguments)}var Ue=function(e,s){s===void 0&&(s=!0),i.useEffect(function(){if(s){var n=function(f){f.key==="Escape"&&e(f)};return document.addEventListener("keyup",n),function(){s&&document.removeEventListener("keyup",n)}}},[e,s])},Pe=function(e,s){s===void 0&&(s=!0),i.useEffect(function(){if(s){var n=function(){e()};return window.addEventListener("resize",n),function(){s&&window.removeEventListener("resize",n)}}},[e,s])},qe=function(e,s,n){n===void 0&&(n=!0),i.useEffect(function(){if(n){var x=function(v){var l=Array.isArray(e)?e:[e],p=!1;l.forEach(function(h){if(!h.current||h.current.contains(v.target)){p=!0;return}}),v.stopPropagation(),p||s(v)};return document.addEventListener("mousedown",x),document.addEventListener("touchstart",x),function(){n&&(document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x))}}},[e,s,n])},Ke=function(e,s){s===void 0&&(s=!0),i.useEffect(function(){if(s){var n=function(f){if(f.keyCode===9){var v,l=e==null||(v=e.current)===null||v===void 0?void 0:v.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),p=Array.prototype.slice.call(l);if(p.length===1){f.preventDefault();return}var h=p[0],O=p[p.length-1];f.shiftKey&&document.activeElement===h?(f.preventDefault(),O.focus()):document.activeElement===O&&(f.preventDefault(),h.focus())}};return document.addEventListener("keydown",n),function(){s&&document.removeEventListener("keydown",n)}}},[e,s])},Ge=typeof window<"u"?i.useLayoutEffect:i.useEffect,ie={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},Je=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],Qe=function(e,s,n,x,f){var v=f.offsetX,l=f.offsetY,p=x?8:0,h=n.split(" "),O=e.top+e.height/2,c=e.left+e.width/2,m=s.height,w=s.width,R=O-m/2,S=c-w/2,D="",k="0%",N="0%";switch(h[0]){case"top":R-=m/2+e.height/2+p,D="rotate(180deg)  translateX(50%)",k="100%",N="50%";break;case"bottom":R+=m/2+e.height/2+p,D="rotate(0deg) translateY(-100%) translateX(-50%)",N="50%";break;case"left":S-=w/2+e.width/2+p,D=" rotate(90deg)  translateY(50%) translateX(-25%)",N="100%",k="50%";break;case"right":S+=w/2+e.width/2+p,D="rotate(-90deg)  translateY(-150%) translateX(25%)",k="50%";break}switch(h[1]){case"top":R=e.top,k=e.height/2+"px";break;case"bottom":R=e.top-m+e.height,k=m-e.height/2+"px";break;case"left":S=e.left,N=e.width/2+"px";break;case"right":S=e.left-w+e.width,N=w-e.width/2+"px";break}return R=h[0]==="top"?R-l:R+l,S=h[0]==="left"?S-v:S+v,{top:R,left:S,transform:D,arrowLeft:N,arrowTop:k}},Ze=function(e){var s={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof e=="string"){var n=document.querySelector(e);n!==null&&(s=n.getBoundingClientRect())}return s},_e=function(e,s,n,x,f,v){var l=f.offsetX,p=f.offsetY,h={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},O=0,c=Ze(v),m=Array.isArray(n)?n:[n];for((v||Array.isArray(n))&&(m=[].concat(m,Je));O<m.length;){h=Qe(e,s,m[O],x,{offsetX:l,offsetY:p});var w={top:h.top,left:h.left,width:s.width,height:s.height};if(w.top<=c.top||w.left<=c.left||w.top+w.height>=c.top+c.height||w.left+w.width>=c.left+c.width)O++;else break}return h},Be=0,Ve=function(){var e=document.getElementById("popup-root");return e===null&&(e=document.createElement("div"),e.setAttribute("id","popup-root"),document.body.appendChild(e)),e},et=i.forwardRef(function(r,e){var s=r.trigger,n=s===void 0?null:s,x=r.onOpen,f=x===void 0?function(){}:x,v=r.onClose,l=v===void 0?function(){}:v,p=r.defaultOpen,h=p===void 0?!1:p,O=r.open,c=O===void 0?void 0:O,m=r.disabled,w=m===void 0?!1:m,R=r.nested,S=R===void 0?!1:R,D=r.closeOnDocumentClick,k=D===void 0?!0:D,N=r.repositionOnResize,z=N===void 0?!0:N,Z=r.closeOnEscape,K=Z===void 0?!0:Z,Y=r.on,M=Y===void 0?["click"]:Y,G=r.contentStyle,me=G===void 0?{}:G,_=r.arrowStyle,W=_===void 0?{}:_,B=r.overlayStyle,j=B===void 0?{}:B,ae=r.className,H=ae===void 0?"":ae,T=r.position,le=T===void 0?"bottom center":T,ue=r.modal,ce=ue===void 0?!1:ue,I=r.lockScroll,y=I===void 0?!1:I,V=r.arrow,J=V===void 0?!0:V,U=r.offsetX,ee=U===void 0?0:U,fe=r.offsetY,ye=fe===void 0?0:fe,o=r.mouseEnterDelay,t=o===void 0?100:o,d=r.mouseLeaveDelay,E=d===void 0?100:d,te=r.keepTooltipInside,de=te===void 0?!1:te,oe=r.children,pe=i.useState(c||h),A=pe[0],xe=pe[1],X=i.useRef(null),L=i.useRef(null),P=i.useRef(null),Ee=i.useRef(null),be=i.useRef("popup-"+ ++Be),$=ce?!0:!n,re=i.useRef(0);Ge(function(){return A?(Ee.current=document.activeElement,ke(),Le(),Re()):Te(),function(){clearTimeout(re.current)}},[A]),i.useEffect(function(){typeof c=="boolean"&&(c?ve():F())},[c,w]);var ve=function(a){A||w||(xe(!0),setTimeout(function(){return f(a)},0))},F=function(a){var C;!A||w||(xe(!1),$&&((C=Ee.current)===null||C===void 0||C.focus()),setTimeout(function(){return l(a)},0))},he=function(a){a==null||a.stopPropagation(),A?F(a):ve(a)},we=function(a){clearTimeout(re.current),re.current=setTimeout(function(){return ve(a)},t)},Oe=function(a){a==null||a.preventDefault(),he()},ge=function(a){clearTimeout(re.current),re.current=setTimeout(function(){return F(a)},E)},Re=function(){$&&y&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Te=function(){$&&y&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Le=function(){var a,C=L==null||(a=L.current)===null||a===void 0?void 0:a.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),g=Array.prototype.slice.call(C)[0];g==null||g.focus()};i.useImperativeHandle(e,function(){return{open:function(){ve()},close:function(){F()},toggle:function(){he()}}});var ke=function(){if(!($||!A)&&!(!(X!=null&&X.current)||!(X!=null&&X.current)||!(L!=null&&L.current))){var a=X.current.getBoundingClientRect(),C=L.current.getBoundingClientRect(),g=_e(a,C,le,J,{offsetX:ee,offsetY:ye},de);if(L.current.style.top=g.top+window.scrollY+"px",L.current.style.left=g.left+window.scrollX+"px",J&&P.current){var q,ne;P.current.style.transform=g.transform,P.current.style.setProperty("-ms-transform",g.transform),P.current.style.setProperty("-webkit-transform",g.transform),P.current.style.top=((q=W.top)===null||q===void 0?void 0:q.toString())||g.arrowTop,P.current.style.left=((ne=W.left)===null||ne===void 0?void 0:ne.toString())||g.arrowLeft}}};Ue(F,K),Ke(L,A&&$),Pe(ke,z),qe(n?[L,X]:[L],F,k&&!S);var $e=function(){for(var a={key:"T",ref:X,"aria-describedby":be.current},C=Array.isArray(M)?M:[M],g=0,q=C.length;g<q;g++)switch(C[g]){case"click":a.onClick=he;break;case"right-click":a.onContextMenu=Oe;break;case"hover":a.onMouseEnter=we,a.onMouseLeave=ge;break;case"focus":a.onFocus=we,a.onBlur=ge;break}if(typeof n=="function"){var ne=n(A);return!!n&&u.cloneElement(ne,a)}return!!n&&u.cloneElement(n,a)},Ne=function(){var a=$?ie.popupContent.modal:ie.popupContent.tooltip,C={className:"popup-content "+(H!==""?H.split(" ").map(function(g){return g+"-content"}).join(" "):""),style:se({},a,me,{pointerEvents:"auto"}),ref:L,onClick:function(q){q.stopPropagation()}};return!ce&&M.indexOf("hover")>=0&&(C.onMouseEnter=we,C.onMouseLeave=ge),C},Se=function(){return u.createElement("div",Object.assign({},Ne(),{key:"C",role:$?"dialog":"tooltip",id:be.current}),J&&!$&&u.createElement("div",{ref:P,style:ie.popupArrow},u.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(H!==""?H.split(" ").map(function(a){return a+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:se({position:"absolute"},W)},u.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),oe&&typeof oe=="function"?oe(F,A):oe)},De=!(M.indexOf("hover")>=0),Ie=$?ie.overlay.modal:ie.overlay.tooltip,Ae=[De&&u.createElement("div",{key:"O","data-testid":"overlay","data-popup":$?"modal":"tooltip",className:"popup-overlay "+(H!==""?H.split(" ").map(function(b){return b+"-overlay"}).join(" "):""),style:se({},Ie,j,{pointerEvents:k&&S||$?"auto":"none"}),onClick:k&&S?F:void 0,tabIndex:-1},$&&Se()),!$&&Se()];return u.createElement(u.Fragment,null,$e(),A&&Ye.createPortal(Ae,Ve()))});const tt={sm:"240px",md:"320px",lg:"520px",full:"100%"},ft=({options:r,width:e="md",inputHeight:s="l",onChange:n,onInputChange:x,onOpen:f,value:v,labelProps:l,state:p,helperText:h,required:O,disabled:c,searchMode:m,positioning:w,showClearButton:R=!1})=>{const[S,D]=i.useState({maxHeight:"0px",...w}),k=i.useRef(null),[N,z]=i.useState(""),[Z,K]=i.useState(-1),[Y,M]=i.useState(-1),G=i.useRef(null),[me,_]=i.useState(""),[W,B]=i.useState(""),j=i.useRef(null),[ae,H]=i.useState(!1),T=ze(v),le=i.useId(),[ue,ce]=i.useState(0),I=i.useRef(null),y=i.useMemo(()=>{if(W==="")return r;const o=W.toLowerCase();switch(m){case"prefix":return r.filter(t=>{var d,E;return((d=t==null?void 0:t.label)==null?void 0:d.toLowerCase().startsWith(o))||((E=t==null?void 0:t.secondaryText)==null?void 0:E.toLowerCase().startsWith(o))});case"substring":return r.filter(t=>{var d,E;return((d=t==null?void 0:t.label)==null?void 0:d.toLowerCase().includes(o))||((E=t==null?void 0:t.secondaryText)==null?void 0:E.toLowerCase().includes(o))});case"fuzzy":return j.current||(j.current=new Ce(r,{keys:["label","secondaryText"]})),j.current.search(W).map(({item:d})=>d);default:return r}},[r,W,m]);i.useEffect(()=>{m==="fuzzy"&&j.current!==null&&(j.current=new Ce(r,{keys:["label","secondaryText"]}))},[m]),i.useEffect(()=>{T.set(v)},[v]),i.useLayoutEffect(()=>{const o=()=>{if(k.current&&w===void 0){const{top:t,bottom:d}=k.current.getBoundingClientRect(),E=window.innerHeight,te=t,de=E-d,pe=(de>=te?"down":"up")==="down"?.8*de:.8*te;D({...S,maxHeight:`${pe}px`})}};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),i.useLayoutEffect(()=>{const o=()=>{(l==null?void 0:l.position)==="left"&&G.current?_(`${G.current.offsetWidth+8}px`):_("")};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[l]),i.useEffect(()=>{B("")},[Z]),i.useEffect(()=>{if(y.length>0&&y.findIndex(t=>t.value===T.value)===-1&&m===void 0){console.warn("No corresponding option found. Defaulting to null."),z("");return}},[v,T,Z,y]),i.useEffect(()=>{if(y.length){const o=y.findIndex(t=>t.value===T.value);o!==-1&&z(y[o].label)}},[T,y]),i.useEffect(()=>{const o=document.getElementById(le),t=()=>{o&&ce(o.offsetWidth)},d=new ResizeObserver(t);return o&&d.observe(o),t(),()=>{d.disconnect()}},[]);const V=i.useRef(null),J=()=>{I.current&&I.current.toggle()},U=()=>{I.current&&I.current.close()},ee=i.useRef(null),[fe,ye]=i.useState({});return i.useEffect(()=>{if(k.current&&ee.current){const o=k.current.getBoundingClientRect().top,t=ee.current.getBoundingClientRect().height;ye({top:`${o-t-10}px`})}},[y]),u.createElement(et,{trigger:o=>u.createElement("div",{id:le,className:Q("flex flex-col gap-y-2",e==="full"?"w-full":"w-fit")},u.createElement("div",{className:Q("flex",e==="full"?"w-full":"w-fit",(l==null?void 0:l.position)==="top"&&"flex-col gap-y-2",(l==null?void 0:l.position)==="left"&&"flex-row items-center gap-x-2")},(l==null?void 0:l.text)&&u.createElement("label",{className:"block text-xs font-medium",ref:G},u.createElement("div",{className:"flex flex-row items-center gap-x-1.5"},u.createElement("div",{className:"flex flex-row items-center gap-x-0.5"},O&&u.createElement("span",{className:"text-sm text-ui-error"},"*"),u.createElement("span",{className:"text-xs text-text-secondary"},l.text)),(l==null?void 0:l.infoText)&&u.createElement(je,{content:l.infoText},u.createElement(Me,{className:"text-text-tertiary"})))),u.createElement("div",{ref:k,className:"relative",style:{width:tt[e]}},u.createElement("div",{tabIndex:0,className:Q(`relative flex w-full items-center gap-x-2 rounded-md bg-ui-background text-text-tertiary ${Fe[s]} border-[0.5px] border-ui-outline transition-colors duration-300`,c?"cursor-not-allowed bg-ui-inactive-background text-ui-inactive-outline":"hover:text-text-primary",p==="success"?"border-ui-success":"",p==="error"?"border-ui-error":"")},u.createElement("input",{ref:V,onClick:()=>{c||(J(),setTimeout(()=>{var t;return(t=V.current)==null?void 0:t.focus()},0))},type:"text",className:Q("box-content w-full border-y border-transparent bg-transparent text-text-secondary focus:border-transparent focus:outline-none focus:ring-0",c?"cursor-not-allowed":m===void 0?"cursor-pointer":"cursor-text"),"data-testid":"select-input",value:N,readOnly:m===void 0,onChange:t=>{I.current&&I.current.open(),z(t.target.value),B(t.target.value),x&&x(t.target.value)}}),R&&!c&&u.createElement(He,{onClick:()=>{n("")},className:Q(c?"cursor-not-allowed":"cursor-pointer","text-text-secondary")}),u.createElement(Xe,{onClick:()=>{c||J()},className:Q(c?"cursor-not-allowed":"cursor-pointer",`${o&&!c&&"rotate-180"} text-text-secondary duration-300`)})))),h&&!o&&u.createElement("span",{className:`text-xs ${p==="success"&&"text-ui-success"} ${p==="error"&&"text-ui-error"}`,style:{translate:me}},h)),on:"click",closeOnDocumentClick:!0,arrow:!1,ref:I,position:["bottom center","top center"],repositionOnResize:!0,contentStyle:{padding:"0px",border:"none",...fe},onOpen:()=>f==null?void 0:f(!0),onClose:()=>f==null?void 0:f(!1)},u.createElement("div",{ref:ee,className:"z-50 flex flex-col overflow-y-auto overflow-x-hidden rounded-lg",style:{width:ue,maxHeight:S.maxHeight},onKeyUp:o=>{if(c||!open)return;let t=Y;Y===-1?o.code==="ArrowUp"?t=y.length-1:o.code==="ArrowDown"&&(t=0):o.code==="ArrowUp"?t=(Y-1+y.length)%y.length:o.code==="ArrowDown"&&(t=(Y+1)%y.length),M(t),["Enter"," "].includes(o.code)&&(U(),T.set(y[t].value),K(t),z(y[t].label),n(y[t].value))}},y.length>0&&!c&&y.filter(o=>!!o).map(({value:o,...t},d)=>u.createElement(We,{height:s,key:d,...t,selected:T.value===o,active:d===Y,onMouseDown:E=>{E.stopPropagation(),E.preventDefault(),U(),T.set(o),K(d),z(t.label),n(o)},onMouseEnter:()=>{M(d)},onMouseLeave:()=>{M(-1)},onTouchMove:()=>H(!0),onTouchEnd:()=>{ae||(U(),T.set(o),K(d),z(t.label),n(o)),H(!1)},onPointerUp:E=>{E.stopPropagation(),E.preventDefault()},onKeyUp:E=>{E.code==="Enter"&&(U(),T.set(o),K(d),z(t.label),n(o))}})),y.length===0&&!c&&u.createElement("div",{className:"flex h-12 items-center justify-center bg-ui-background text-text-secondary"},"No options available")))};export{ft as S};
