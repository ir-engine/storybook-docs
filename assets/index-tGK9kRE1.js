var ae=Object.defineProperty;var X=e=>{throw TypeError(e)};var ce=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var A=(e,t,r)=>ce(e,typeof t!="symbol"?t+"":t,r),j=(e,t,r)=>t.has(e)||X("Cannot "+r);var H=(e,t,r)=>(j(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>t.has(e)?X("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Y=(e,t,r,n)=>(j(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),C=(e,t,r)=>(j(e,t,"access private method"),r);var ue=/(%?)(%([sdijo]))/g;function le(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if(typeof e=="string")return e;const r=JSON.stringify(e);return r==="{}"||r==="[]"||/^\[object .+?\]$/.test(r)?e:r}}}function U(e,...t){if(t.length===0)return e;let r=0,n=e.replace(ue,(i,o,s,a)=>{const f=t[r],l=le(f,a);return o?i:(r++,l)});return r<t.length&&(n+=` ${t.slice(r).join(" ")}`),n=n.replace(/%{2,2}/g,"%"),n}var de=2;function fe(e){if(!e.stack)return;const t=e.stack.split(`
`);t.splice(1,de),e.stack=t.join(`
`)}var he=class extends Error{constructor(e,...t){super(e),this.message=e,this.name="Invariant Violation",this.message=U(e,...t),fe(this)}},Q=(e,t,...r)=>{if(!e)throw new he(t,...r)};Q.as=(e,t,r,...n)=>{if(!t){const i=n.length===0?r:U(r,...n);let o;try{o=Reflect.construct(e,[i])}catch{o=e(i)}throw o}};const pe="[MSW]";function V(e,...t){const r=U(e,...t);return`${pe} ${r}`}function _e(e,...t){console.warn(V(e,...t))}function me(e,...t){console.error(V(e,...t))}const ge={formatMessage:V,warn:_e,error:me};class et extends Error{constructor(t){super(t),this.name="InternalError"}}function Ee(){Q(typeof URL<"u",ge.formatMessage(`Global "URL" class is not defined. This likely means that you're running MSW in an environment that doesn't support all Node.js standard API (e.g. React Native). If that's the case, please use an appropriate polyfill for the "URL" class, like "react-native-url-polyfill".`))}var be=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}},ee=class{static listenerCount(e,t){return e.listenerCount(t)}constructor(){this.events=new Map,this.maxListeners=ee.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,t,r){this.emit(e,t,r)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]}_wrapOnceListener(e,t){const r=(...n)=>(this.removeListener(e,r),t.apply(this,n));return Object.defineProperty(r,"name",{value:t.name}),r}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...t){const r=this._getListeners(e);return r.forEach(n=>{n.apply(this,t)}),r.length>0}addListener(e,t){this._emitInternalEvent("newListener",e,t);const r=this._getListeners(e).concat(t);if(this.events.set(e,r),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const n=new be(this,e,this.listenerCount(e));console.warn(n)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,this._wrapOnceListener(e,t))}prependListener(e,t){const r=this._getListeners(e);if(r.length>0){const n=[t].concat(r);this.events.set(e,n)}else this.events.set(e,r.concat(t));return this}prependOnceListener(e,t){return this.prependListener(e,this._wrapOnceListener(e,t))}removeListener(e,t){const r=this._getListeners(e);return r.length>0&&(this._removeListener(r,t),this.events.set(e,r),this._emitInternalEvent("removeListener",e,t)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},te=ee;te.defaultMaxListeners=10;const Re=/[\/\\]msw[\/\\]src[\/\\](.+)/,ve=/(node_modules)?[\/\\]lib[\/\\](core|browser|node|native|iife)[\/\\]|^[^\/\\]*$/;function tt(e){const t=e.stack;if(!t)return;const n=t.split(`
`).slice(1).find(o=>!(Re.test(o)||ve.test(o)));return n?n.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,""):void 0}function Te(e){for(var t=[],r=0;r<e.length;){var n=e[r];if(n==="*"||n==="+"||n==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(n==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(n==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(n==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(n===":"){for(var i="",o=r+1;o<e.length;){var s=e.charCodeAt(o);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){i+=e[o++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:i}),r=o;continue}if(n==="("){var a=1,f="",o=r+1;if(e[o]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(o));for(;o<e.length;){if(e[o]==="\\"){f+=e[o++]+e[o++];continue}if(e[o]===")"){if(a--,a===0){o++;break}}else if(e[o]==="("&&(a++,e[o+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(o));f+=e[o++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(r));if(!f)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:f}),r=o;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function ye(e,t){t===void 0&&(t={});for(var r=Te(e),n=t.prefixes,i=n===void 0?"./":n,o=t.delimiter,s=o===void 0?"/#?":o,a=[],f=0,l=0,h="",u=function(m){if(l<r.length&&r[l].type===m)return r[l++].value},R=function(m){var d=u(m);if(d!==void 0)return d;var E=r[l],B=E.type,se=E.index;throw new TypeError("Unexpected ".concat(B," at ").concat(se,", expected ").concat(m))},p=function(){for(var m="",d;d=u("CHAR")||u("ESCAPED_CHAR");)m+=d;return m},D=function(m){for(var d=0,E=s;d<E.length;d++){var B=E[d];if(m.indexOf(B)>-1)return!0}return!1},x=function(m){var d=a[a.length-1],E=m||(d&&typeof d=="string"?d:"");if(d&&!E)throw new TypeError('Must have text between two parameters, missing text after "'.concat(d.name,'"'));return!E||D(E)?"[^".concat(T(s),"]+?"):"(?:(?!".concat(T(E),")[^").concat(T(s),"])+?")};l<r.length;){var I=u("CHAR"),_=u("NAME"),L=u("PATTERN");if(_||L){var g=I||"";i.indexOf(g)===-1&&(h+=g,g=""),h&&(a.push(h),h=""),a.push({name:_||f++,prefix:g,suffix:"",pattern:L||x(g),modifier:u("MODIFIER")||""});continue}var c=I||u("ESCAPED_CHAR");if(c){h+=c;continue}h&&(a.push(h),h="");var O=u("OPEN");if(O){var g=p(),v=u("NAME")||"",P=u("PATTERN")||"",S=p();R("CLOSE"),a.push({name:v||(P?f++:""),pattern:v&&!P?x(g):P,prefix:g,suffix:S,modifier:u("MODIFIER")||""});continue}R("END")}return a}function Ie(e,t){var r=[],n=ne(e,r,t);return Oe(n,r,t)}function Oe(e,t,r){r===void 0&&(r={});var n=r.decode,i=n===void 0?function(o){return o}:n;return function(o){var s=e.exec(o);if(!s)return!1;for(var a=s[0],f=s.index,l=Object.create(null),h=function(R){if(s[R]===void 0)return"continue";var p=t[R-1];p.modifier==="*"||p.modifier==="+"?l[p.name]=s[R].split(p.prefix+p.suffix).map(function(D){return i(D,p)}):l[p.name]=i(s[R],p)},u=1;u<s.length;u++)h(u);return{path:a,index:f,params:l}}}function T(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function re(e){return e&&e.sensitive?"":"i"}function Ae(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=r.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=r.exec(e.source);return e}function xe(e,t,r){var n=e.map(function(i){return ne(i,t,r).source});return new RegExp("(?:".concat(n.join("|"),")"),re(r))}function Le(e,t,r){return Se(ye(e,r),t,r)}function Se(e,t,r){r===void 0&&(r={});for(var n=r.strict,i=n===void 0?!1:n,o=r.start,s=o===void 0?!0:o,a=r.end,f=a===void 0?!0:a,l=r.encode,h=l===void 0?function(d){return d}:l,u=r.delimiter,R=u===void 0?"/#?":u,p=r.endsWith,D=p===void 0?"":p,x="[".concat(T(D),"]|$"),I="[".concat(T(R),"]"),_=s?"^":"",L=0,g=e;L<g.length;L++){var c=g[L];if(typeof c=="string")_+=T(h(c));else{var O=T(h(c.prefix)),v=T(h(c.suffix));if(c.pattern)if(t&&t.push(c),O||v)if(c.modifier==="+"||c.modifier==="*"){var P=c.modifier==="*"?"?":"";_+="(?:".concat(O,"((?:").concat(c.pattern,")(?:").concat(v).concat(O,"(?:").concat(c.pattern,"))*)").concat(v,")").concat(P)}else _+="(?:".concat(O,"(").concat(c.pattern,")").concat(v,")").concat(c.modifier);else{if(c.modifier==="+"||c.modifier==="*")throw new TypeError('Can not repeat "'.concat(c.name,'" without a prefix and suffix'));_+="(".concat(c.pattern,")").concat(c.modifier)}else _+="(?:".concat(O).concat(v,")").concat(c.modifier)}}if(f)i||(_+="".concat(I,"?")),_+=r.endsWith?"(?=".concat(x,")"):"$";else{var S=e[e.length-1],m=typeof S=="string"?I.indexOf(S[S.length-1])>-1:S===void 0;i||(_+="(?:".concat(I,"(?=").concat(x,"))?")),m||(_+="(?=".concat(I,"|").concat(x,")"))}return new RegExp(_,re(r))}function ne(e,t,r){return e instanceof RegExp?Ae(e,t):Array.isArray(e)?xe(e,t,r):Le(e,t,r)}new TextEncoder;function we(e){try{return new URL(e),!0}catch{return!1}}function K(e,t){const n=Object.getOwnPropertySymbols(t).find(i=>i.description===e);if(n)return Reflect.get(t,n)}var w=class extends Response{static isConfigurableStatusCode(e){return e>=200&&e<=599}static isRedirectResponse(e){return w.STATUS_CODES_WITH_REDIRECT.includes(e)}static isResponseWithBody(e){return!w.STATUS_CODES_WITHOUT_BODY.includes(e)}static setUrl(e,t){if(!e||e==="about:"||!we(e))return;const r=K("state",t);r?r.urlList.push(new URL(e)):Object.defineProperty(t,"url",{value:e,enumerable:!0,configurable:!0,writable:!1})}static parseRawHeaders(e){const t=new Headers;for(let r=0;r<e.length;r+=2)t.append(e[r],e[r+1]);return t}constructor(e,t={}){var r;const n=(r=t.status)!=null?r:200,i=w.isConfigurableStatusCode(n)?n:200,o=w.isResponseWithBody(n)?e:null;if(super(o,{status:i,statusText:t.statusText,headers:t.headers}),n!==i){const s=K("state",this);s?s.status=n:Object.defineProperty(this,"status",{value:n,enumerable:!0,configurable:!0,writable:!1})}w.setUrl(t.url,this)}},ie=w;ie.STATUS_CODES_WITHOUT_BODY=[101,103,204,205,304];ie.STATUS_CODES_WITH_REDIRECT=[301,302,303,307,308];function Ne(){if(typeof navigator<"u"&&navigator.product==="ReactNative")return!0;if(typeof process<"u"){const e=process.type;return e==="renderer"||e==="worker"?!1:!!(process.versions&&process.versions.node)}return!1}var Ue={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_0f2f574d-5478-488a-9ad4-be29e7111529",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/10.8.2 node/v18.20.8 linux x64 workspaces/true ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_0f2f574d-5478-488a-9ad4-be29e7111529",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/18.20.8/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/storybook-docs/storybook-docs",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/storybook-docs/storybook-docs/ir-engine/packages/ui/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ir-engine",npm_package_engines_node:">= 22.11.0",GRADLE_HOME:"/usr/share/gradle-8.14.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/28.1.13356709",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"161899750",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/storybook-docs/storybook-docs/ir-engine",SYSTEMD_EXEC_PID:"1879",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20250602.3.0",LOGNAME:"runner",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.12/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.9/x64",JOURNAL_STREAM:"9:11646",GITHUB_WORKFLOW:"Handle Webhook for Storybook Deployment",_:"/opt/hostedtoolcache/node/18.20.8/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/18.20.8/x64",npm_config_npm_version:"10.8.2",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",GITHUB_RUN_ID:"15714557118",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"261a0fbf02b3b17e4ea63ea41a0ba90cf5d4e59a",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ir-engine/storybook-docs/.github/workflows/update-storybook.yml@refs/heads/master",GITHUB_ACTION_REPOSITORY:"",ENABLE_RUNNER_TRACING:"true",npm_config_node_gyp:"/opt/hostedtoolcache/node/18.20.8/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/storybook-docs/storybook-docs/ir-engine/packages/ui/node_modules/.bin:/home/runner/work/storybook-docs/storybook-docs/ir-engine/packages/node_modules/.bin:/home/runner/work/storybook-docs/storybook-docs/ir-engine/node_modules/.bin:/home/runner/work/storybook-docs/storybook-docs/node_modules/.bin:/home/runner/work/storybook-docs/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/18.20.8/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/18.20.8/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_41dee33c-97cf-4f22-9cd8-bb001b2ab14c",INVOCATION_ID:"936053976d4e4b8b81abcca65d6186a5",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/18.20.8/x64/bin/node",npm_package_name:"@ir-engine/ui",GITHUB_ACTION:"__run_2",GITHUB_RUN_NUMBER:"256",GITHUB_TRIGGERING_ACTOR:"ir-repo-auth[bot]",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",npm_config_legacy_peer_deps:"true",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1000010600",XDG_CONFIG_HOME:"/home/runner/.config",GITHUB_REF_NAME:"master",GITHUB_REPOSITORY:"ir-engine/storybook-docs",npm_lifecycle_script:"storybook build",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",SHELL:"/bin/bash",GITHUB_REPOSITORY_ID:"867534663",GITHUB_ACTIONS:"true",npm_package_version:"1.0.3",npm_lifecycle_event:"build-storybook",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/storybook-docs/storybook-docs",ACCEPT_EULA:"Y",GITHUB_JOB:"build-and-deploy",GITHUB_SHA:"261a0fbf02b3b17e4ea63ea41a0ba90cf5d4e59a",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/master",GITHUB_ACTOR:"ir-repo-auth[bot]",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/18.20.8/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_0f2f574d-5478-488a-9ad4-be29e7111529",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/storybook-docs/storybook-docs/ir-engine/packages/ui",GITHUB_ACTOR_ID:"214695604",RUNNER_WORKSPACE:"/home/runner/work/storybook-docs",npm_execpath:"/opt/hostedtoolcache/node/18.20.8/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"repository_dispatch",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_0f2f574d-5478-488a-9ad4-be29e7111529",npm_config_global_prefix:"/opt/hostedtoolcache/node/18.20.8/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_0f2f574d-5478-488a-9ad4-be29e7111529",INIT_CWD:"/home/runner/work/storybook-docs/storybook-docs/ir-engine/packages/ui",EDITOR:"vi",NODE_ENV:"production"},De=Object.defineProperty,Pe=(e,t)=>{for(var r in t)De(e,r,{get:t[r],enumerable:!0})},$={};Pe($,{blue:()=>ke,gray:()=>F,green:()=>Me,red:()=>Ce,yellow:()=>He});function He(e){return`\x1B[33m${e}\x1B[0m`}function ke(e){return`\x1B[34m${e}\x1B[0m`}function F(e){return`\x1B[90m${e}\x1B[0m`}function Ce(e){return`\x1B[31m${e}\x1B[0m`}function Me(e){return`\x1B[32m${e}\x1B[0m`}var G=Ne(),oe=class{constructor(e){A(this,"prefix");this.name=e,this.prefix=`[${this.name}]`;const t=J("DEBUG"),r=J("LOG_LEVEL");t==="1"||t==="true"||typeof t<"u"&&this.name.startsWith(t)?(this.debug=k(r,"debug")?b:this.debug,this.info=k(r,"info")?b:this.info,this.success=k(r,"success")?b:this.success,this.warning=k(r,"warning")?b:this.warning,this.error=k(r,"error")?b:this.error):(this.info=b,this.success=b,this.warning=b,this.error=b,this.only=b)}extend(e){return new oe(`${this.name}:${e}`)}debug(e,...t){this.logEntry({level:"debug",message:F(e),positionals:t,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:this.prefix,colors:{prefix:"blue"}});const r=new Ge;return(n,...i)=>{r.measure(),this.logEntry({level:"info",message:`${n} ${F(`${r.deltaTime}ms`)}`,positionals:i,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...t){this.logEntry({level:"info",message:e,positionals:t,prefix:`✔ ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...t){this.logEntry({level:"warning",message:e,positionals:t,prefix:`⚠ ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...t){this.logEntry({level:"error",message:e,positionals:t,prefix:`✖ ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,t){return{timestamp:new Date,level:e,message:t}}logEntry(e){const{level:t,message:r,prefix:n,colors:i,positionals:o=[]}=e,s=this.createEntry(t,r),a=(i==null?void 0:i.timestamp)||"gray",f=(i==null?void 0:i.prefix)||"gray",l={timestamp:$[a],prefix:$[f]};this.getWriter(t)([l.timestamp(this.formatTimestamp(s.timestamp))].concat(n!=null?l.prefix(n):[]).concat(z(r)).join(" "),...o.map(z))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return Be;case"warning":return je;case"error":return We}}},Ge=class{constructor(){A(this,"startTime");A(this,"endTime");A(this,"deltaTime");this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},b=()=>{};function Be(e,...t){if(G){process.stdout.write(U(e,...t)+`
`);return}console.log(e,...t)}function je(e,...t){if(G){process.stderr.write(U(e,...t)+`
`);return}console.warn(e,...t)}function We(e,...t){if(G){process.stderr.write(U(e,...t)+`
`);return}console.error(e,...t)}function J(e){var t;return G?Ue[e]:(t=globalThis[e])==null?void 0:t.toString()}function k(e,t){return e!==void 0&&e!==t}function z(e){return typeof e>"u"?"undefined":e===null?"null":typeof e=="string"?e:typeof e=="object"?JSON.stringify(e):e.toString()}function q(e){return globalThis[e]||void 0}function $e(e,t){globalThis[e]=t}function Fe(e){delete globalThis[e]}var rt=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new te,this.subscriptions=[],this.logger=new oe(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),this.readyState==="APPLIED"){e.info("intercepted already applied!");return}if(!this.checkEnvironment()){e.info("the interceptor cannot be applied in this environment!");return}this.readyState="APPLYING";const r=this.getInstance();if(r){e.info("found a running instance, reusing..."),this.on=(n,i)=>(e.info('proxying the "%s" listener',n),r.emitter.addListener(n,i),this.subscriptions.push(()=>{r.emitter.removeListener(n,i),e.info('removed proxied "%s" listener!',n)}),this),this.readyState="APPLIED";return}e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,t){const r=this.logger.extend("on");return this.readyState==="DISPOSING"||this.readyState==="DISPOSED"?(r.info("cannot listen to events, already disposed!"),this):(r.info('adding "%s" event listener:',e,t),this.emitter.on(e,t),this)}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if(this.readyState==="DISPOSED"){e.info("cannot dispose, already disposed!");return}if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",!this.getInstance()){e.info("no interceptors running, skipping dispose...");return}if(this.clearInstance(),e.info("global symbol deleted:",q(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const t of this.subscriptions)t();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}getInstance(){var e;const t=q(this.symbol);return this.logger.info("retrieved global instance:",(e=t==null?void 0:t.constructor)==null?void 0:e.name),t}setInstance(){$e(this.symbol,this),this.logger.info("set global instance!",this.symbol.description)}clearInstance(){Fe(this.symbol),this.logger.info("cleared global instance!",this.symbol.description)}};function nt(){return Math.random().toString(16).slice(2)}function Ve(e,t=!0){return[t&&e.origin,e.pathname].filter(Boolean).join("")}const Xe=/[\?|#].*$/g;function it(e){return new URL(`/${e}`,"http://localhost").searchParams}function Ye(e){return e.endsWith("?")?e:e.replace(Xe,"")}function Ke(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}function Je(e,t){if(Ke(e)||e.startsWith("*"))return e;const r=t||typeof location<"u"&&location.href;return r?decodeURI(new URL(encodeURI(e),r).href):e}function ze(e,t){if(e instanceof RegExp)return e;const r=Je(e,t);return Ye(r)}function qe(e){return e.replace(/([:a-zA-Z_-]*)(\*{1,2})+/g,(t,r,n)=>{const i="(.*)";return r?r.startsWith(":")?`${r}${n}`:`${r}${i}`:i}).replace(/([^\/])(:)(?=\d+)/,"$1\\$2").replace(/^([^\/]+)(:)(?=\/\/)/,"$1\\$2")}function ot(e,t,r){const n=ze(t,r),i=typeof n=="string"?qe(n):n,o=Ve(e),s=Ie(i,{decode:decodeURIComponent})(o),a=s&&s.params||{};return{matches:s!==!1,params:a}}function st(e){return typeof e=="string"||e instanceof RegExp}function Ze(){const e=(t,r)=>{e.state="pending",e.resolve=n=>{if(e.state!=="pending")return;e.result=n;const i=o=>(e.state="fulfilled",o);return t(n instanceof Promise?n:Promise.resolve(n).then(i))},e.reject=n=>{if(e.state==="pending")return queueMicrotask(()=>{e.state="rejected"}),r(e.rejectionReason=n)}};return e}var y,N,M,Z,at=(Z=class extends Promise{constructor(t=null){const r=Ze();super((n,i)=>{r(n,i),t==null||t(r.resolve,r.reject)});W(this,N);W(this,y);A(this,"resolve");A(this,"reject");Y(this,y,r),this.resolve=H(this,y).resolve,this.reject=H(this,y).reject}get state(){return H(this,y).state}get rejectionReason(){return H(this,y).rejectionReason}then(t,r){return C(this,N,M).call(this,super.then(t,r))}catch(t){return C(this,N,M).call(this,super.catch(t))}finally(t){return C(this,N,M).call(this,super.finally(t))}},y=new WeakMap,N=new WeakSet,M=function(t){return Object.defineProperties(t,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},Z);Ee();export{at as D,te as E,ie as F,et as I,Ne as a,it as b,Ye as c,ge as d,rt as e,nt as f,tt as g,st as h,Q as i,ot as m};
