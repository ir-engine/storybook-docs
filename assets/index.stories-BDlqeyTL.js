var E1=Object.defineProperty;var w1=(e,t,n)=>t in e?E1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var lt=(e,t,n)=>w1(e,typeof t!="symbol"?t+"":t,n);import{R as y,r as Gt}from"./index-DPzuYzxM.js";import{m as A1,c as b1,n as T1}from"./index-C0GIA9vz.js";import{A as S1,r as aa,u as k1}from"./FeathersHooks-Bcw5IzUg.js";import{d as Ln,k as Rn,l as ze,a as Pe,g as rt,e as L1,o as R1,r as x1,i as P1,p as F1,q as M1,h as ut,c as ft,b as Et,m as Je,t as I1,w as O1,v as N1,u as C1}from"./WebRTCTransportFunctions-mB_FREj1.js";import{U as wn,n as mn,V as D1,h as Ms,x as An,l as xn,g as T,A as U1,s as st,E as ca,z as Mt,w as Pn,Q as B1,u as G1,a as H1,o as Co,q as Ut,e as V1,X as j1,d as z1,Y as ae,S as ye,b as Do,c as Uo,r as W1,Z as K1,P as $1}from"./UUIDComponent-GqVY2Xw8.js";import{A as Y1,p as os}from"./AvatarNetworkActions-D8KEwxoM.js";import{aj as We,ak as le,a8 as ie,al as X1,T as z,am as q1,O as Tt,a as Q1,an as Z1,ao as J1,l as la,ap as ha,a9 as ec,G as ua,X as Br,aq as tc,ar as nc,as as rc,at as sc,au as oc,$ as ic,e as ac,w as cc,av as is,N as as,aw as Bo,ax as lc,ay as rr,M as hc,az as Go,a1 as Ho,R as uc,aA as Yn,c as fc,aB as dc,aC as pc}from"./resourceLoaderHooks-CRL4d032.js";import{A as De}from"./AvatarComponent-nx-CnC4v.js";import{a as w,H as fa,J as mc,K as sr,Q as J,N as gc,O as yc,d as da,M as tt,X as _c,j as pa,Y as vc,Z as Ec,B as wc,b as Ac,c as Vo,h as bc,_ as Tc,i as Sc,E as kc}from"./three.module-BizNiMhn.js";import{T as ma,c as Lc,a as Rc}from"./PriorityQueue-DcBoTGFk.js";import{l as Gr}from"./lodash-AQPfkADg.js";import{A as xc}from"./AvatarMovementSettingsState-H4HGqdaK.js";import{k as Pc,l as Fc,m as Mc}from"./index-CO8llcWC.js";import{T as Hr}from"./index-DNUDjAZy.js";import"./_commonjsHelpers-C4iS2aBk.js";import"./iconBase-qHBVS_PM.js";import"./index-DYLXRpC5.js";import"./v4-BOvFkHkt.js";import"./AssetType-CNZ47EUo.js";import"./___vite-browser-external_commonjs-proxy-BqV5D26a.js";import"./client-CcmnHNO9.js";import"./index-BmZLy_Eh.js";import"./ShadowComponent-DnhO6zHH.js";import"./tw-merge-Ds6tgvmq.js";const Ht=Ln({name:"AnimationState",initial:()=>({loadedAnimations:{},avatarLoadingEffect:!1})}),Ic=Rn(Y1.setAnimationState.matches),Xn=(e,t,n)=>{const r=Pe(Ht),s=sr.findByName(n??T(r.loadedAnimations[os.locomotion],le).animations,e);return t.clipAction(s)},jo=7,Oc=.01,Nc=e=>{var t;for(const n of Ic()){const r=wn.getEntityByUUID(n.entityUUID),s=ze.worldNetwork;if(r&&s&&n.$peer!==((t=mn(r,D1))==null?void 0:t.authorityPeerID))continue;if(!Ms(r,We)){console.warn("[updateAnimationGraph]: AvatarAnimationComponent not found on entity",r,n.entityUUID);continue}const i=Pe(Ht).loadedAnimations[n.animationAsset];if(!i){console.warn("[updateAnimationGraph]: Animation asset not loaded",n.animationAsset,n.entityUUID);continue}const a=An(r,We).animationGraph;a.fadingOut.set(n.needsSkip??!1),a.layer.set(n.layer??0),Cc(r,i,n.loop,n.clipName)}for(const n of e){const r=An(n,We).animationGraph;Uc(n);const s=r.blendAnimation;if(s.value){const o=Pe(xn).deltaSeconds,i=r.blendStrength;s.value.setEffectiveWeight(i.value),s.value.time>=s.value.getClip().duration-Oc&&s.value.loop!=fa||r.fadingOut.value?(s.value.setEffectiveTimeScale(0),i.set(Math.max(i.value-o*jo,0)),i.value<=0&&(s.value.setEffectiveWeight(0),r.fadingOut.set(!1),s.set(void 0))):i.set(Math.min(i.value+o*jo,1))}}},Cc=(e,t,n,r)=>{const s=T(e,le),o=An(e,We),i=T(e,ie);if(!i||!i.bonesToEntities.hips)return;const a=T(t,le);let c=s.animations.find(h=>h.name==(r??a.animations[0].name));c||(c=a.animations[0]);const l=o.animationGraph.blendAnimation;if(l.value&&l.value.stop(),l.set(Xn(c.name,s.mixer,s.animations)),l.value){const h=l.value;h.timeScale=1,h.time=0,h.loop=n?fa:mc,h.play()}},Dc=new w;let Vr=0,Bn=0,zo=1;const Uc=e=>{const t=T(e,le);if(!t.animations)return;const n=An(e,We),r=Xn("Idle",t.mixer,t.animations),s=Xn("Run",t.mixer,t.animations),o=Xn("Walk",t.mixer,t.animations);if(!r||!s||!o)return;r.play(),s.play(),o.play();const i=n.animationGraph,a=i.blendStrength.value,c=i.layer.value>0,l=c?i.blendStrength.value:0,h=i.fadingOut,m=Dc.copy(n.value.locomotion).setY(0).lengthSq();i.blendAnimation&&m>1&&a>=1&&!c&&h.set(!0),Bn=X1(o.getEffectiveWeight(),Gr.clamp(1/(m-1.65)-l,0,1),Pe(xn).deltaSeconds*4),Vr=Gr.clamp(m*.1-Bn,0,1)-l,zo=Gr.clamp(1-Vr-Bn,0,1),s.setEffectiveWeight(Vr),o.setEffectiveWeight(Bn),r.setEffectiveWeight(zo-a)},Wo=e=>{const n=e.tracks[0];if(!n)return 0;const r=new w(n.values[0],n.values[1],n.values[2]),s=new w(n.values[n.values.length-3],n.values[n.values.length-2],n.values[n.values.length-1]);return new w().subVectors(s,r).length()/e.duration},Gn=new w,on=new w,It=new w,jr=new w,Ko=new w,zr=new w,Bc=new w,Gc=new w,Wr=new w,Hc=e=>{U1(e,z.computeTransformMatrix,r=>Ms(r,z));const t=z.getWorldPosition(e,new w).y,n=T(e,ie).bonesToEntities;z.getWorldPosition(n.hips,Gn),z.getWorldPosition(n.head,on),z.getWorldPosition(n.leftFoot,It),z.getWorldPosition(n.rightFoot,Ko),n.leftToes&&z.getWorldPosition(n.leftToes,jr),z.getWorldPosition(n.leftLowerLeg,zr),z.getWorldPosition(n.leftUpperLeg,Bc),n.leftEye?z.getWorldPosition(n.leftEye,Wr):Wr.copy(on).setY(on.y+.1),st(e,De,{avatarHeight:Math.abs(on.y-t+.25),torsoLength:Math.abs(on.y-Gn.y),upperLegLength:Math.abs(Gn.y-zr.y),lowerLegLength:Math.abs(zr.y-It.y),hipsHeight:Math.abs(Gn.y-t),eyeHeight:Wr.y-t,footHeight:It.y-t,footGap:Gc.subVectors(It,Ko).length(),footAngle:n.leftToes?Math.atan2(It.z-jr.z,It.y-jr.y):0})},Vc=()=>Object.values(Pe(Ht).loadedAnimations).map(e=>T(e,le).animations).flat(),$o=new J,Yo=new J,Kr=new J,jc=new w,zc=e=>{const t=q1(e);if(!t)return;const n=z.getWorldScale(t,jc).y;T(t,Tt).updateWorldMatrix(!1,!0);for(const r of T(e,le).animations)for(let s=0;s<r.tracks.length;s++){const o=r.tracks[s],i=o.name.lastIndexOf("."),a=o.name.slice(0,i),c=wn.getEntityByUUID(wn.get(e)+a);if(!c)continue;z.getWorldRotation(c,$o).invert();const l=T(c,ca).parentEntity;if(z.getWorldRotation(l,Yo),o instanceof gc)for(let h=0;h<o.values.length;h+=4){const m=o.values.slice(h,h+4);Kr.fromArray(m),Kr.premultiply(Yo).multiply($o),Kr.toArray(m),m.forEach((u,v)=>{o.values[v+h]=u})}else if(o instanceof yc){const h=o.name.includes("position");if(c!==t||!h){r.tracks.splice(s,1),s--;continue}o.values.forEach((m,u)=>{o.values[u]=h?m*n:m})}}},Wc=e=>{const t=[],n=T(e,le).animations,r=T(e,ie).entitiesToBones;for(const s of n){const o=new sr(s.name,s.duration,[],s.blendMode);for(const i of s.tracks){const a=wn.getEntityByUUID(wn.get(e)+i.name.substring(0,i.name.lastIndexOf(".")));if(!a)continue;const c=r[a];if(!c)continue;const l=i.clone();l.name=c+"."+i.name.substring(i.name.lastIndexOf(".")+1),o.tracks.push(l)}t.push(o)}An(e,le).animations.set(t)},P={Hips:"hips",Spine:"spine",Chest:"chest",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm"},$r=new J,Kc=e=>{var n;const t=T(e,ie);if(t!=null&&t.bonesToEntities.hips)for(const r in t.bonesToEntities){const s=t.bonesToEntities[r];if(!z.dirty[s])continue;const o=mn(s,z);if(!o)continue;const i=t.parentWorldRotations[r]??$r,a=t.parentWorldRotationInverses[r]??$r,c=t.rotations[r]??$r;if(an.copy(o.rotation).multiply(i).premultiply(a).multiply(c),z.rotation.x[s]=an.x,z.rotation.y[s]=an.y,z.rotation.z[s]=an.z,z.rotation.w[s]=an.w,r===P.Hips){const l=(n=mn(s,ca))==null?void 0:n.parentEntity;if(!l)continue;const h=mn(l,z);if(!h)continue;cn.copy(o.position).applyMatrix4(h==null?void 0:h.matrixWorld),Xo.copy(h.matrixWorld).invert(),cn.applyMatrix4(Xo),cn.applyQuaternion(a),Ms(e,De)&&cn.multiplyScalar(T(e,De).hipsHeight),o.position.copy(cn)}}},an=new J,cn=new w,Xo=new da,$c=Mt([ma]),Yc=Mt([le,Q1]),Xc=()=>{const{deltaSeconds:e}=Pe(xn);for(const t of $c())T(t,ma).update();for(const t of Yc()){const n=T(t,le),r=e;n.mixer.update(r)}},qc=Pn({uuid:"ee.engine.AnimationSystem",insert:{before:Z1},execute:Xc,reactor:()=>y.createElement(y.Fragment,null,y.createElement(B1,{Components:[le],ChildEntityReactor:Qc}))}),Qc=()=>{const e=G1();return J1.useEntityResource(e,H1(e,le).animations),null},Zc=Ln({name:"AvatarAnimationState",initial:()=>({priorityQueue:Lc({accumulationBudget:100}),sortedTransformEntities:[],visualizers:[]})}),Jc=Mt([le,We,ie]),ga=Mt([le,De,la,We]),e3=Mt([le,ie]),t3=new w,n3=Rc(ga,lc),r3=()=>{const{priorityQueue:e,sortedTransformEntities:t,visualizers:n}=Pe(Zc),{elapsedSeconds:r,deltaSeconds:s}=Pe(xn),o=De.getSelfAvatarEntity();for(const c of ga()){const l=T(c,We),h=T(c,la);l.locomotion.x=0,l.locomotion.y=h.linearVelocity.y,l.locomotion.z=tt.lerp(l.locomotion.z||0,t3.copy(h.linearVelocity).setComponent(1,0).length(),10*s)}n3(e,t,s);const i=Jc(),a=[];for(let c=0;c<i.length;c++){const l=i[c];(e.priorityEntities.has(l)||l===o)&&a.push(l)}Nc(a);for(const c of e3())Kc(c)},s3=()=>{var n,r;const e=De.useSelfAvatarEntity(),t=((r=(n=Ut(e,ua))==null?void 0:n.progress)==null?void 0:r.value)===100;return Gt.useEffect(()=>{if(!t){Br.setTrackingSpace();return}const s=T(e,De).eyeHeight;rt(Br).userEyeHeight.set(s),Br.setTrackingSpace()},[t]),null},o3=e=>{zc(e),st(e,ie),j1(e,t=>{const n=T(t,as).replace(":","");Bo[n]&&ie.setBone(e,t,Bo[n])}),Wc(e)},i3="Run_RootMotion",a3="Walk_RootMotion",c3=()=>{const e=[os.locomotion,os.emotes],t=tc(e.map(n=>`${Pe(nc).cloudDomain}/projects/ir-engine/default-project/assets/animations/${n}.glb`),!0);return Gt.useEffect(()=>{if(!t.value)return;let n=0;for(const[r,s]of t.value){if(Pe(Ht).loadedAnimations[e[n]])continue;o3(s);const o=sr.findByName(r??[],i3),i=sr.findByName(r??[],a3),a=rt(xc);o&&a.runSpeed.set(Wo(o)),i&&a.walkSpeed.set(Wo(i)),rt(Ht).loadedAnimations[e[n]].set(s),n++}},[t.value]),null},l3=e=>{var o;const t=e.entity,n=Ut(t,ua),r=Ut(t,We);Gt.useEffect(()=>{var i,a,c,l;if(!(((i=n==null?void 0:n.progress)==null?void 0:i.value)!==100||!(r!=null&&r.value)))try{(l=(c=(a=n.document)==null?void 0:a.value)==null?void 0:c.extensions)!=null&&l.VRM?rc(t):sc(t),st(t,oc,ic.Avatar),Hc(t)}catch(h){return console.error("Failed to load avatar",h),ac(t,ie,"UNSUPPORTED_AVATAR"),()=>{cc(t,ie,"UNSUPPORTED_AVATAR")}}},[(o=n==null?void 0:n.progress)==null?void 0:o.value,n==null?void 0:n.src.value,r]);const s=Ut(t,ie);return Gt.useEffect(()=>{var i,a;V1(t)&&is(t,!!((a=(i=s==null?void 0:s.bonesToEntities)==null?void 0:i.hips)!=null&&a.value)&&(n==null?void 0:n.progress.value)===100)},[s==null?void 0:s.bonesToEntities.hips,n==null?void 0:n.progress]),null},h3=e=>{var o;const t=e.entity,n=Ut(t,Tt),r=L1(Ht).loadedAnimations,s=Ut(t,ie);return Gt.useEffect(()=>{var i;(i=s==null?void 0:s.bonesToEntities)!=null&&i.hips.value&&st(t,le,{animations:Vc(),mixer:new _c(T(t,Tt))})},[(o=s==null?void 0:s.bonesToEntities)==null?void 0:o.hips,n==null?void 0:n.value,r]),null},u3=()=>{const e=Co([ie]),t=Co([We,De,ie]);return y.createElement(y.Fragment,null,y.createElement(s3,null),e.length>0&&y.createElement(c3,null),y.createElement(y.Fragment,null,e.map(n=>y.createElement(l3,{entity:n,key:n})),t.map(n=>y.createElement(h3,{entity:n,key:n}))))},f3=Pn({uuid:"ee.engine.AvatarAnimationSystem",insert:{after:qc},execute:r3,reactor:u3}),d3=Mt([ha]),p3=()=>{for(const e of d3()){const t=T(e,ha);t.bindMode==="attached"?t.bindMatrixInverse.copy(t.matrixWorld).invert():t.bindMode==="detached"?t.bindMatrixInverse.copy(t.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+t.bindMode)}};Pn({uuid:"ee.engine.SkinnedMeshTransformSystem",insert:{after:ec},execute:p3});const f=z1({name:"MotionCaptureRigComponent",schema:ye.Object({prevWorldLandmarks:ye.Array(ye.Object({x:ye.Number(),y:ye.Number(),z:ye.Number(),visibility:ye.Number()})),prevScreenLandmarks:ye.Array(ye.Object({x:ye.Number(),y:ye.Number(),z:ye.Number(),visibility:ye.Number()}))}),storage:{rig:Object.fromEntries(rr.map(e=>[e,{x:ae(Float64Array),y:ae(Float64Array),z:ae(Float64Array),w:ae(Float64Array)}])),slerpedRig:Object.fromEntries(rr.map(e=>[e,{x:ae(Float64Array),y:ae(Float64Array),z:ae(Float64Array),w:ae(Float64Array)}])),hipPosition:{x:ae(Float64Array),y:ae(Float64Array),z:ae(Float64Array)},hipRotation:{x:ae(Float64Array),y:ae(Float64Array),z:ae(Float64Array),w:ae(Float64Array)},footOffset:ae(Float64Array),solvingLowerBody:ae(Uint8Array)}});var Is=typeof self<"u"?self:{};function ya(e){e:{for(var t=["CLOSURE_FLAGS"],n=Is,r=0;r<t.length;r++)if((n=n[t[r]])==null){t=null;break e}t=n}return(e=t&&t[e])!=null&&e}function wt(){throw Error("Invalid UTF8")}function qo(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let Hn,Yr;const m3=typeof TextDecoder<"u";let g3;const y3=typeof TextEncoder<"u";function _a(e){if(y3)e=(g3||(g3=new TextEncoder)).encode(e);else{let n=0;const r=new Uint8Array(3*e.length);for(let s=0;s<e.length;s++){var t=e.charCodeAt(s);if(128>t)r[n++]=t;else{if(2048>t)r[n++]=t>>6|192;else{if(55296<=t&&57343>=t){if(56319>=t&&s<e.length){const o=e.charCodeAt(++s);if(56320<=o&&57343>=o){t=1024*(t-55296)+o-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}s--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var bn,va=ya(610401301),_3=ya(188588736);const Qo=Is.navigator;function cs(e){return!!va&&!!bn&&bn.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function Re(e){var t;return(t=Is.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function ht(){return!!va&&!!bn&&0<bn.brands.length}function Xr(){return ht()?cs("Chromium"):(Re("Chrome")||Re("CriOS"))&&!(!ht()&&Re("Edge"))||Re("Silk")}bn=Qo&&Qo.userAgentData||null;var v3=!ht()&&(Re("Trident")||Re("MSIE"));!Re("Android")||Xr(),Xr(),Re("Safari")&&(Xr()||!ht()&&Re("Coast")||!ht()&&Re("Opera")||!ht()&&Re("Edge")||(ht()?cs("Microsoft Edge"):Re("Edg/"))||ht()&&cs("Opera"));var Ea={},dn=null;function E3(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);var r=new Uint8Array(n),s=0;return function(o,i){function a(v){for(;c<o.length;){var Y=o.charAt(c++),F=dn[Y];if(F!=null)return F;if(!/^[\s\xa0]*$/.test(Y))throw Error("Unknown base64 encoding at char: "+Y)}return v}wa();for(var c=0;;){var l=a(-1),h=a(0),m=a(64),u=a(64);if(u===64&&l===-1)break;i(l<<2|h>>4),m!=64&&(i(h<<4&240|m>>2),u!=64&&i(m<<6&192|u))}}(e,function(o){r[s++]=o}),s!==n?r.subarray(0,s):r}function wa(){if(!dn){dn={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));Ea[n]=r;for(var s=0;s<r.length;s++){var o=r[s];dn[o]===void 0&&(dn[o]=s)}}}}var Aa=typeof Uint8Array<"u",ba=!v3&&typeof btoa=="function";function Zo(e){if(!ba){var t;t===void 0&&(t=0),wa(),t=Ea[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let c=0,l=0;for(;c<e.length-2;c+=3){var s=e[c],o=e[c+1],i=e[c+2],a=t[s>>2];s=t[(3&s)<<4|o>>4],o=t[(15&o)<<2|i>>6],i=t[63&i],n[l++]=a+s+o+i}switch(a=0,i=r,e.length-c){case 2:i=t[(15&(a=e[c+1]))<<2]||r;case 1:e=e[c],n[l]=t[e>>2]+t[(3&e)<<4|a>>4]+i+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const Jo=/[-_.]/g,w3={"-":"+",_:"/",".":"="};function A3(e){return w3[e]||""}function Ta(e){if(!ba)return E3(e);Jo.test(e)&&(e=e.replace(Jo,A3)),e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function Fn(e){return Aa&&e!=null&&e instanceof Uint8Array}let b3;function gr(){return b3||(b3=new Uint8Array(0))}var Vt={};let T3;function Sa(e){if(e!==Vt)throw Error("illegal external caller")}function Pt(){return T3||(T3=new ot(null,Vt))}function Os(e){Sa(Vt);var t=e.g;return(t=t==null||Fn(t)?t:typeof t=="string"?Ta(t):null)==null?t:e.g=t}var ot=class{constructor(e,t){if(Sa(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){const e=Os(this);return e?new Uint8Array(e):gr()}};function ka(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function Ns(){return Error("Failed to read varint, encoding is invalid.")}function La(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function Cs(e){if(typeof e=="string")return{buffer:Ta(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===ot)return{buffer:Os(e)||gr(),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Ds(){return typeof BigInt=="function"}const S3=typeof Uint8Array.prototype.slice=="function";let Ra,N=0,Q=0;function Lt(e){const t=0>e;let n=(e=Math.abs(e))>>>0;if(e=Math.floor((e-n)/4294967296),t){const[r,s]=Gs(n,e);e=s,n=r}N=n>>>0,Q=e>>>0}function Us(e){const t=Ra||(Ra=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),Q=0,N=t.getUint32(0,!0)}function ls(e,t){return 4294967296*t+(e>>>0)}function Bs(e,t){const n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),e=ls(e,t),n?-e:e}function or(e,t){if(e>>>=0,2097151>=(t>>>=0))var n=""+(4294967296*t+e);else Ds()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,1e7<=e&&(n+=Math.floor(e/1e7),e%=1e7),1e7<=n&&(t+=Math.floor(n/1e7),n%=1e7),n=t+ei(n)+ei(e));return n}function ei(e){return e=String(e),"0000000".slice(e.length)+e}function xa(){var e=N,t=Q;if(2147483648&t)if(Ds())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=Gs(e,t);e="-"+or(n,r)}else e=or(e,t);return e}function yr(e){if(16>e.length)Lt(Number(e));else if(Ds())e=BigInt(e),N=Number(e&BigInt(4294967295))>>>0,Q=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");Q=N=0;const n=e.length;for(let r=t,s=(n-t)%6+t;s<=n;r=s,s+=6){const o=Number(e.slice(r,s));Q*=1e6,N=1e6*N+o,4294967296<=N&&(Q+=Math.trunc(N/4294967296),Q>>>=0,N>>>=0)}if(t){const[r,s]=Gs(N,Q);N=r,Q=s}}}function Gs(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Hs(e,t){let n,r=0,s=0,o=0;const i=e.h;let a=e.g;do n=i[a++],r|=(127&n)<<o,o+=7;while(32>o&&128&n);for(32<o&&(s|=(127&n)>>4),o=3;32>o&&128&n;o+=7)n=i[a++],s|=(127&n)<<o;if(Rt(e,a),128>n)return t(r>>>0,s>>>0);throw Ns()}function Vs(e){let t=0,n=e.g;const r=n+10,s=e.h;for(;n<r;){const o=s[n++];if(t|=o,(128&o)==0)return Rt(e,n),!!(127&t)}throw Ns()}function pt(e){const t=e.h;let n=e.g,r=t[n++],s=127&r;if(128&r&&(r=t[n++],s|=(127&r)<<7,128&r&&(r=t[n++],s|=(127&r)<<14,128&r&&(r=t[n++],s|=(127&r)<<21,128&r&&(r=t[n++],s|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw Ns();return Rt(e,n),s}function mt(e){return pt(e)>>>0}function hs(e){var t=e.h;const n=e.g,r=t[n],s=t[n+1],o=t[n+2];return t=t[n+3],Rt(e,e.g+4),(r<<0|s<<8|o<<16|t<<24)>>>0}function us(e){var t=hs(e);e=2*(t>>31)+1;const n=t>>>23&255;return t&=8388607,n==255?t?NaN:1/0*e:n==0?e*Math.pow(2,-149)*t:e*Math.pow(2,n-150)*(t+Math.pow(2,23))}function k3(e){return pt(e)}function qr(e,t,{ca:n=!1}={}){e.ca=n,t&&(t=Cs(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function Rt(e,t){if(e.g=t,t>e.l)throw La(e.l,t)}function Pa(e,t){if(0>t)throw Error(`Tried to read a negative byte length: ${t}`);const n=e.g,r=n+t;if(r>e.l)throw La(t,e.l-n);return e.g=r,n}function Fa(e,t){if(t==0)return Pt();var n=Pa(e,t);return e.ca&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?gr():S3?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?Pt():new ot(n,Vt)}var ti=[];function Ma(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=mt(e.g);if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw ka(n,e.l);if(1>t)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=n,!0}function qn(e){switch(e.h){case 0:e.h!=0?qn(e):Vs(e.g);break;case 1:Rt(e=e.g,e.g+8);break;case 2:if(e.h!=2)qn(e);else{var t=mt(e.g);Rt(e=e.g,e.g+t)}break;case 5:Rt(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!Ma(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}qn(e)}break;default:throw ka(e.h,e.l)}}function Mn(e,t,n){const r=e.g.l,s=mt(e.g),o=e.g.g+s;let i=o-r;if(0>=i&&(e.g.l=o,n(t,e,void 0,void 0,void 0),i=o-e.g.g),i)throw Error(`Message parsing ended unexpectedly. Expected to read ${s} bytes, instead read ${s-i} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=o,e.g.l=r,t}function js(e){var t=mt(e.g),n=Pa(e=e.g,t);if(e=e.h,m3){var r,s=e;(r=Yr)||(r=Yr=new TextDecoder("utf-8",{fatal:!0})),t=n+t,s=n===0&&t===s.length?s:s.subarray(n,t);try{var o=r.decode(s)}catch(a){if(Hn===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),Hn=!0}catch{Hn=!1}}throw!Hn&&(Yr=void 0),a}}else{t=(o=n)+t,n=[];let a,c=null;for(;o<t;){var i=e[o++];128>i?n.push(i):224>i?o>=t?wt():(a=e[o++],194>i||(192&a)!=128?(o--,wt()):n.push((31&i)<<6|63&a)):240>i?o>=t-1?wt():(a=e[o++],(192&a)!=128||i===224&&160>a||i===237&&160<=a||(192&(r=e[o++]))!=128?(o--,wt()):n.push((15&i)<<12|(63&a)<<6|63&r)):244>=i?o>=t-2?wt():(a=e[o++],(192&a)!=128||a-144+(i<<28)>>30||(192&(r=e[o++]))!=128||(192&(s=e[o++]))!=128?(o--,wt()):(i=(7&i)<<18|(63&a)<<12|(63&r)<<6|63&s,i-=65536,n.push(55296+(i>>10&1023),56320+(1023&i)))):wt(),8192<=n.length&&(c=qo(c,n),n.length=0)}o=qo(c,n)}return o}function Ia(e){const t=mt(e.g);return Fa(e.g,t)}function _r(e,t,n){var r=mt(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var Vn=[];function ni(e){return e?/^\d+$/.test(e)?(yr(e),new ri(N,Q)):null:L3||(L3=new ri(0,0))}var ri=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let L3;function si(e){return e?/^-?\d+$/.test(e)?(yr(e),new oi(N,Q)):null:R3||(R3=new oi(0,0))}var oi=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let R3;function ir(e,t,n){for(;0<n||127<t;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function In(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function vr(e,t){if(0<=t)In(e,t);else{for(let n=0;9>n;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Tn(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function jt(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Ie(e,t,n){In(e.g,8*t+n)}function zs(e,t){return Ie(e,t,2),t=e.g.end(),jt(e,t),t.push(e.h),t}function Ws(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;127<n;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function Er(e,t,n){Ie(e,t,2),In(e.g,n.length),jt(e,e.g.end()),jt(e,n)}function fs(e,t,n,r){n!=null&&(t=zs(e,t),r(n,e),Ws(e,t))}class Zt{constructor(t,n,r,s){this.g=t,this.h=n,this.l=r,this.pa=s}}function we(e){return Array.prototype.slice.call(e)}function Oa(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Ke=Oa(),ii=Oa("0di"),Ks=Ke?(e,t)=>{e[Ke]|=t}:(e,t)=>{e.g!==void 0?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}})},ar=Ke?(e,t)=>{e[Ke]&=~t}:(e,t)=>{e.g!==void 0&&(e.g&=~t)};function ce(e,t,n){return n?e|t:e&~t}var K=Ke?e=>0|e[Ke]:e=>0|e.g,x=Ke?e=>e[Ke]:e=>e.g,W=Ke?(e,t)=>(e[Ke]=t,e):(e,t)=>(e.g!==void 0?e.g=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}}),e);function Jt(e){return Ks(e,34),e}function x3(e,t){W(t,-14591&(0|e))}function ds(e,t){W(t,-14557&(34|e))}function Na(e){return(e=e>>14&1023)===0?536870912:e}var $s,On={},Ca={};function ai(e){return!(!e||typeof e!="object"||e.Ja!==Ca)}function Ys(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function Xs(e,t,n){if(e!=null){if(typeof e=="string")e=e?new ot(e,Vt):Pt();else if(e.constructor!==ot)if(Fn(e))e=e.length?new ot(n?e:new Uint8Array(e),Vt):Pt();else{if(!t)throw Error();e=void 0}}return e}function cr(e,t,n){if(!Array.isArray(e)||e.length)return!1;const r=K(e);return!!(1&r)||!(!t||!(Array.isArray(t)?t.includes(n):t.has(n)))&&(W(e,1|r),!0)}const ci=[];function qe(e){if(2&e)throw Error()}W(ci,55),$s=Object.freeze(ci);class lr{constructor(t,n,r){this.l=0,this.g=t,this.h=n,this.m=r}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new lr(this.g,this.h,this.m)}}let dt,P3;function Da(e,t){(t=dt?t[dt]:void 0)&&(e[dt]=we(t))}function ps(e){return(e=Error(e)).__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity="warning",e}function _t(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function Ua(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}Object.freeze(new class{}),Object.freeze(new class{});const F3=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function wr(e){const t=typeof e;return t==="number"?Number.isFinite(e):t==="string"&&F3.test(e)}function en(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function M3(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function li(e){return e[0]!=="-"&&(20>e.length||e.length===20&&184467>Number(e.substring(0,6)))}function Ba(e){return e[0]==="-"?20>e.length||e.length===20&&-922337<Number(e.substring(0,7)):19>e.length||e.length===19&&922337>Number(e.substring(0,6))}function qs(e){return e=Math.trunc(e),Number.isSafeInteger(e)||(Lt(e),e=Bs(N,Q)),e}function Qs(e){var t=Math.trunc(Number(e));return Number.isSafeInteger(t)?String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),Ba(e)||(yr(e),e=xa()),e)}function hr(e){return e==null?e:wr(e)?typeof e=="number"?qs(e):Qs(e):void 0}function Nn(e){if(typeof e!="string")throw Error();return e}function tn(e){if(e!=null&&typeof e!="string")throw Error();return e}function Sn(e){return e==null||typeof e=="string"?e:void 0}function Zs(e,t,n,r){if(e!=null&&typeof e=="object"&&e.X===On)return e;if(!Array.isArray(e))return n?2&r?(e=t[ii])?t=e:(Jt((e=new t).u),t=t[ii]=e):t=new t:t=void 0,t;let s=n=K(e);return s===0&&(s|=32&r),s|=2&r,s!==n&&W(e,s),new t(e)}function I3(e,t,n){if(t){var r=!!r;if(!wr(t=e))throw ps("int64");typeof t=="string"?r=Qs(t):r?(r=Math.trunc(t),Number.isSafeInteger(r)?r=String(r):Ba(t=String(r))?r=t:(Lt(r),r=xa())):r=qs(t)}else r=hr(e);return typeof(n=(e=r)==null?n?0:void 0:e)=="string"&&(r=+n,Number.isSafeInteger(r))?r:n}let ur,Js,O3;function fr(e){switch(typeof e){case"boolean":return Js||(Js=[0,void 0,!0]);case"number":return 0<e?void 0:e===0?O3||(O3=[0,void 0]):[-e,void 0];case"string":return[0,e];case"object":return e}}function xt(e,t){return Ga(e,t[0],t[1])}function Ga(e,t,n){if(e==null&&(e=ur),ur=void 0,e==null){var r=96;n?(e=[n],r|=512):e=[],t&&(r=-16760833&r|(1023&t)<<14)}else{if(!Array.isArray(e)||2048&(r=K(e)))throw Error();if(64&r)return e;if(r|=64,n&&(r|=512,n!==e[0]))throw Error();e:{const s=(n=e).length;if(s){const o=s-1;if(Ys(n[o])){if(1024<=(t=o-(+!!(512&(r|=256))-1)))throw Error();r=-16760833&r|(1023&t)<<14;break e}}if(t){if(1024<(t=Math.max(t,s-(+!!(512&r)-1))))throw Error();r=-16760833&r|(1023&t)<<14}}}return W(e,r),e}const N3={};let C3=function(){try{return new class extends Map{constructor(){super()}},!1}catch{return!0}}();class Qr{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}}const D3=C3?(Object.setPrototypeOf(Qr.prototype,Map.prototype),Object.defineProperties(Qr.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Qr):class extends Map{constructor(){super()}};function hi(e){return e}function Zr(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var Fe=class extends D3{constructor(e,t,n=hi,r=hi){super();let s=K(e);s|=64,W(e,s),this.L=s,this.U=t,this.S=n,this.Z=this.U?U3:r;for(let o=0;o<e.length;o++){const i=e[o],a=n(i[0],!1,!0);let c=i[1];t?c===void 0&&(c=null):c=r(i[1],!1,!0,void 0,void 0,s),super.set(a,c)}}oa(e=ui){if(this.size!==0)return this.Y(e)}Y(e=ui){const t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){Zr(this),super.clear()}delete(e){return Zr(this),super.delete(this.S(e,!0,!1))}entries(){var e=this.na();return new lr(e,B3,this)}keys(){return this.Ia()}values(){var e=this.na();return new lr(e,Fe.prototype.get,this)}forEach(e,t){super.forEach((n,r)=>{e.call(t,this.get(r),r,this)})}set(e,t){return Zr(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Z(t,!0,!0,this.U,!1,this.L))}Oa(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.U?e===void 0?null:e:this.Z(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var n=this.U;return n?((n=this.Z(t,!1,!0,n,this.ta,this.L))!==t&&super.set(e,n),n):t}}na(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function U3(e,t,n,r,s,o){return e=Zs(e,r,n,o),s&&(e=br(e)),e}function ui(e){return e}function B3(e){return[e,this.get(e)]}let G3;function fi(){return G3||(G3=new Fe(Jt([]),void 0,void 0,void 0,N3))}function eo(e,t,n,r,s){if(e!=null){if(Array.isArray(e))e=cr(e,void 0,0)?void 0:s&&2&K(e)?e:Ar(e,t,n,r!==void 0,s);else if(Ys(e)){const o={};for(let i in e)o[i]=eo(e[i],t,n,r,s);e=o}else e=t(e,r);return e}}function Ar(e,t,n,r,s){const o=r||n?K(e):0;r=r?!!(32&o):void 0;const i=we(e);for(let a=0;a<i.length;a++)i[a]=eo(i[a],t,n,r,s);return n&&(Da(i,e),n(o,i)),i}function H3(e){return eo(e,to,void 0,void 0,!1)}function to(e){return e.X===On?e.toJSON():e instanceof Fe?e.oa(H3):function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(cr(t,void 0,0))return}else{if(Fn(t))return Zo(t);if(t instanceof ot){const n=t.g;return n==null?"":typeof n=="string"?n:t.g=Zo(n)}if(t instanceof Fe)return t.oa()}}return t}(e)}function ms(e,t,n=ds){if(e!=null){if(Aa&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=K(e);return 2&r?e:(t&&(t=r===0||!!(32&r)&&!(64&r||!(16&r))),t?W(e,-12293&(34|r)):Ar(e,ms,4&r?ds:n,!0,!0))}return e.X===On?(n=e.u,e=2&(r=x(n))?e:no(e,n,r,!0)):e instanceof Fe&&!(2&e.L)&&(n=Jt(e.Y(ms)),e=new Fe(n,e.U,e.S,e.Z)),e}}function no(e,t,n,r){return e=e.constructor,ur=t=Ha(t,n,r),t=new e(t),ur=void 0,t}function Ha(e,t,n){const r=n||2&t?ds:x3,s=!!(32&t);return e=function(o,i,a){const c=we(o);var l=c.length;const h=256&i?c[l-1]:void 0;for(l+=h?-1:0,i=512&i?1:0;i<l;i++)c[i]=a(c[i]);if(h){i=c[i]={};for(const m in h)i[m]=a(h[m])}return Da(c,o),c}(e,t,o=>ms(o,s,r)),Ks(e,32|(n?2:0)),e}function br(e){const t=e.u,n=x(t);return 2&n?no(e,t,n,!1):e}function zt(e,t){return Qe(e=e.u,x(e),t)}function Qe(e,t,n,r){if(n===-1)return null;if(n>=Na(t)){if(256&t)return e[e.length-1][n]}else{var s=e.length;if(r&&256&t&&(r=e[s-1][n])!=null)return r;if((t=n+(+!!(512&t)-1))<s)return e[t]}}function M(e,t,n,r){const s=e.u;let o=x(s);return qe(o),C(s,o,t,n,r),e}function C(e,t,n,r,s){const o=Na(t);if(n>=o||s){let i=t;if(256&t)s=e[e.length-1];else{if(r==null)return i;s=e[o+(+!!(512&t)-1)]={},i|=256}return s[n]=r,n<o&&(e[n+(+!!(512&t)-1)]=void 0),i!==t&&W(e,i),i}return e[n+(+!!(512&t)-1)]=r,256&t&&n in(e=e[e.length-1])&&delete e[n],t}function nn(e,t,n,r,s){var o=2&t;let i=Qe(e,t,n,s);Array.isArray(i)||(i=$s);const a=!(2&r);r=!(1&r);const c=!!(32&t);let l=K(i);return l!==0||!c||o||a?1&l||(l|=1,W(i,l)):(l|=33,W(i,l)),o?(e=!1,2&l||(Jt(i),e=!!(4&l)),(r||e)&&Object.freeze(i)):(o=!!(2&l)||!!(2048&l),r&&o?(i=we(i),r=1,c&&!a&&(r|=32),W(i,r),C(e,t,n,i,s)):a&&32&l&&!o&&ar(i,32)),i}function Qn(e,t){e=e.u;let n=x(e);const r=Qe(e,n,t),s=_t(r);return s!=null&&s!==r&&C(e,n,t,s),s}function Va(e){e=e.u;let t=x(e);const n=Qe(e,t,1),r=Xs(n,!0,!!(34&t));return r!=null&&r!==n&&C(e,t,1,r),r}function Dt(e,t,n){e=e.u;let r=x(e);const s=2&r?1:2;let o=ja(e,r,t);var i=K(o);if(!(4&i)){(4&i||Object.isFrozen(o))&&(o=we(o),i=Ft(i,r,!1),r=C(e,r,t,o));var a=0;let c=0;for(;a<o.length;a++){const l=n(o[a]);l!=null&&(o[c++]=l)}c<a&&(o.length=c),i=ce(i=za(i,r,!1),20,!0),i=ce(i,4096,!1),i=ce(i,8192,!1),W(o,i),2&i&&Object.freeze(o)}return gn(i)||(n=i,(i=(a=s===1)?ce(i,2,!0):ce(i,32,!1))!==n&&W(o,i),a&&Object.freeze(o)),s===2&&gn(i)&&(o=we(o),i=Ft(i,r,!1),W(o,i),C(e,r,t,o)),o}function ja(e,t,n){return e=Qe(e,t,n),Array.isArray(e)?e:$s}function za(e,t,n){return e===0&&(e=Ft(e,t,n)),ce(e,1,!0)}function gn(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function Wa(e){e=we(e);for(let t=0;t<e.length;t++){const n=e[t]=we(e[t]);Array.isArray(n[1])&&(n[1]=Jt(n[1]))}return e}function dr(e,t,n){{const i=e.u;let a=x(i);if(qe(a),n==null)C(i,a,t);else{var r,s=e=K(n),o=!!(2&e)||Object.isFrozen(n);if((r=!o)&&(r=!1),!(4&e))for(e=21,o&&(n=we(n),s=0,e=Ft(e,a,!0)),o=0;o<n.length;o++)n[o]=Nn(n[o]);r&&(n=we(n),s=0,e=Ft(e,a,!0)),e!==s&&W(n,e),C(i,a,t,n)}}}function gs(e,t,n,r){e=e.u;let s=x(e);qe(s),C(e,s,t,(r==="0"?Number(n)===0:n===r)?void 0:n)}function Cn(e,t,n,r){const s=x(e);qe(s),e=nn(e,s,t,2),r=n(r,!!(4&(t=K(e)))&&!!(4096&t)),e.push(r)}function V3(e){return e}function Jr(e,t){return ro(e=e.u,x(e),x2)===t?t:-1}function ro(e,t,n){let r=0;for(let s=0;s<n.length;s++){const o=n[s];Qe(e,t,o)!=null&&(r!==0&&(t=C(e,t,r)),r=o)}return r}function so(e,t,n,r){let s=x(e);qe(s);const o=Qe(e,s,n,r);let i;if(o!=null&&o.X===On)return(t=br(o))!==o&&C(e,s,n,t,r),t.u;if(Array.isArray(o)){const a=K(o);i=2&a?Ha(o,a,!1):o,i=xt(i,t)}else i=xt(void 0,t);return i!==o&&C(e,s,n,i,r),i}function Ka(e,t,n,r){e=e.u;let s=x(e);const o=Qe(e,s,n,r);return(t=Zs(o,t,!1,s))!==o&&t!=null&&C(e,s,n,t,r),t}function L(e,t,n,r=!1){if((t=Ka(e,t,n,r))==null)return t;e=e.u;let s=x(e);if(!(2&s)){const o=br(t);o!==t&&C(e,s,n,t=o,r)}return t}function $a(e,t,n,r,s,o){var i=!!(2&t),a=i?1:2;const c=a===1;a=a===2,s=!!s,o&&(o=!i),i=ja(e,t,r);var l=K(i);const h=!!(4&l);if(!h){var m=i,u=t;const v=!!(2&(l=za(l,t,s)));v&&(u=ce(u,2,!0));let Y=!v,F=!0,O=0,S=0;for(;O<m.length;O++){const Ce=Zs(m[O],n,!1,u);if(Ce instanceof n){if(!v){const No=!!(2&K(Ce.u));Y&&(Y=!No),F&&(F=No)}m[S++]=Ce}}S<O&&(m.length=S),l=ce(l,4,!0),l=ce(l,16,F),l=ce(l,8,Y),W(m,l),v&&Object.freeze(m)}if(n=!!(8&l)||c&&!i.length,o&&!n){for(gn(l)&&(i=we(i),l=Ft(l,t,s),t=C(e,t,r,i)),o=i,n=l,m=0;m<o.length;m++)(l=o[m])!==(u=br(l))&&(o[m]=u);n=ce(n,8,!0),n=ce(n,16,!o.length),W(o,n),l=n}return gn(l)||(o=l,c?l=ce(l,!i.length||16&l&&(!h||32&l)?2:2048,!0):s||(l=ce(l,32,!1)),l!==o&&W(i,l),c&&Object.freeze(i)),a&&gn(l)&&(i=we(i),l=Ft(l,t,s),W(i,l),C(e,t,r,i)),i}function ct(e,t,n){e=e.u;const r=x(e);return $a(e,r,t,n,!1,!(2&r))}function _(e,t,n,r,s){return r==null&&(r=void 0),M(e,n,r,s)}function yn(e,t,n,r){r==null&&(r=void 0),e=e.u;let s=x(e);qe(s),(n=ro(e,s,n))&&n!==t&&r!=null&&(s=C(e,s,n)),C(e,s,t,r)}function Ft(e,t,n){return e=ce(e,2,!!(2&t)),e=ce(e,32,!!(32&t)&&n),ce(e,2048,!1)}function pr(e,t,n,r){e=e.u;const s=x(e);qe(s),t=$a(e,s,n,t,!0),n=r??new n,t.push(n),2&K(n.u)?ar(t,8):ar(t,16)}function xe(e,t){return en(zt(e,t))}function Me(e,t){return Sn(zt(e,t))}function $e(e){return e??0}function X(e,t){return $e(Qn(e,t))}function kn(e,t,n){if(n!=null&&typeof n!="boolean")throw e=typeof n,Error(`Expected boolean but got ${e!="object"?e:n?Array.isArray(n)?"array":e:"null"}: ${n}`);M(e,t,n)}function Ye(e,t,n){if(n!=null){if(typeof n!="number"||!Number.isFinite(n))throw ps("int32");n|=0}M(e,t,n)}function g(e,t,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);M(e,t,n)}function Ue(e,t,n){t.g?t.m(e,t.g,t.h,n,!0):t.m(e,t.h,n,!0)}Fe.prototype.toJSON=void 0,Fe.prototype.Ja=Ca;var p=class{constructor(e,t){this.u=Ga(e,t)}toJSON(){return Ya(this,Ar(this.u,to,void 0,void 0,!1),!0)}l(){var e=Yl;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return no(this,e,x(e),!1)}N(){return!!(2&K(this.u))}};function Ya(e,t,n){var r=_3?void 0:e.constructor.A;const s=x(n?e.u:t);if(!(e=t.length))return t;let o,i;if(Ys(n=t[e-1])){e:{var a=n;let h={},m=!1;for(var c in a){let u=a[c];if(Array.isArray(u)){let v=u;(cr(u,r,+c)||ai(u)&&u.size===0)&&(u=null),u!=v&&(m=!0)}u!=null?h[c]=u:m=!0}if(m){for(var l in h){a=h;break e}a=null}}a!=n&&(o=!0),e--}for(c=+!!(512&s)-1;0<e&&(n=t[l=e-1],l-=c,n==null||cr(n,r,l)||ai(n)&&n.size===0);e--)i=!0;return(o||i)&&(t=Array.prototype.slice.call(t,0,e),a&&t.push(a)),t}function Xa(e){return Array.isArray(e)?e[0]instanceof Zt?e:[J3,e]:[e,void 0]}function rn(e,t){if(Array.isArray(t)){var n=K(t);if(4&n)return t;for(var r=0,s=0;r<t.length;r++){const o=e(t[r]);o!=null&&(t[s++]=o)}return s<r&&(t.length=s),W(t,-12289&(5|n)),2&n&&Object.freeze(t),t}}p.prototype.X=On,p.prototype.toString=function(){return Ya(this,this.u,!1).toString()};const di=Symbol();function oo(e){let t=e[di];if(!t){const n=Qa(e),r=ao(e),s=r.l;t=s?(o,i)=>s(o,i,r):(o,i)=>{for(;Ma(i)&&i.h!=4;){var a=i.m,c=r[a];if(!c){var l=r.ea;l&&(l=l[a])&&(c=r[a]=j3(l))}c&&c(i,o,a)||(a=(c=i).l,qn(c),c.ia?c=void 0:(l=c.g.g-a,c.g.g=a,c=Fa(c.g,l)),a=o,c&&(dt||(dt=Symbol()),(l=a[dt])?l.push(c):a[dt]=[c]))}n===qa||n===Zn||n.j||(o[P3||(P3=Symbol())]=n)},e[di]=t}return t}function j3(e){const t=(e=Xa(e))[0].g;if(e=e[1]){const n=oo(e),r=ao(e).T;return(s,o,i)=>t(s,o,i,r,n)}return t}class es{}let qa,Zn;const _n=Symbol();function z3(e,t,n){const r=n[1];let s;if(r){const o=r[_n];s=o?o.T:fr(r[0]),e[t]=o??r}s&&s===Js?(e.g||(e.g=new Set)).add(t):n[0]&&(e.h||(e.h=new Set)).add(t)}function pi(e,t){return[e.l,!t||0<t[0]?void 0:t]}function Qa(e){var t=e[_n];if(t)return t;if(!(t=io(e,e[_n]=new es,pi,pi,z3)).ea&&!t.h&&!t.g){let n=!0;for(let r in t)isNaN(r)||(n=!1);n?(fr(e[0])===Js?Zn?t=Zn:((t=new es).T=fr(!0),t=Zn=t):t=qa||(qa=new es),t=e[_n]=t):t.j=!0}return t}function W3(e,t,n){e[t]=n}function io(e,t,n,r,s=W3){t.T=fr(e[0]);let o=0;var i=e[++o];i&&i.constructor===Object&&(t.ea=i,typeof(i=e[++o])=="function"&&(t.l=i,t.m=e[++o],i=e[++o]));const a={};for(;Array.isArray(i)&&typeof i[0]=="number"&&0<i[0];){for(var c=0;c<i.length;c++)a[i[c]]=i;i=e[++o]}for(c=1;i!==void 0;){let m;typeof i=="number"&&(c+=i,i=e[++o]);var l=void 0;if(i instanceof Zt?m=i:(m=el,o--),m.pa){i=e[++o],l=e;var h=o;typeof i=="function"&&(i=i(),l[h]=i),l=i}for(h=c+1,typeof(i=e[++o])=="number"&&0>i&&(h-=i,i=e[++o]);c<h;c++){const u=a[c];s(t,c,l?r(m,l,u):n(m,u))}}return t}const mi=Symbol();function Za(e){let t=e[mi];if(!t){const n=Tr(e);t=(r,s)=>e2(r,s,n),e[mi]=t}return t}const ys=Symbol();function K3(e){return e.h}function $3(e,t){let n,r;const s=e.h;return(o,i,a)=>s(o,i,a,r||(r=Tr(t).T),n||(n=Za(t)))}function Tr(e){let t=e[ys];return t||(t=io(e,e[ys]={},K3,$3),Ja(e),t)}const _s=Symbol();function Y3(e,t){const n=e.g;return t?(r,s,o)=>n(r,s,o,t):n}function X3(e,t,n){const r=e.g;let s,o;return(i,a,c)=>r(i,a,c,o||(o=ao(t).T),s||(s=oo(t)),n)}function ao(e){let t=e[_s];return t||(Qa(e),t=io(e,e[_s]={},Y3,X3),Ja(e),t)}function Ja(e){_s in e&&_n in e&&ys in e&&(e.length=0)}function gi(e,t){var n=e[t];if(n)return n;if((n=e.ea)&&(n=n[t])){var r=(n=Xa(n))[0].h;if(n=n[1]){const s=Za(n),o=Tr(n).T;n=(n=e.m)?n(o,s):(i,a,c)=>r(i,a,c,o,s)}else n=r;return e[t]=n}}function e2(e,t,n){for(var r=x(e),s=+!!(512&r)-1,o=e.length,i=512&r?1:0,a=o+(256&r?-1:0);i<a;i++){const c=e[i];if(c==null)continue;const l=i-s,h=gi(n,l);h&&h(t,c,l)}if(256&r){r=e[o-1];for(let c in r)s=+c,Number.isNaN(s)||(o=r[c])!=null&&(a=gi(n,s))&&a(t,o,s)}if(e=dt?e[dt]:void 0)for(jt(t,t.g.end()),n=0;n<e.length;n++)jt(t,Os(e[n])||gr())}function me(e,t){return new Zt(e,t,!1,!1)}function sn(e,t){return new Zt(e,t,!0,!1)}function Sr(e,t){return new Zt(e,t,!1,!0)}function ge(e,t,n){C(e,x(e),t,n)}var q3=Sr(function(e,t,n,r,s){return e.h===2&&(e=Mn(e,xt([void 0,void 0],r),s),qe(r=x(t)),(s=Qe(t,r,n))instanceof Fe?2&s.L?((s=s.Y()).push(e),C(t,r,n,s)):s.Oa(e):Array.isArray(s)?(2&K(s)&&C(t,r,n,s=Wa(s)),s.push(e)):C(t,r,n,[e]),!0)},function(e,t,n,r,s){if(t instanceof Fe)t.forEach((o,i)=>{fs(e,n,xt([i,o],r),s)});else if(Array.isArray(t))for(let o=0;o<t.length;o++){const i=t[o];Array.isArray(i)&&fs(e,n,xt(i,r),s)}});function t2(e,t,n){e:if(t!=null){if(wr(t)){if(typeof t=="string"){t=Qs(t);break e}if(typeof t=="number"){t=qs(t);break e}}t=void 0}t!=null&&(typeof t=="string"&&si(t),t!=null&&(Ie(e,n,0),typeof t=="number"?(e=e.g,Lt(t),ir(e,N,Q)):(n=si(t),ir(e.g,n.h,n.g))))}function n2(e,t,n){(t=en(t))!=null&&t!=null&&(Ie(e,n,0),vr(e.g,t))}function r2(e,t,n){(t=Ua(t))!=null&&(Ie(e,n,0),e.g.g.push(t?1:0))}function s2(e,t,n){(t=Sn(t))!=null&&Er(e,n,_a(t))}function kr(e,t,n,r,s){fs(e,n,t instanceof p?t.u:Array.isArray(t)?xt(t,r):void 0,s)}function o2(e,t,n){(t=t==null||typeof t=="string"||Fn(t)||t instanceof ot?t:void 0)!=null&&Er(e,n,Cs(t).buffer)}function i2(e,t,n){return(e.h===5||e.h===2)&&(t=nn(t,x(t),n,2,!1),e.h==2?_r(e,us,t):t.push(us(e.g)),!0)}var te,it=me(function(e,t,n){if(e.h!==1)return!1;var r=e.g;e=hs(r);const s=hs(r);r=2*(s>>31)+1;const o=s>>>20&2047;return e=4294967296*(1048575&s)+e,ge(t,n,o==2047?e?NaN:1/0*r:o==0?r*Math.pow(2,-1074)*e:r*Math.pow(2,o-1075)*(e+4503599627370496)),!0},function(e,t,n){(t=_t(t))!=null&&(Ie(e,n,1),e=e.g,(n=Ra||(Ra=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),N=n.getUint32(0,!0),Q=n.getUint32(4,!0),Tn(e,N),Tn(e,Q))}),ne=me(function(e,t,n){return e.h===5&&(ge(t,n,us(e.g)),!0)},function(e,t,n){(t=_t(t))!=null&&(Ie(e,n,5),e=e.g,Us(t),Tn(e,N))}),Q3=sn(i2,function(e,t,n){if((t=rn(_t,t))!=null)for(let i=0;i<t.length;i++){var r=e,s=n,o=t[i];o!=null&&(Ie(r,s,5),r=r.g,Us(o),Tn(r,N))}}),co=sn(i2,function(e,t,n){if((t=rn(_t,t))!=null&&t.length){Ie(e,n,2),In(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,Us(t[r]),Tn(n,N)}}),gt=me(function(e,t,n){return e.h===0&&(ge(t,n,Hs(e.g,Bs)),!0)},t2),ts=me(function(e,t,n){return e.h===0&&(ge(t,n,(e=Hs(e.g,Bs))===0?void 0:e),!0)},t2),Z3=me(function(e,t,n){return e.h===0&&(ge(t,n,Hs(e.g,ls)),!0)},function(e,t,n){e:if(t!=null){if(wr(t)){if(typeof t=="string"){var r=Math.trunc(Number(t));Number.isSafeInteger(r)&&0<=r?t=String(r):((r=t.indexOf("."))!==-1&&(t=t.substring(0,r)),li(t)||(yr(t),t=or(N,Q)));break e}if(typeof t=="number"){t=0<=(t=Math.trunc(t))&&Number.isSafeInteger(t)?t:function(s){if(0>s){Lt(s);const o=or(N,Q);return s=Number(o),Number.isSafeInteger(s)?s:o}return li(String(s))?s:(Lt(s),ls(N,Q))}(t);break e}}t=void 0}t!=null&&(typeof t=="string"&&ni(t),t!=null&&(Ie(e,n,0),typeof t=="number"?(e=e.g,Lt(t),ir(e,N,Q)):(n=ni(t),ir(e.g,n.h,n.g))))}),$=me(function(e,t,n){return e.h===0&&(ge(t,n,pt(e.g)),!0)},n2),lo=sn(function(e,t,n){return(e.h===0||e.h===2)&&(t=nn(t,x(t),n,2,!1),e.h==2?_r(e,pt,t):t.push(pt(e.g)),!0)},function(e,t,n){if((t=rn(en,t))!=null&&t.length){n=zs(e,n);for(let r=0;r<t.length;r++)vr(e.g,t[r]);Ws(e,n)}}),Wt=me(function(e,t,n){return e.h===0&&(ge(t,n,(e=pt(e.g))===0?void 0:e),!0)},n2),ee=me(function(e,t,n){return e.h===0&&(ge(t,n,Vs(e.g)),!0)},r2),vn=me(function(e,t,n){return e.h===0&&(ge(t,n,(e=Vs(e.g))===!1?void 0:e),!0)},r2),ue=sn(function(e,t,n){return e.h===2&&(Cn(t,n,V3,e=js(e)),!0)},function(e,t,n){if((t=rn(Sn,t))!=null)for(let i=0;i<t.length;i++){var r=e,s=n,o=t[i];o!=null&&Er(r,s,_a(o))}}),yt=me(function(e,t,n){return e.h===2&&(ge(t,n,(e=js(e))===""?void 0:e),!0)},s2),U=me(function(e,t,n){return e.h===2&&(ge(t,n,js(e)),!0)},s2),J3=Sr(function(e,t,n,r,s){return e.h===2&&(Mn(e,so(t,r,n,!0),s),!0)},kr),el=Sr(function(e,t,n,r,s){return e.h===2&&(Mn(e,so(t,r,n),s),!0)},kr);te=new Zt(function(e,t,n,r,s){if(e.h!==2)return!1;r=xt(void 0,r);let o=x(t);qe(o);let i=nn(t,o,n,3);return o=x(t),4&K(i)&&(i=we(i),W(i,-2079&(1|K(i))),C(t,o,n,i)),i.push(r),Mn(e,r,s),!0},function(e,t,n,r,s){if(Array.isArray(t))for(let o=0;o<t.length;o++)kr(e,t[o],n,r,s)},!0,!0);var G=Sr(function(e,t,n,r,s,o){if(e.h!==2)return!1;let i=x(t);return qe(i),(o=ro(t,i,o))&&n!==o&&C(t,i,o),Mn(e,t=so(t,r,n),s),!0},kr),a2=me(function(e,t,n){return e.h===2&&(ge(t,n,Ia(e)),!0)},o2),tl=sn(function(e,t,n){return(e.h===0||e.h===2)&&(t=nn(t,x(t),n,2,!1),e.h==2?_r(e,mt,t):t.push(mt(e.g)),!0)},function(e,t,n){if((t=rn(M3,t))!=null)for(let i=0;i<t.length;i++){var r=e,s=n,o=t[i];o!=null&&(Ie(r,s,0),In(r.g,o))}}),Xe=me(function(e,t,n){return e.h===0&&(ge(t,n,pt(e.g)),!0)},function(e,t,n){(t=en(t))!=null&&(t=parseInt(t,10),Ie(e,n,0),vr(e.g,t))}),nl=sn(function(e,t,n){return(e.h===0||e.h===2)&&(t=nn(t,x(t),n,2,!1),e.h==2?_r(e,k3,t):t.push(pt(e.g)),!0)},function(e,t,n){if((t=rn(en,t))!=null&&t.length){n=zs(e,n);for(let r=0;r<t.length;r++)vr(e.g,t[r]);Ws(e,n)}});class rl{constructor(t,n){this.h=t,this.g=n,this.l=L,this.m=_,this.defaultValue=void 0}}function Be(e,t){return new rl(e,t)}function vt(e,t){return(n,r)=>{e:{if(Vn.length){const o=Vn.pop();o.o(r),qr(o.g,n,r),n=o}else n=new class{constructor(o,i){if(ti.length){const a=ti.pop();qr(a,o,i),o=a}else o=new class{constructor(a,c){this.h=null,this.m=!1,this.g=this.l=this.j=0,qr(this,a,c)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ca=!1}}(o,i);this.g=o,this.l=this.g.g,this.h=this.m=-1,this.o(i)}o({ia:o=!1}={}){this.ia=o}}(n,r);try{const o=new e,i=o.u;oo(t)(i,n);var s=o;break e}finally{n.g.clear(),n.m=-1,n.h=-1,100>Vn.length&&Vn.push(n)}s=void 0}return s}}function Lr(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const i=this.g;return this.g=[],i}}}};e2(this.u,t,Tr(e)),jt(t,t.g.end());const n=new Uint8Array(t.h),r=t.l,s=r.length;let o=0;for(let i=0;i<s;i++){const a=r[i];n.set(a,o),o+=a.length}return t.l=[n],n}}var yi=class extends p{constructor(e){super(e)}},c2=[0,yt,me(function(e,t,n){return e.h===2&&(ge(t,n,(e=Ia(e))===Pt()?void 0:e),!0)},function(e,t,n){if(t!=null){if(t instanceof p){const r=t.Qa;return void(r&&(t=r(t),t!=null&&Er(e,n,Cs(t).buffer)))}if(Array.isArray(t))return}o2(e,t,n)})],sl=[0,U],l2=[0,$,Xe,ee,-1,lo,Xe,-1],ol=[0,ee,-1],h2=class extends p{constructor(){super()}};h2.A=[6];var u2=[0,ee,U,ee,Xe,-1,nl,U,-1,ol,Xe],f2=[0,U,-2],_i=class extends p{constructor(){super()}},d2=[0],p2=[0,$,ee,-3],Ae=class extends p{constructor(e){super(e,2)}},H={},il=[-2,H,ee];H[336783863]=[0,U,ee,-1,$,[0,[1,2,3,4,5],G,d2,G,u2,G,f2,G,p2,G,l2],sl];var al=[0,yt,vn],m2=[0,ts,-1,vn,-3,ts,lo,yt,Wt,ts,-1,vn,Wt,vn,-2,yt],Dn=[-1,{}],g2=[0,U,1,Dn],y2=[0,U,ue,Dn];function be(e,t){gs(e,2,tn(t),"")}function I(e,t){Cn(e.u,3,Nn,t)}function b(e,t){Cn(e.u,4,Nn,t)}var he=class extends p{constructor(e){super(e,500)}o(e){return _(this,0,7,e)}};he.A=[3,4,5,6,8,13,17,1005];var cl=[-500,yt,-1,ue,-3,il,te,c2,Wt,-1,g2,y2,te,al,yt,m2,Wt,ue,987,ue],ll=[0,yt,-1,Dn],hl=[-500,U,-1,[-1,{}],998,U],ul=[-500,U,ue,-1,[-2,{},ee],997,ue,-1],fl=[-500,U,ue,Dn,998,ue];function Te(e,t){pr(e,1,he,t)}function D(e,t){Cn(e.u,10,Nn,t)}function R(e,t){Cn(e.u,15,Nn,t)}var fe=class extends p{constructor(e){super(e,500)}o(e){return _(this,0,1001,e)}};fe.A=[1,6,7,9,10,15,16,17,14,1002];var _2=[-500,te,cl,4,te,hl,te,ul,Wt,te,fl,ue,Wt,g2,y2,te,ll,ue,-2,m2,yt,-1,vn,979,Dn,te,c2],dl=vt(fe,_2);fe.prototype.g=Lr(_2);var pl=[0,te,[0,$,-2]],ml=class extends p{constructor(e){super(e)}},gl=[0,$,ne,U,-1],ho=class extends p{constructor(e){super(e)}g(){return ct(this,ml,1)}};ho.A=[1];var v2=[0,te,gl],Rr=vt(ho,v2),yl=[0,$,ne],_l=[0,$,-1,pl],vl=class extends p{constructor(e){super(e)}},El=[0,$,-3],wl=[0,ne,-3],Al=class extends p{constructor(e){super(e)}},bl=[0,ne,-1,U,ne],Jn=class extends p{constructor(e){super(e)}h(){return L(this,vl,2)}g(){return ct(this,Al,5)}};Jn.A=[5];var Tl=[0,Xe,El,wl,_l,te,bl],E2=class extends p{constructor(e){super(e)}};E2.A=[1,2,3,8,9];var w2=vt(E2,[0,ue,lo,co,Tl,U,-1,gt,te,yl,ue,gt]),A2=class extends p{constructor(e){super(e)}},Sl=[0,ne,-4],b2=class extends p{constructor(e){super(e)}};b2.A=[1];var Bt=vt(b2,[0,te,Sl]),T2=class extends p{constructor(e){super(e)}},kl=[0,ne,-4],S2=class extends p{constructor(e){super(e)}};S2.A=[1];var Un=vt(S2,[0,te,kl]),k2=class extends p{constructor(e){super(e)}};k2.A=[3];var Ll=[0,$,-1,co,Xe],L2=class extends p{constructor(){super()}};L2.prototype.g=Lr([0,ne,-4,gt]);var Rl=class extends p{constructor(e){super(e)}},xl=[0,1,$,U,v2],R2=class extends p{constructor(e){super(e)}};R2.A=[1];var Pl=vt(R2,[0,te,xl,gt]),vs=class extends p{constructor(e){super(e)}};vs.A=[1];var Fl=class extends p{constructor(e){super(e)}qa(){const e=Va(this);return e??Pt()}},Ml=class extends p{constructor(e){super(e)}},x2=[1,2],Il=[0,x2,G,[0,co],G,[0,a2],$,U],P2=class extends p{constructor(e){super(e)}};P2.A=[1];var Ol=vt(P2,[0,te,Il,gt]),xr=class extends p{constructor(e){super(e)}};xr.A=[4,5];var F2=[0,U,$,ne,ue,-1],vi=class extends p{constructor(e){super(e)}},Nl=[0,ee,-1],Ei=class extends p{constructor(e){super(e)}},er=[1,2,3,4,5],mr=class extends p{constructor(e){super(e)}g(){return Va(this)!=null}h(){return Me(this,2)!=null}},M2=[0,a2,U,[0,$,gt,-1],[0,Z3,gt]],V=class extends p{constructor(e){super(e)}g(){return Ua(zt(this,2))??!1}},q=[0,M2,ee,[0,er,G,p2,G,u2,G,l2,G,d2,G,f2],Xe],Pr=class extends p{constructor(e){super(e)}},uo=[0,q,ne,-1,$],Cl=Be(502141897,Pr);H[502141897]=uo;var I2=[0,M2];H[512499200]=I2;var O2=[0,I2];H[515723506]=O2;var Dl=vt(class extends p{constructor(e){super(e)}},[0,[0,Xe,-1,Q3,tl],Ll]),N2=[0,q];H[508981768]=N2;var C2=class extends p{constructor(e){super(e)}},fo=[0,q,ne,N2,ee],D2=class extends p{constructor(e){super(e)}},U2=[0,q,uo,fo,ne,O2];H[508968149]=fo;var Ul=Be(508968150,D2);H[508968150]=U2;var B2=class extends p{constructor(e){super(e)}},Bl=Be(513916220,B2);H[513916220]=[0,q,U2,$];var Ot=class extends p{constructor(e){super(e)}h(){return L(this,xr,2)}g(){M(this,2)}},G2=[0,q,F2];H[478825465]=G2;var H2=[0,q];H[478825422]=H2;var Gl=class extends p{constructor(e){super(e)}},V2=[0,q,H2,G2,-1],j2=class extends p{constructor(e){super(e)}},z2=[0,q,ne,$],po=class extends p{constructor(e){super(e)}},mo=[0,q,ne],go=class extends p{constructor(e){super(e)}},W2=[0,q,z2,mo,ne],K2=class extends p{constructor(e){super(e)}},Hl=[0,q,W2,V2];H[463370452]=V2,H[464864288]=z2,H[474472470]=mo;var Vl=Be(462713202,go);H[462713202]=W2;var jl=Be(479097054,K2);H[479097054]=Hl;var zl=class extends p{constructor(e){super(e)}},Wl=[0,q],$2=class extends p{constructor(e){super(e)}},yo=[0,q,ne,-1,$];H[514774813]=yo;var Y2=class extends p{constructor(e){super(e)}},_o=[0,q,ne,ee];H[518928384]=_o;var X2=class extends p{constructor(){super()}};X2.prototype.g=Lr([0,q,mo,Wl,uo,fo,yo,_o]);var q2=class extends p{constructor(e){super(e)}},Kl=Be(456383383,q2);H[456383383]=[0,q,F2];var Q2=class extends p{constructor(e){super(e)}},$l=Be(476348187,Q2);H[476348187]=[0,q,Nl];var Z2=class extends p{constructor(e){super(e)}},J2=[0,Xe,-1],Es=class extends p{constructor(e){super(e)}};Es.A=[3];var Yl=Be(458105876,class extends p{constructor(e){super(e)}g(){var e=this.u;const t=x(e);var n=2&t;return e=function(r,s,o){var i=Es;const a=2&s;let c=!1;if(o==null){if(a)return fi();o=[]}else if(o.constructor===Fe){if(!(2&o.L)||a)return o;o=o.Y()}else Array.isArray(o)?c=!!(2&K(o)):o=[];if(a){if(!o.length)return fi();c||(c=!0,Jt(o))}else c&&(c=!1,o=Wa(o));return c||(64&K(o)?ar(o,32):32&s&&Ks(o,32)),C(r,s,2,i=new Fe(o,i,I3,void 0),!1),i}(e,t,Qe(e,t,2)),e==null||!n&&Es&&(e.ta=!0),n=e}});H[458105876]=[0,J2,q3,[!0,gt,[0,U,-1,ue]]];var vo=class extends p{constructor(e){super(e)}},e1=Be(458105758,vo);H[458105758]=[0,q,U,J2];var Eo=class extends p{constructor(e){super(e)}};Eo.A=[5,6];var Xl=Be(443442058,Eo);H[443442058]=[0,q,U,$,ne,ue,-1];var t1=class extends p{constructor(e){super(e)}},ql=Be(516587230,t1);function ws(e,t){return t=t?t.clone():new xr,e.displayNamesLocale!==void 0?M(t,1,tn(e.displayNamesLocale)):e.displayNamesLocale===void 0&&M(t,1),e.maxResults!==void 0?Ye(t,2,e.maxResults):"maxResults"in e&&M(t,2),e.scoreThreshold!==void 0?g(t,3,e.scoreThreshold):"scoreThreshold"in e&&M(t,3),e.categoryAllowlist!==void 0?dr(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&M(t,4),e.categoryDenylist!==void 0?dr(t,5,e.categoryDenylist):"categoryDenylist"in e&&M(t,5),t}function wo(e,t=-1,n=""){return{categories:e.map(r=>({index:$e(xe(r,1))??-1,score:X(r,2)??0,categoryName:Me(r,3)??""??"",displayName:Me(r,4)??""??""})),headIndex:t,headName:n}}function n1(e){var i,a;var t=Dt(e,3,_t),n=Dt(e,2,en),r=Dt(e,1,Sn),s=Dt(e,9,Sn);const o={categories:[],keypoints:[]};for(let c=0;c<t.length;c++)o.categories.push({score:t[c],index:n[c]??-1,categoryName:r[c]??"",displayName:s[c]??""});if((t=(i=L(e,Jn,4))==null?void 0:i.h())&&(o.boundingBox={originX:xe(t,1)??0,originY:xe(t,2)??0,width:xe(t,3)??0,height:xe(t,4)??0,angle:0}),(a=L(e,Jn,4))==null?void 0:a.g().length)for(const c of L(e,Jn,4).g())o.keypoints.push({x:Qn(c,1)??0,y:Qn(c,2)??0,score:Qn(c,4)??0,label:Me(c,3)??""});return o}function Fr(e){const t=[];for(const n of ct(e,T2,1))t.push({x:X(n,1)??0,y:X(n,2)??0,z:X(n,3)??0,visibility:X(n,4)??0});return t}function En(e){const t=[];for(const n of ct(e,A2,1))t.push({x:X(n,1)??0,y:X(n,2)??0,z:X(n,3)??0,visibility:X(n,4)??0});return t}function wi(e){return Array.from(e,t=>127<t?t-256:t)}function Ai(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,r=0,s=0;for(let o=0;o<e.length;o++)n+=e[o]*t[o],r+=e[o]*e[o],s+=t[o]*t[o];if(0>=r||0>=s)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*s)}H[516587230]=[0,q,yo,_o,ne];function r1(){const e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")}async function bi(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((n,r)=>{t.addEventListener("load",()=>{n()},!1),t.addEventListener("error",s=>{r(s)},!1),document.body.appendChild(t)})}importScripts(e.toString())}function s1(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function E(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function Ti(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,s]=s1(t);return!e.l||r===e.i.canvas.width&&s===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=s),[r,s]}function Si(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(t.length);for(let s=0;s<t.length;s++)r[s]=e.i.stringToNewUTF8(t[s]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(const s of r)e.i._free(s);e.i._free(t)}function et(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function At(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(s,o,i)=>{o?(n(r,i),r=[]):r.push(s)}}async function Ql(e,t,n,r){return e=await(async(s,o,i,a,c)=>{if(o&&await bi(o),!self.ModuleFactory||i&&(await bi(i),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&c&&((o=self.Module).locateFile=c.locateFile,c.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=c.mainScriptUrlOrBlob)),c=await self.ModuleFactory(self.Module||c),self.ModuleFactory=self.Module=void 0,new s(c,a)})(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:s=>s.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&s.endsWith(".data")?n.assetBinaryPath.toString():s}),await e.o(r),e}function ki(e,t){const n=L(e.baseOptions,mr,1)||new mr;typeof t=="string"?(M(n,2,tn(t)),M(n,1)):t instanceof Uint8Array&&(M(n,1,Xs(t,!1,!1)),M(n,2)),_(e.baseOptions,0,1,n)}function Li(e){try{const t=e.H.length;if(t===1)throw Error(e.H[0].message);if(1<t)throw Error("Encountered multiple errors: "+e.H.map(n=>n.message).join(", "))}finally{e.H=[]}}function d(e,t){e.C=Math.max(e.C,t)}function Mr(e,t){e.B=new he,be(e.B,"PassThroughCalculator"),I(e.B,"free_memory"),b(e.B,"free_memory_unused_out"),D(t,"free_memory"),Te(t,e.B)}function Kt(e,t){I(e.B,t),b(e.B,t+"_unused_out")}function Ir(e){e.g.addBoolToStream(!0,"free_memory",e.C)}var As=class{constructor(e){this.g=e,this.H=[],this.C=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){var n,r,s,o,i,a;if(t){const c=e.baseOptions||{};if((n=e.baseOptions)!=null&&n.modelAssetBuffer&&((r=e.baseOptions)!=null&&r.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((s=L(this.baseOptions,mr,1))!=null&&s.g()||(o=L(this.baseOptions,mr,1))!=null&&o.h()||(i=e.baseOptions)!=null&&i.modelAssetBuffer||(a=e.baseOptions)!=null&&a.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(l,h){let m=L(l.baseOptions,Ei,3);if(!m){var u=m=new Ei,v=new _i;yn(u,4,er,v)}"delegate"in h&&(h.delegate==="GPU"?(h=m,u=new h2,yn(h,2,er,u)):(h=m,u=new _i,yn(h,4,er,u))),_(l.baseOptions,0,3,m)}(this,c),c.modelAssetPath)return fetch(c.modelAssetPath.toString()).then(l=>{if(l.ok)return l.arrayBuffer();throw Error(`Failed to fetch model: ${c.modelAssetPath} (${l.status})`)}).then(l=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(l),!0,!1,!1),ki(this,"/model.dat"),this.m(),this.K()});ki(this,c.modelAssetBuffer)}return this.m(),this.K(),Promise.resolve()}K(){}fa(){let e;if(this.g.fa(t=>{e=dl(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((n,r)=>{this.H.push(Error(r))}),this.g.Ma(),this.g.setGraph(e,t),this.B=void 0,Li(this)}finishProcessing(){this.g.finishProcessing(),Li(this)}close(){this.B=void 0,this.g.closeGraph()}};function at(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}As.prototype.close=As.prototype.close;class Zl{constructor(t,n,r,s){this.g=t,this.h=n,this.m=r,this.l=s}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Ri(e,t,n){const r=e.g;if(n=at(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(e.h,n),n}function xi(e,t){const n=e.g,r=at(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);const s=at(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(e.P),n.vertexAttribPointer(e.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const o=at(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.O),n.vertexAttribPointer(e.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new Zl(n,r,s,o)}function Ao(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function bo(e,t,n,r){return Ao(e,t),e.h||(e.m(),e.D()),n?(e.s||(e.s=xi(e,!0)),n=e.s):(e.v||(e.v=xi(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function Or(e,t,n){return Ao(e,t),e=at(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Nr(e,t,n){Ao(e,t),e.B||(e.B=at(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.B),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function To(e){var t;(t=e.g)==null||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var So=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=at(e.createProgram(),"Failed to create WebGL program"),this.ba=Ri(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.aa=Ri(this,this.H(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.O=e.getAttribLocation(this.h,"aTex")}D(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.ba),e.deleteShader(this.aa)}this.B&&this.g.deleteFramebuffer(this.B),this.v&&this.v.close(),this.s&&this.s.close()}};function nt(e,t){switch(t){case 0:return e.g.find(n=>n instanceof Uint8Array);case 1:return e.g.find(n=>n instanceof Float32Array);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function bs(e){var t=nt(e,1);if(!t){if(t=nt(e,0))t=new Float32Array(t).map(r=>r/255);else{t=new Float32Array(e.width*e.height);const r=$t(e);var n=ko(e);if(Nr(n,r,o1(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let s=0,o=0;s<t.length;++s,o+=4)t[s]=n[o]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function o1(e){let t=nt(e,2);if(!t){const n=$t(e);t=a1(e);const r=bs(e),s=i1(e);n.texImage2D(n.TEXTURE_2D,0,s,e.width,e.height,0,n.RED,n.FLOAT,r),Ts(e)}return t}function $t(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=at(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function i1(e){if(e=$t(e),!jn)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))jn=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");jn=e.R16F}return jn}function ko(e){return e.l||(e.l=new So),e.l}function a1(e){const t=$t(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=nt(e,2);return n||(n=Or(ko(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function Ts(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var jn,re=class{constructor(e,t,n,r,s,o,i){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=s,this.width=o,this.height=i,this.j&&--Pi===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!nt(this,0)}la(){return!!nt(this,1)}R(){return!!nt(this,2)}ka(){return(t=nt(e=this,0))||(t=bs(e),t=new Uint8Array(t.map(n=>255*n)),e.g.push(t)),t;var e,t}ja(){return bs(this)}M(){return o1(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const r=$t(this),s=ko(this);r.activeTexture(r.TEXTURE1),n=Or(s,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);const o=i1(this);r.texImage2D(r.TEXTURE_2D,0,o,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),Nr(s,r,n),bo(s,r,!1,()=>{a1(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),Ts(this)}),To(s),Ts(this)}}e.push(n)}return new re(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&$t(this).deleteTexture(nt(this,2)),Pi=-1}};re.prototype.close=re.prototype.close,re.prototype.clone=re.prototype.clone,re.prototype.getAsWebGLTexture=re.prototype.M,re.prototype.getAsFloat32Array=re.prototype.ja,re.prototype.getAsUint8Array=re.prototype.ka,re.prototype.hasWebGLTexture=re.prototype.R,re.prototype.hasFloat32Array=re.prototype.la,re.prototype.hasUint8Array=re.prototype.Ha;var Pi=250;function je(e,t){switch(t){case 0:return e.g.find(n=>n instanceof ImageData);case 1:return e.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function c1(e){var t=je(e,0);if(!t){t=Yt(e);const n=Cr(e),r=new Uint8Array(e.width*e.height*4);Nr(n,t,tr(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),To(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function tr(e){let t=je(e,2);if(!t){const n=Yt(e);t=nr(e);const r=je(e,1)||c1(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),pn(e)}return t}function Yt(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return e.h||(e.h=at(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Cr(e){return e.l||(e.l=new So),e.l}function nr(e){const t=Yt(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=je(e,2);return n||(n=Or(Cr(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function pn(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Fi(e){const t=Yt(e);return bo(Cr(e),t,!0,()=>function(n,r){const s=n.canvas;if(s.width===n.width&&s.height===n.height)return r();const o=s.width,i=s.height;return s.width=n.width,s.height=n.height,n=r(),s.width=o,s.height=i,n}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}var se=class{constructor(e,t,n,r,s,o,i){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=s,this.width=o,this.height=i,(this.j||this.m)&&--Mi===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!je(this,0)}ma(){return!!je(this,1)}R(){return!!je(this,2)}Ea(){return c1(this)}Da(){var e=je(this,1);return e||(tr(this),nr(this),e=Fi(this),pn(this),this.g.push(e),this.j=!0),e}M(){return tr(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const r=Yt(this),s=Cr(this);r.activeTexture(r.TEXTURE1),n=Or(s,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),Nr(s,r,n),bo(s,r,!1,()=>{nr(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),pn(this)}),To(s),pn(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);tr(this),nr(this),n=Fi(this),pn(this)}e.push(n)}return new se(e,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&je(this,1).close(),this.m&&Yt(this).deleteTexture(je(this,2)),Mi=-1}};se.prototype.close=se.prototype.close,se.prototype.clone=se.prototype.clone,se.prototype.getAsWebGLTexture=se.prototype.M,se.prototype.getAsImageBitmap=se.prototype.Da,se.prototype.getAsImageData=se.prototype.Ea,se.prototype.hasWebGLTexture=se.prototype.R,se.prototype.hasImageBitmap=se.prototype.ma,se.prototype.hasImageData=se.prototype.Ga;var Mi=250;function Ge(...e){return e.map(([t,n])=>({start:t,end:n}))}const Jl=function(e){return class extends e{Ma(){this.i._registerModelResourcesGraphService()}}}((Ii=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:typeof OffscreenCanvas>"u"||r1()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas")):this.i.canvas=new OffscreenCanvas(1,1)}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,s){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),E(this,r||"input_audio",o=>{E(this,s=s||"audio_header",i=>{this.i._configureAudio(o,i,e,t,n)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}fa(e){et(this,"__graph_config__",t=>{e(t)}),E(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,s){const o=4*e.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(e,this.g/4),E(this,r,i=>{this.i._addAudioToInputStream(this.g,t,n,i,s)})}addGpuBufferToStream(e,t,n){E(this,t,r=>{const[s,o]=Ti(this,e,r);this.i._addBoundTextureToStream(r,s,o,n)})}addBoolToStream(e,t,n){E(this,t,r=>{this.i._addBoolToInputStream(e,r,n)})}addDoubleToStream(e,t,n){E(this,t,r=>{this.i._addDoubleToInputStream(e,r,n)})}addFloatToStream(e,t,n){E(this,t,r=>{this.i._addFloatToInputStream(e,r,n)})}addIntToStream(e,t,n){E(this,t,r=>{this.i._addIntToInputStream(e,r,n)})}addStringToStream(e,t,n){E(this,t,r=>{E(this,e,s=>{this.i._addStringToInputStream(s,r,n)})})}addStringRecordToStream(e,t,n){E(this,t,r=>{Si(this,Object.keys(e),s=>{Si(this,Object.values(e),o=>{this.i._addFlatHashMapToInputStream(s,o,Object.keys(e).length,r,n)})})})}addProtoToStream(e,t,n,r){E(this,n,s=>{E(this,t,o=>{const i=this.i._malloc(e.length);this.i.HEAPU8.set(e,i),this.i._addProtoToInputStream(i,e.length,o,s,r),this.i._free(i)})})}addEmptyPacketToStream(e,t){E(this,e,n=>{this.i._addEmptyPacketToInputStream(n,t)})}addBoolVectorToStream(e,t,n){E(this,t,r=>{const s=this.i._allocateBoolVector(e.length);if(!s)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(s,o);this.i._addBoolVectorToInputStream(s,r,n)})}addDoubleVectorToStream(e,t,n){E(this,t,r=>{const s=this.i._allocateDoubleVector(e.length);if(!s)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(s,o);this.i._addDoubleVectorToInputStream(s,r,n)})}addFloatVectorToStream(e,t,n){E(this,t,r=>{const s=this.i._allocateFloatVector(e.length);if(!s)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(s,o);this.i._addFloatVectorToInputStream(s,r,n)})}addIntVectorToStream(e,t,n){E(this,t,r=>{const s=this.i._allocateIntVector(e.length);if(!s)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(s,o);this.i._addIntVectorToInputStream(s,r,n)})}addStringVectorToStream(e,t,n){E(this,t,r=>{const s=this.i._allocateStringVector(e.length);if(!s)throw Error("Unable to allocate new string vector on heap.");for(const o of e)E(this,o,i=>{this.i._addStringVectorEntry(s,i)});this.i._addStringVectorToInputStream(s,r,n)})}addBoolToInputSidePacket(e,t){E(this,t,n=>{this.i._addBoolToInputSidePacket(e,n)})}addDoubleToInputSidePacket(e,t){E(this,t,n=>{this.i._addDoubleToInputSidePacket(e,n)})}addFloatToInputSidePacket(e,t){E(this,t,n=>{this.i._addFloatToInputSidePacket(e,n)})}addIntToInputSidePacket(e,t){E(this,t,n=>{this.i._addIntToInputSidePacket(e,n)})}addStringToInputSidePacket(e,t){E(this,t,n=>{E(this,e,r=>{this.i._addStringToInputSidePacket(r,n)})})}addProtoToInputSidePacket(e,t,n){E(this,n,r=>{E(this,t,s=>{const o=this.i._malloc(e.length);this.i.HEAPU8.set(e,o),this.i._addProtoToInputSidePacket(o,e.length,s,r),this.i._free(o)})})}addBoolVectorToInputSidePacket(e,t){E(this,t,n=>{const r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const s of e)this.i._addBoolVectorEntry(r,s);this.i._addBoolVectorToInputSidePacket(r,n)})}addDoubleVectorToInputSidePacket(e,t){E(this,t,n=>{const r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const s of e)this.i._addDoubleVectorEntry(r,s);this.i._addDoubleVectorToInputSidePacket(r,n)})}addFloatVectorToInputSidePacket(e,t){E(this,t,n=>{const r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const s of e)this.i._addFloatVectorEntry(r,s);this.i._addFloatVectorToInputSidePacket(r,n)})}addIntVectorToInputSidePacket(e,t){E(this,t,n=>{const r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const s of e)this.i._addIntVectorEntry(r,s);this.i._addIntVectorToInputSidePacket(r,n)})}addStringVectorToInputSidePacket(e,t){E(this,t,n=>{const r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const s of e)E(this,s,o=>{this.i._addStringVectorEntry(r,o)});this.i._addStringVectorToInputSidePacket(r,n)})}attachBoolListener(e,t){et(this,e,t),E(this,e,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(e,t){At(this,e,t),E(this,e,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(e,t){et(this,e,t),E(this,e,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(e,t){At(this,e,t),E(this,e,n=>{this.i._attachIntVectorListener(n)})}attachDoubleListener(e,t){et(this,e,t),E(this,e,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(e,t){At(this,e,t),E(this,e,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(e,t){et(this,e,t),E(this,e,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(e,t){At(this,e,t),E(this,e,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(e,t){et(this,e,t),E(this,e,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(e,t){At(this,e,t),E(this,e,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(e,t,n){et(this,e,t),E(this,e,r=>{this.i._attachProtoListener(r,n||!1)})}attachProtoVectorListener(e,t,n){At(this,e,t),E(this,e,r=>{this.i._attachProtoVectorListener(r,n||!1)})}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),et(this,e,(r,s)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),t(r,s)}),E(this,e,r=>{this.i._attachAudioListener(r,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Ii{get ha(){return this.i}sa(e,t,n){E(this,t,r=>{const[s,o]=Ti(this,e,r);this.ha._addBoundTextureAsImageToStream(r,s,o,n)})}W(e,t){et(this,e,t),E(this,e,n=>{this.ha._attachImageListener(n)})}da(e,t){At(this,e,t),E(this,e,n=>{this.ha._attachImageVectorListener(n)})}}));var Ii,Oe=class extends Jl{};async function A(e,t,n){return async function(r,s,o,i){return Ql(r,s,o,i)}(e,n.canvas??(typeof OffscreenCanvas>"u"||r1()?document.createElement("canvas"):void 0),t,n)}function l1(e,t,n,r){if(e.V){const o=new L2;if(n!=null&&n.regionOfInterest){if(!e.ra)throw Error("This task doesn't support region-of-interest.");var s=n.regionOfInterest;if(s.left>=s.right||s.top>=s.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(0>s.left||0>s.top||1<s.right||1<s.bottom)throw Error("Expected RectF values to be in [0,1].");g(o,1,(s.left+s.right)/2),g(o,2,(s.top+s.bottom)/2),g(o,4,s.right-s.left),g(o,3,s.bottom-s.top)}else g(o,1,.5),g(o,2,.5),g(o,4,1),g(o,3,1);if(n!=null&&n.rotationDegrees){if((n==null?void 0:n.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90°.");if(g(o,5,-Math.PI*n.rotationDegrees/180),(n==null?void 0:n.rotationDegrees)%180!=0){const[i,a]=s1(t);n=X(o,3)*a/i,s=X(o,4)*i/a,g(o,4,n),g(o,3,s)}}e.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",e.V,r)}e.g.sa(t,e.ba,r??performance.now()),e.finishProcessing()}function Ne(e,t,n){var r;if((r=e.baseOptions)!=null&&r.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");l1(e,t,n,e.C+1)}function Ze(e,t,n,r){var s;if(!((s=e.baseOptions)!=null&&s.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");l1(e,t,n,r)}function Xt(e,t,n,r){var s=t.data;const o=t.width,i=o*(t=t.height);if((s instanceof Uint8Array||s instanceof Float32Array)&&s.length!==i)throw Error("Unsupported channel count: "+s.length/i);return e=new re([s],n,!1,e.g.i.canvas,e.O,o,t),r?e.clone():e}var pe=class extends As{constructor(e,t,n,r){super(e),this.g=e,this.ba=t,this.V=n,this.ra=r,this.O=new So}l(e,t=!0){if("runningMode"in e&&kn(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.O.close(),super.close()}};pe.prototype.close=pe.prototype.close;var Se=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},_(e=this.h=new Pr,0,1,t=new V),g(this.h,2,.5),g(this.h,3,.3)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&g(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&g(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}F(e,t){return this.j={detections:[]},Ne(this,e,t),this.j}G(e,t,n){return this.j={detections:[]},Ze(this,e,n,t),this.j}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect_in"),R(e,"detections");const t=new Ae;Ue(t,Cl,this.h);const n=new he;be(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect_in"),b(n,"DETECTIONS:detections"),n.o(t),Te(e,n),this.g.attachProtoVectorListener("detections",(r,s)=>{for(const o of r)r=w2(o),this.j.detections.push(n1(r));d(this,s)}),this.g.attachEmptyPacketListener("detections",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Se.prototype.detectForVideo=Se.prototype.G,Se.prototype.detect=Se.prototype.F,Se.prototype.setOptions=Se.prototype.o,Se.createFromModelPath=async function(e,t){return A(Se,e,{baseOptions:{modelAssetPath:t}})},Se.createFromModelBuffer=function(e,t){return A(Se,e,{baseOptions:{modelAssetBuffer:t}})},Se.createFromOptions=function(e,t){return A(Se,e,t)};var Lo=Ge([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Ro=Ge([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),xo=Ge([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),h1=Ge([474,475],[475,476],[476,477],[477,474]),Po=Ge([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Fo=Ge([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),u1=Ge([469,470],[470,471],[471,472],[472,469]),Mo=Ge([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),f1=[...Lo,...Ro,...xo,...Po,...Fo,...Mo],d1=Ge([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Oi(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var j=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,_(e=this.h=new D2,0,1,t=new V),this.v=new C2,_(this.h,0,3,this.v),this.s=new Pr,_(this.h,0,2,this.s),Ye(this.s,4,1),g(this.s,2,.5),g(this.v,2,.5),g(this.h,4,.5)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return"numFaces"in e&&Ye(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&g(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&g(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&g(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}F(e,t){return Oi(this),Ne(this,e,t),this.j}G(e,t,n){return Oi(this),Ze(this,e,n,t),this.j}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"face_landmarks");const t=new Ae;Ue(t,Ul,this.h);const n=new he;be(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),Te(e,n),this.g.attachProtoVectorListener("face_landmarks",(r,s)=>{for(const o of r)r=Un(o),this.j.faceLandmarks.push(Fr(r));d(this,s)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{d(this,r)}),this.outputFaceBlendshapes&&(R(e,"blendshapes"),b(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(r,s)=>{if(this.outputFaceBlendshapes)for(const o of r)r=Rr(o),this.j.faceBlendshapes.push(wo(r.g()??[]));d(this,s)}),this.g.attachEmptyPacketListener("blendshapes",r=>{d(this,r)})),this.outputFacialTransformationMatrixes&&(R(e,"face_geometry"),b(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(r,s)=>{if(this.outputFacialTransformationMatrixes)for(const o of r)(r=L(Dl(o),k2,2))&&this.j.facialTransformationMatrixes.push({rows:$e(xe(r,1))??0,columns:$e(xe(r,2))??0,data:Dt(r,3,_t).slice()??[]});d(this,s)}),this.g.attachEmptyPacketListener("face_geometry",r=>{d(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};j.prototype.detectForVideo=j.prototype.G,j.prototype.detect=j.prototype.F,j.prototype.setOptions=j.prototype.o,j.createFromModelPath=function(e,t){return A(j,e,{baseOptions:{modelAssetPath:t}})},j.createFromModelBuffer=function(e,t){return A(j,e,{baseOptions:{modelAssetBuffer:t}})},j.createFromOptions=function(e,t){return A(j,e,t)},j.FACE_LANDMARKS_LIPS=Lo,j.FACE_LANDMARKS_LEFT_EYE=Ro,j.FACE_LANDMARKS_LEFT_EYEBROW=xo,j.FACE_LANDMARKS_LEFT_IRIS=h1,j.FACE_LANDMARKS_RIGHT_EYE=Po,j.FACE_LANDMARKS_RIGHT_EYEBROW=Fo,j.FACE_LANDMARKS_RIGHT_IRIS=u1,j.FACE_LANDMARKS_FACE_OVAL=Mo,j.FACE_LANDMARKS_CONTOURS=f1,j.FACE_LANDMARKS_TESSELATION=d1;var He=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!0),_(e=this.j=new B2,0,1,t=new V)}get baseOptions(){return L(this.j,V,1)}set baseOptions(e){_(this.j,0,1,e)}o(e){return super.l(e)}Pa(e,t,n){const r=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:n,Ne(this,e,r??{}),!this.h)return this.s}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"stylized_image");const t=new Ae;Ue(t,Bl,this.j);const n=new he;be(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),Te(e,n),this.g.W("stylized_image",(r,s)=>{var o=!this.h,i=r.data,a=r.width;const c=a*(r=r.height);if(i instanceof Uint8Array)if(i.length===3*c){const l=new Uint8ClampedArray(4*c);for(let h=0;h<c;++h)l[4*h]=i[3*h],l[4*h+1]=i[3*h+1],l[4*h+2]=i[3*h+2],l[4*h+3]=255;i=new ImageData(l,a,r)}else{if(i.length!==4*c)throw Error("Unsupported channel count: "+i.length/c);i=new ImageData(new Uint8ClampedArray(i.buffer,i.byteOffset,i.length),a,r)}else if(!(i instanceof WebGLTexture))throw Error(`Unsupported format: ${i.constructor.name}`);a=new se([i],!1,!1,this.g.i.canvas,this.O,a,r),this.s=o=o?a.clone():a,this.h&&this.h(o),d(this,s)}),this.g.attachEmptyPacketListener("stylized_image",r=>{this.s=null,this.h&&this.h(null),d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};He.prototype.stylize=He.prototype.Pa,He.prototype.setOptions=He.prototype.o,He.createFromModelPath=function(e,t){return A(He,e,{baseOptions:{modelAssetPath:t}})},He.createFromModelBuffer=function(e,t){return A(He,e,{baseOptions:{modelAssetBuffer:t}})},He.createFromOptions=function(e,t){return A(He,e,t)};var Io=Ge([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function Ni(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function Ci(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function Di(e,t=!0){const n=[];for(const s of e){var r=Rr(s);e=[];for(const o of r.g())r=t&&xe(o,1)!=null?$e(xe(o,1)):-1,e.push({score:X(o,2)??0,index:r,categoryName:Me(o,3)??""??"",displayName:Me(o,4)??""??""});n.push(e)}return n}var _e=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],_(e=this.j=new K2,0,1,t=new V),this.s=new go,_(this.j,0,2,this.s),this.D=new po,_(this.s,0,3,this.D),this.v=new j2,_(this.s,0,2,this.v),this.h=new Gl,_(this.j,0,3,this.h),g(this.v,2,.5),g(this.s,4,.5),g(this.D,2,.5)}get baseOptions(){return L(this.j,V,1)}set baseOptions(e){_(this.j,0,1,e)}o(e){var s,o,i,a;if(Ye(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&g(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&g(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&g(this.D,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new Ot,n=t,r=ws(e.cannedGesturesClassifierOptions,(s=L(this.h,Ot,3))==null?void 0:s.h());_(n,0,2,r),_(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&((o=L(this.h,Ot,3))==null||o.g());return e.customGesturesClassifierOptions?(_(n=t=new Ot,0,2,r=ws(e.customGesturesClassifierOptions,(i=L(this.h,Ot,4))==null?void 0:i.h())),_(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&((a=L(this.h,Ot,4))==null||a.g()),this.l(e)}Ka(e,t){return Ni(this),Ne(this,e,t),Ci(this)}La(e,t,n){return Ni(this),Ze(this,e,n,t),Ci(this)}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"hand_gestures"),R(e,"hand_landmarks"),R(e,"world_hand_landmarks"),R(e,"handedness");const t=new Ae;Ue(t,jl,this.j);const n=new he;be(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"HAND_GESTURES:hand_gestures"),b(n,"LANDMARKS:hand_landmarks"),b(n,"WORLD_LANDMARKS:world_hand_landmarks"),b(n,"HANDEDNESS:handedness"),n.o(t),Te(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,s)=>{for(const o of r){r=Un(o);const i=[];for(const a of ct(r,T2,1))i.push({x:X(a,1)??0,y:X(a,2)??0,z:X(a,3)??0,visibility:X(a,4)??0});this.landmarks.push(i)}d(this,s)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{d(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,s)=>{for(const o of r){r=Bt(o);const i=[];for(const a of ct(r,A2,1))i.push({x:X(a,1)??0,y:X(a,2)??0,z:X(a,3)??0,visibility:X(a,4)??0});this.worldLandmarks.push(i)}d(this,s)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{d(this,r)}),this.g.attachProtoVectorListener("hand_gestures",(r,s)=>{this.gestures.push(...Di(r,!1)),d(this,s)}),this.g.attachEmptyPacketListener("hand_gestures",r=>{d(this,r)}),this.g.attachProtoVectorListener("handedness",(r,s)=>{this.handedness.push(...Di(r)),d(this,s)}),this.g.attachEmptyPacketListener("handedness",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function Ui(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}_e.prototype.recognizeForVideo=_e.prototype.La,_e.prototype.recognize=_e.prototype.Ka,_e.prototype.setOptions=_e.prototype.o,_e.createFromModelPath=function(e,t){return A(_e,e,{baseOptions:{modelAssetPath:t}})},_e.createFromModelBuffer=function(e,t){return A(_e,e,{baseOptions:{modelAssetBuffer:t}})},_e.createFromOptions=function(e,t){return A(_e,e,t)},_e.HAND_CONNECTIONS=Io;var ve=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],_(e=this.h=new go,0,1,t=new V),this.s=new po,_(this.h,0,3,this.s),this.j=new j2,_(this.h,0,2,this.j),Ye(this.j,3,1),g(this.j,2,.5),g(this.s,2,.5),g(this.h,4,.5)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return"numHands"in e&&Ye(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&g(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&g(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&g(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}F(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ne(this,e,t),Ui(this)}G(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ze(this,e,n,t),Ui(this)}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"hand_landmarks"),R(e,"world_hand_landmarks"),R(e,"handedness");const t=new Ae;Ue(t,Vl,this.h);const n=new he;be(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"LANDMARKS:hand_landmarks"),b(n,"WORLD_LANDMARKS:world_hand_landmarks"),b(n,"HANDEDNESS:handedness"),n.o(t),Te(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,s)=>{for(const o of r)r=Un(o),this.landmarks.push(Fr(r));d(this,s)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{d(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,s)=>{for(const o of r)r=Bt(o),this.worldLandmarks.push(En(r));d(this,s)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{d(this,r)}),this.g.attachProtoVectorListener("handedness",(r,s)=>{var o=this.handedness,i=o.push;const a=[];for(const c of r){r=Rr(c);const l=[];for(const h of r.g())l.push({score:X(h,2)??0,index:$e(xe(h,1))??-1,categoryName:Me(h,3)??""??"",displayName:Me(h,4)??""??""});a.push(l)}i.call(o,...a),d(this,s)}),this.g.attachEmptyPacketListener("handedness",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ve.prototype.detectForVideo=ve.prototype.G,ve.prototype.detect=ve.prototype.F,ve.prototype.setOptions=ve.prototype.o,ve.createFromModelPath=function(e,t){return A(ve,e,{baseOptions:{modelAssetPath:t}})},ve.createFromModelBuffer=function(e,t){return A(ve,e,{baseOptions:{modelAssetBuffer:t}})},ve.createFromOptions=function(e,t){return A(ve,e,t)},ve.HAND_CONNECTIONS=Io;var p1=Ge([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Bi(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function Gi(e){try{if(!e.D)return e.h;e.D(e.h)}finally{Ir(e)}}function zn(e,t){e=Un(e),t.push(Fr(e))}var B=class extends pe{constructor(e,t){super(new Oe(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,_(e=this.j=new X2,0,1,t=new V),this.I=new po,_(this.j,0,2,this.I),this.aa=new zl,_(this.j,0,3,this.aa),this.s=new Pr,_(this.j,0,4,this.s),this.P=new C2,_(this.j,0,5,this.P),this.v=new $2,_(this.j,0,6,this.v),this.J=new Y2,_(this.j,0,7,this.J),g(this.s,2,.5),g(this.s,3,.3),g(this.P,2,.5),g(this.v,2,.5),g(this.v,3,.3),g(this.J,2,.5),g(this.I,2,.5)}get baseOptions(){return L(this.j,V,1)}set baseOptions(e){_(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&g(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&g(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&g(this.P,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&g(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&g(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&g(this.J,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&g(this.I,2,e.minHandLandmarksConfidence??.5),this.l(e)}F(e,t,n){const r=typeof t!="function"?t:{};return this.D=typeof t=="function"?t:n,Bi(this),Ne(this,e,r),Gi(this)}G(e,t,n,r){const s=typeof n!="function"?n:{};return this.D=typeof n=="function"?n:r,Bi(this),Ze(this,e,s,t),Gi(this)}m(){var e=new fe;D(e,"input_frames_image"),R(e,"pose_landmarks"),R(e,"pose_world_landmarks"),R(e,"face_landmarks"),R(e,"left_hand_landmarks"),R(e,"left_hand_world_landmarks"),R(e,"right_hand_landmarks"),R(e,"right_hand_world_landmarks");const t=new Ae,n=new yi;gs(n,1,tn("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(s,o){if(o!=null)if(Array.isArray(o))M(s,2,Ar(o,to,void 0,void 0,!1));else{if(!(typeof o=="string"||o instanceof ot||Fn(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");gs(s,2,Xs(o,!1,!1),Pt())}}(n,this.j.g());const r=new he;be(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),pr(r,8,yi,n),I(r,"IMAGE:input_frames_image"),b(r,"POSE_LANDMARKS:pose_landmarks"),b(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),b(r,"FACE_LANDMARKS:face_landmarks"),b(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),b(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),b(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),b(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),Te(e,r),Mr(this,e),this.g.attachProtoListener("pose_landmarks",(s,o)=>{zn(s,this.h.poseLandmarks),d(this,o)}),this.g.attachEmptyPacketListener("pose_landmarks",s=>{d(this,s)}),this.g.attachProtoListener("pose_world_landmarks",(s,o)=>{var i=this.h.poseWorldLandmarks;s=Bt(s),i.push(En(s)),d(this,o)}),this.g.attachEmptyPacketListener("pose_world_landmarks",s=>{d(this,s)}),this.outputPoseSegmentationMasks&&(b(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Kt(this,"pose_segmentation_mask"),this.g.W("pose_segmentation_mask",(s,o)=>{this.h.poseSegmentationMasks=[Xt(this,s,!0,!this.D)],d(this,o)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",s=>{this.h.poseSegmentationMasks=[],d(this,s)})),this.g.attachProtoListener("face_landmarks",(s,o)=>{zn(s,this.h.faceLandmarks),d(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",s=>{d(this,s)}),this.outputFaceBlendshapes&&(R(e,"extra_blendshapes"),b(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(s,o)=>{var i=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(s=Rr(s),i.push(wo(s.g()??[]))),d(this,o)}),this.g.attachEmptyPacketListener("extra_blendshapes",s=>{d(this,s)})),this.g.attachProtoListener("left_hand_landmarks",(s,o)=>{zn(s,this.h.leftHandLandmarks),d(this,o)}),this.g.attachEmptyPacketListener("left_hand_landmarks",s=>{d(this,s)}),this.g.attachProtoListener("left_hand_world_landmarks",(s,o)=>{var i=this.h.leftHandWorldLandmarks;s=Bt(s),i.push(En(s)),d(this,o)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",s=>{d(this,s)}),this.g.attachProtoListener("right_hand_landmarks",(s,o)=>{zn(s,this.h.rightHandLandmarks),d(this,o)}),this.g.attachEmptyPacketListener("right_hand_landmarks",s=>{d(this,s)}),this.g.attachProtoListener("right_hand_world_landmarks",(s,o)=>{var i=this.h.rightHandWorldLandmarks;s=Bt(s),i.push(En(s)),d(this,o)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",s=>{d(this,s)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};B.prototype.detectForVideo=B.prototype.G,B.prototype.detect=B.prototype.F,B.prototype.setOptions=B.prototype.o,B.createFromModelPath=function(e,t){return A(B,e,{baseOptions:{modelAssetPath:t}})},B.createFromModelBuffer=function(e,t){return A(B,e,{baseOptions:{modelAssetBuffer:t}})},B.createFromOptions=function(e,t){return A(B,e,t)},B.HAND_CONNECTIONS=Io,B.POSE_CONNECTIONS=p1,B.FACE_LANDMARKS_LIPS=Lo,B.FACE_LANDMARKS_LEFT_EYE=Ro,B.FACE_LANDMARKS_LEFT_EYEBROW=xo,B.FACE_LANDMARKS_LEFT_IRIS=h1,B.FACE_LANDMARKS_RIGHT_EYE=Po,B.FACE_LANDMARKS_RIGHT_EYEBROW=Fo,B.FACE_LANDMARKS_RIGHT_IRIS=u1,B.FACE_LANDMARKS_FACE_OVAL=Mo,B.FACE_LANDMARKS_CONTOURS=f1,B.FACE_LANDMARKS_TESSELATION=d1;var ke=class extends pe{constructor(e,t){super(new Oe(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},_(e=this.h=new q2,0,1,t=new V)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return _(this.h,0,2,ws(e,L(this.h,xr,2))),this.l(e)}ua(e,t){return this.j={classifications:[]},Ne(this,e,t),this.j}va(e,t,n){return this.j={classifications:[]},Ze(this,e,n,t),this.j}m(){var e=new fe;D(e,"input_image"),D(e,"norm_rect"),R(e,"classifications");const t=new Ae;Ue(t,Kl,this.h);const n=new he;be(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),I(n,"IMAGE:input_image"),I(n,"NORM_RECT:norm_rect"),b(n,"CLASSIFICATIONS:classifications"),n.o(t),Te(e,n),this.g.attachProtoListener("classifications",(r,s)=>{this.j=function(o){const i={classifications:ct(o,Rl,1).map(a=>{var c;return wo(((c=L(a,ho,4))==null?void 0:c.g())??[],$e(xe(a,2)),Me(a,3)??"")})};return hr(zt(o,2))!=null&&(i.timestampMs=$e(hr(zt(o,2)))),i}(Pl(r)),d(this,s)}),this.g.attachEmptyPacketListener("classifications",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ke.prototype.classifyForVideo=ke.prototype.va,ke.prototype.classify=ke.prototype.ua,ke.prototype.setOptions=ke.prototype.o,ke.createFromModelPath=function(e,t){return A(ke,e,{baseOptions:{modelAssetPath:t}})},ke.createFromModelBuffer=function(e,t){return A(ke,e,{baseOptions:{modelAssetBuffer:t}})},ke.createFromOptions=function(e,t){return A(ke,e,t)};var Ee=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!0),this.h=new Q2,this.embeddings={embeddings:[]},_(e=this.h,0,1,t=new V)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){var t=this.h,n=L(this.h,vi,2);return n=n?n.clone():new vi,e.l2Normalize!==void 0?kn(n,1,e.l2Normalize):"l2Normalize"in e&&M(n,1),e.quantize!==void 0?kn(n,2,e.quantize):"quantize"in e&&M(n,2),_(t,0,2,n),this.l(e)}Ba(e,t){return Ne(this,e,t),this.embeddings}Ca(e,t,n){return Ze(this,e,n,t),this.embeddings}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"embeddings_out");const t=new Ae;Ue(t,$l,this.h);const n=new he;be(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"EMBEDDINGS:embeddings_out"),n.o(t),Te(e,n),this.g.attachProtoListener("embeddings_out",(r,s)=>{r=Ol(r),this.embeddings=function(o){return{embeddings:ct(o,Ml,1).map(i=>{var c,l;const a={headIndex:$e(xe(i,3))??-1,headName:Me(i,4)??""??""};if(Ka(i,vs,Jr(i,1))!==void 0)i=Dt(i=L(i,vs,Jr(i,1)),1,_t),a.floatEmbedding=i.slice();else{const h=new Uint8Array(0);a.quantizedEmbedding=((l=(c=L(i,Fl,Jr(i,2)))==null?void 0:c.qa())==null?void 0:l.h())??h}return a}),timestampMs:$e(hr(zt(o,2)))}}(r),d(this,s)}),this.g.attachEmptyPacketListener("embeddings_out",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ee.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Ai(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Ai(wi(e.quantizedEmbedding),wi(t.quantizedEmbedding))}return e},Ee.prototype.embedForVideo=Ee.prototype.Ca,Ee.prototype.embed=Ee.prototype.Ba,Ee.prototype.setOptions=Ee.prototype.o,Ee.createFromModelPath=function(e,t){return A(Ee,e,{baseOptions:{modelAssetPath:t}})},Ee.createFromModelBuffer=function(e,t){return A(Ee,e,{baseOptions:{modelAssetBuffer:t}})},Ee.createFromOptions=function(e,t){return A(Ee,e,t)};var Ss=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(n=>{n.close()}),(t=this.categoryMask)==null||t.close()}};function Hi(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function Vi(e){try{const t=new Ss(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Ir(e)}}Ss.prototype.close=Ss.prototype.close;var de=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new vo,this.v=new Z2,_(this.h,0,3,this.v),_(e=this.h,0,1,t=new V)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?M(this.h,2,tn(e.displayNamesLocale)):"displayNamesLocale"in e&&M(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}K(){(function(e){var n,r;const t=ct(e.fa(),he,1).filter(s=>(Me(s,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],1<t.length)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(((r=(n=L(t[0],Ae,7))==null?void 0:n.l())==null?void 0:r.g())??new Map).forEach((s,o)=>{e.s[Number(o)]=Me(s,1)??""})})(this)}ga(e,t,n){const r=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,Hi(this),Ne(this,e,r),Vi(this)}Na(e,t,n,r){const s=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,Hi(this),Ze(this,e,s,t),Vi(this)}Fa(){return this.s}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect");const t=new Ae;Ue(t,e1,this.h);const n=new he;be(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),n.o(t),Te(e,n),Mr(this,e),this.outputConfidenceMasks&&(R(e,"confidence_masks"),b(n,"CONFIDENCE_MASKS:confidence_masks"),Kt(this,"confidence_masks"),this.g.da("confidence_masks",(r,s)=>{this.confidenceMasks=r.map(o=>Xt(this,o,!0,!this.j)),d(this,s)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],d(this,r)})),this.outputCategoryMask&&(R(e,"category_mask"),b(n,"CATEGORY_MASK:category_mask"),Kt(this,"category_mask"),this.g.W("category_mask",(r,s)=>{this.categoryMask=Xt(this,r,!1,!this.j),d(this,s)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,d(this,r)})),R(e,"quality_scores"),b(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,s)=>{this.qualityScores=r,d(this,s)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};de.prototype.getLabels=de.prototype.Fa,de.prototype.segmentForVideo=de.prototype.Na,de.prototype.segment=de.prototype.ga,de.prototype.setOptions=de.prototype.o,de.createFromModelPath=function(e,t){return A(de,e,{baseOptions:{modelAssetPath:t}})},de.createFromModelBuffer=function(e,t){return A(de,e,{baseOptions:{modelAssetBuffer:t}})},de.createFromOptions=function(e,t){return A(de,e,t)};var ks=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;(e=this.confidenceMasks)==null||e.forEach(n=>{n.close()}),(t=this.categoryMask)==null||t.close()}};ks.prototype.close=ks.prototype.close;var eh=class extends p{constructor(e){super(e)}},qt=[0,$,-2],th=[0,it,-3,ee],Dr=[0,it,-3,ee,it,-1],m1=[0,Dr],nh=[0,m1,qt],rh=[0,Dr,qt],g1=[0,Dr,$,-1],sh=[0,g1,qt],oh=[0,it,-3,ee,qt,-1],ih=[0,it,-3,ee,Xe],ns=class extends p{constructor(e){super(e)}},ji=[0,it,-1,ee],y1=class extends p{constructor(){super()}};y1.A=[1];var zi=class extends p{constructor(e){super(e)}},Ls=[1,2,3,4,5,6,7,8,9,10,14,15],ah=[0,Ls,G,Dr,G,rh,G,m1,G,nh,G,ji,G,ih,G,th,G,[0,U,it,-2,ee,$,ee,-1,2,it,qt],G,g1,G,sh,it,qt,U,G,oh,G,[0,te,ji]],ch=[0,U,$,-1,ee],Rs=class extends p{constructor(){super()}};Rs.A=[1],Rs.prototype.g=Lr([0,te,ah,U,ch]);var Ve=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new vo,this.s=new Z2,_(this.h,0,3,this.s),_(e=this.h,0,1,t=new V)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}ga(e,t,n,r){const s=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.C+1,r=new Rs;const o=new zi;var i=new eh;if(Ye(i,1,255),_(o,0,12,i),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var a=new ns;kn(a,3,!0),g(a,1,t.keypoint.x),g(a,2,t.keypoint.y),yn(o,5,Ls,a)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(a of(i=new y1,t.scribble))kn(t=new ns,3,!0),g(t,1,a.x),g(t,2,a.y),pr(i,1,ns,t);yn(o,15,Ls,i)}pr(r,1,zi,o),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),Ne(this,e,s);e:{try{const l=new ks(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var c=l;break e}this.j(l)}finally{Ir(this)}c=void 0}return c}m(){var e=new fe;D(e,"image_in"),D(e,"roi_in"),D(e,"norm_rect_in");const t=new Ae;Ue(t,e1,this.h);const n=new he;be(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),I(n,"IMAGE:image_in"),I(n,"ROI:roi_in"),I(n,"NORM_RECT:norm_rect_in"),n.o(t),Te(e,n),Mr(this,e),this.outputConfidenceMasks&&(R(e,"confidence_masks"),b(n,"CONFIDENCE_MASKS:confidence_masks"),Kt(this,"confidence_masks"),this.g.da("confidence_masks",(r,s)=>{this.confidenceMasks=r.map(o=>Xt(this,o,!0,!this.j)),d(this,s)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],d(this,r)})),this.outputCategoryMask&&(R(e,"category_mask"),b(n,"CATEGORY_MASK:category_mask"),Kt(this,"category_mask"),this.g.W("category_mask",(r,s)=>{this.categoryMask=Xt(this,r,!1,!this.j),d(this,s)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,d(this,r)})),R(e,"quality_scores"),b(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,s)=>{this.qualityScores=r,d(this,s)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ve.prototype.segment=Ve.prototype.ga,Ve.prototype.setOptions=Ve.prototype.o,Ve.createFromModelPath=function(e,t){return A(Ve,e,{baseOptions:{modelAssetPath:t}})},Ve.createFromModelBuffer=function(e,t){return A(Ve,e,{baseOptions:{modelAssetBuffer:t}})},Ve.createFromOptions=function(e,t){return A(Ve,e,t)};var Le=class extends pe{constructor(e,t){super(new Oe(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},_(e=this.h=new Eo,0,1,t=new V)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?M(this.h,2,tn(e.displayNamesLocale)):"displayNamesLocale"in e&&M(this.h,2),e.maxResults!==void 0?Ye(this.h,3,e.maxResults):"maxResults"in e&&M(this.h,3),e.scoreThreshold!==void 0?g(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&M(this.h,4),e.categoryAllowlist!==void 0?dr(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&M(this.h,5),e.categoryDenylist!==void 0?dr(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&M(this.h,6),this.l(e)}F(e,t){return this.j={detections:[]},Ne(this,e,t),this.j}G(e,t,n){return this.j={detections:[]},Ze(this,e,n,t),this.j}m(){var e=new fe;D(e,"input_frame_gpu"),D(e,"norm_rect"),R(e,"detections");const t=new Ae;Ue(t,Xl,this.h);const n=new he;be(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),I(n,"IMAGE:input_frame_gpu"),I(n,"NORM_RECT:norm_rect"),b(n,"DETECTIONS:detections"),n.o(t),Te(e,n),this.g.attachProtoVectorListener("detections",(r,s)=>{for(const o of r)r=w2(o),this.j.detections.push(n1(r));d(this,s)}),this.g.attachEmptyPacketListener("detections",r=>{d(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Le.prototype.detectForVideo=Le.prototype.G,Le.prototype.detect=Le.prototype.F,Le.prototype.setOptions=Le.prototype.o,Le.createFromModelPath=async function(e,t){return A(Le,e,{baseOptions:{modelAssetPath:t}})},Le.createFromModelBuffer=function(e,t){return A(Le,e,{baseOptions:{modelAssetBuffer:t}})},Le.createFromOptions=function(e,t){return A(Le,e,t)};var xs=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){var e;(e=this.segmentationMasks)==null||e.forEach(t=>{t.close()})}};function Wi(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function Ki(e){try{const t=new xs(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Ir(e)}}xs.prototype.close=xs.prototype.close;var oe=class extends pe{constructor(e,t){super(new Oe(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,_(e=this.h=new t1,0,1,t=new V),this.v=new Y2,_(this.h,0,3,this.v),this.j=new $2,_(this.h,0,2,this.j),Ye(this.j,4,1),g(this.j,2,.5),g(this.v,2,.5),g(this.h,4,.5)}get baseOptions(){return L(this.h,V,1)}set baseOptions(e){_(this.h,0,1,e)}o(e){return"numPoses"in e&&Ye(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&g(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&g(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&g(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}F(e,t,n){const r=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,Wi(this),Ne(this,e,r),Ki(this)}G(e,t,n,r){const s=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,Wi(this),Ze(this,e,s,t),Ki(this)}m(){var e=new fe;D(e,"image_in"),D(e,"norm_rect"),R(e,"normalized_landmarks"),R(e,"world_landmarks"),R(e,"segmentation_masks");const t=new Ae;Ue(t,ql,this.h);const n=new he;be(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),I(n,"IMAGE:image_in"),I(n,"NORM_RECT:norm_rect"),b(n,"NORM_LANDMARKS:normalized_landmarks"),b(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),Te(e,n),Mr(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(r,s)=>{this.landmarks=[];for(const o of r)r=Un(o),this.landmarks.push(Fr(r));d(this,s)}),this.g.attachEmptyPacketListener("normalized_landmarks",r=>{this.landmarks=[],d(this,r)}),this.g.attachProtoVectorListener("world_landmarks",(r,s)=>{this.worldLandmarks=[];for(const o of r)r=Bt(o),this.worldLandmarks.push(En(r));d(this,s)}),this.g.attachEmptyPacketListener("world_landmarks",r=>{this.worldLandmarks=[],d(this,r)}),this.outputSegmentationMasks&&(b(n,"SEGMENTATION_MASK:segmentation_masks"),Kt(this,"segmentation_masks"),this.g.da("segmentation_masks",(r,s)=>{this.segmentationMasks=r.map(o=>Xt(this,o,!0,!this.s)),d(this,s)}),this.g.attachEmptyPacketListener("segmentation_masks",r=>{this.segmentationMasks=[],d(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};oe.prototype.detectForVideo=oe.prototype.G,oe.prototype.detect=oe.prototype.F,oe.prototype.setOptions=oe.prototype.o,oe.createFromModelPath=function(e,t){return A(oe,e,{baseOptions:{modelAssetPath:t}})},oe.createFromModelBuffer=function(e,t){return A(oe,e,{baseOptions:{modelAssetBuffer:t}})},oe.createFromOptions=function(e,t){return A(oe,e,t)},oe.POSE_CONNECTIONS=p1;const k={NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,MOUTH_LEFT:9,MOUTH_RIGHT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32},$i=new pa(.5,.5,.5),ln=[],hn=[],lh={rightFoot:0},St=[!1,!1],hh=.05,uh=.035,fh=.5,dh=.2,ph=rr.filter(e=>/Leg|Foot|hips/i.test(e)),mh=e=>{const t=[e[k.RIGHT_ANKLE].y,e[k.LEFT_ANKLE].y];if(!t[0]||!t[1])return;const n=[ln.reduce((r,s)=>r+s,0)/ln.length,hn.reduce((r,s)=>r+s,0)/hn.length];ln.push(t[0]),hn.push(t[1]),ln.length>10&&ln.shift(),hn.length>10&&hn.shift();for(let r=0;r<2;r++){const s=Math.abs(t[r]-n[r])>hh,o=Math.abs(t[r]-t[r==0?1:0])<uh,i=t[r]>t[r==0?1:0];St[r]?s&&!o&&(St[r]=!1):(i||o)&&!s&&(St[r]=!0)}return St},gh=Object.fromEntries(Object.entries(Object.entries(k)).map(([e,t])=>[t,e])),Oo=e=>{if(!oe.POSE_CONNECTIONS)return()=>{};const t={};let n=null;const r=new Ec(new wc,new Ac({vertexColors:!0}));r.material.linewidth=4;const s=new Vo(new Float32Array(oe.POSE_CONNECTIONS.length*2*3).fill(0),3);r.geometry.setAttribute("position",s);const o=new Vo(new Float32Array(oe.POSE_CONNECTIONS.length*2*4).fill(1),4);return r.geometry.setAttribute("color",o),(i,a)=>{if(!a){for(const[l,h]of Object.entries(t))delete t[l],Do(h);n&&(Do(n),n=null);return}if(!i)return;const c=i.reduce((l,h)=>l.y>h.y?l:h).y;for(const[l,h]of Object.entries(i)){const m=h.visibility??0,u=new pa().set(1-m,m,0);if(!t[l]){const F=new bc(new Tc(.01),new Sc({color:u})),O=Uo();t[l]=O,st(O,hc,F),is(O,!0),st(O,as,`Mocap Debug ${e} ${gh[l]}`),Go(F,Ho.AvatarHelper)}const v=t[l],Y=T(v,Tt);Y.material.color.set(u),l===`${k.RIGHT_WRIST}`&&Y.material.color.set(16711680),l===`${k.RIGHT_PINKY}`&&Y.material.color.set(65280),l===`${k.RIGHT_INDEX}`&&Y.material.color.set(255),l===`${k.LEFT_ANKLE}`&&Y.material.color.setHex(St[1]?65280:16711680),l===`${k.RIGHT_ANKLE}`&&Y.material.color.setHex(St[0]?65280:16711680),T(v,z).matrix.setPosition(h.x,c-h.y,h.z)}n||(n=Uo(),st(n,Tt,r),is(n,!0),st(n,as,"Mocap Debug Line Segment "+e),Go(r,Ho.AvatarHelper));for(let l=0;l<oe.POSE_CONNECTIONS.length*2;l+=2){const{start:h,end:m}=oe.POSE_CONNECTIONS[l/2],u=T(t[h],Tt),v=T(t[m],Tt);s.setXYZ(l,u.matrixWorld.elements[12],u.matrixWorld.elements[13],u.matrixWorld.elements[14]),s.setXYZ(l+1,v.matrixWorld.elements[12],v.matrixWorld.elements[13],v.matrixWorld.elements[14]);const Y=u.material.color.g>Qt&&v.material.color.g>Qt,F=Y?u.material.color:$i,O=Y?v.material.color:$i;o.setXYZW(l,F.r,F.g,F.b,1),o.setXYZW(l+1,O.r,O.g,O.b,1)}s.needsUpdate=!0,o.needsUpdate=!0}},yh=Oo("Raw"),_h=Oo("Screen"),vh=Oo("Final"),Eh=(e,t=.5)=>{const n=(e[k.RIGHT_HIP].visibility+e[k.LEFT_HIP].visibility)*.5>Qt,r=(e[k.LEFT_KNEE].visibility+e[k.RIGHT_KNEE].visibility)*.5>Qt;return n&&r};function wh(e,t,n){var m;const r=(u,v,Y)=>{if(!v.length)return u;const F=[],O=[];for(let S=0;S<u.length;S++){if(u[S].visibility<.1){O[S]=v[S],F[S]=v[S];continue}const Ce=Y;O[S]={visibility:tt.lerp(v[S].visibility,u[S].visibility,Ce),x:tt.lerp(v[S].x,u[S].x,u[S].visibility),y:tt.lerp(v[S].y,u[S].y,u[S].visibility),z:tt.lerp(v[S].z,u[S].z,u[S].visibility)},F[S]={visibility:tt.lerp(v[S].visibility,O[S].visibility,Ce),x:tt.lerp(v[S].x,O[S].x,Ce),y:tt.lerp(v[S].y,O[S].y,Ce),z:tt.lerp(v[S].z,O[S].z,Ce)}}return F},s=(m=mn(e,ie))==null?void 0:m.bonesToEntities;if(!(s!=null&&s.hips)||!(t!=null&&t.length)||!n)return;const o=Pe(uc).avatarDebug,i=T(e,f);i.prevWorldLandmarks||(i.prevWorldLandmarks=t.map(u=>({...u}))),i.prevScreenLandmarks||(i.prevScreenLandmarks=n.map(u=>({...u})));const a=r(t,i.prevWorldLandmarks,fh),c=r(n,i.prevScreenLandmarks,dh);i.prevWorldLandmarks=a,i.prevScreenLandmarks=c;const l=a.reduce((u,v)=>u.y>v.y?u:v).y,h=Eh(a);if(f.solvingLowerBody[e]=h?1:0,mh(a),e===De.getSelfAvatarEntity()&&(yh(t,o),_h(n,!!n&&o),vh(a,o)),bh(e,l,a,h),Wn(e,l,a[k.LEFT_SHOULDER],a[k.LEFT_ELBOW],a[k.LEFT_WRIST],new w(-1,0,0),P.Chest,P.LeftUpperArm,P.LeftLowerArm,.75),Wn(e,l,a[k.RIGHT_SHOULDER],a[k.RIGHT_ELBOW],a[k.RIGHT_WRIST],new w(1,0,0),P.Chest,P.RightUpperArm,P.RightLowerArm,.75),h)Wn(e,l,c[k.LEFT_HIP],c[k.LEFT_KNEE],c[k.LEFT_ANKLE],new w(0,1,0),P.Hips,P.LeftUpperLeg,P.LeftLowerLeg),Wn(e,l,c[k.RIGHT_HIP],c[k.RIGHT_KNEE],c[k.RIGHT_KNEE],new w(0,1,0),P.Hips,P.RightUpperLeg,P.RightLowerLeg),f.solvingLowerBody[e]||(f.solvingLowerBody[e]=1);else{f.solvingLowerBody[e]&&(f.solvingLowerBody[e]=0);for(const u of ph)f.rig[u].x[e]=0,f.rig[u].y[e]=0,f.rig[u].z[e]=0,f.rig[u].w[e]=0}Sh(e,c[k.RIGHT_EAR],c[k.LEFT_EAR],c[k.NOSE])}const Qt=.6,Ps=new w,bt=new J,un=new J,Nt=new w,Yi=new J,Ah=new J,bh=(e,t,n,r)=>{const s=T(e,ie).bonesToEntities,o=T(e,De),i=n[k.RIGHT_HIP],a=n[k.LEFT_HIP];if(!i||!a)return;const c=n[k.RIGHT_SHOULDER],l=n[k.LEFT_SHOULDER];if(c.visibility<Qt||l.visibility<Qt)return;bt.identity(),un.identity();const h=new w(i.x,t-i.y,i.z),m=new w(a.x,t-a.y,a.z);if(r){for(let O=0;O<2;O++)if(St[O]){const Ce=n[O==lh.rightFoot?k.RIGHT_ANKLE:k.LEFT_ANKLE].y*-1+T(s.hips,Yn).position.y;f.footOffset[e]=Ce}Nt.copy(h).add(m).multiplyScalar(.5)}else Nt.copy(new w(0,o.hipsHeight,0));const u=new w(-c.x,t-c.y,-c.z),v=new w(-l.x,t-l.y,-l.z),Y=new w().copy(u).add(v).multiplyScalar(.5);Ah.setFromUnitVectors(fc,Ps.subVectors(Y,Nt).normalize());const F=_1(m,h,Y,new J,!1);F.multiply(new J().setFromEuler(new kc(0,Math.PI,Math.PI))),r?(f.hipRotation.x[e]=F.x,f.hipRotation.y[e]=F.y,f.hipRotation.z[e]=F.z,f.hipRotation.w[e]=F.w):a.visibility+i.visibility>1?bt.copy(F):(Yi.setFromUnitVectors(dc,new w().subVectors(v,u)),bt.copy(Yi)),F.set(f.hipRotation.x[e],f.hipRotation.y[e],f.hipRotation.z[e],f.hipRotation.w[e]),f.hipPosition.x[e]=Nt.x,f.hipPosition.y[e]=Nt.y,f.hipPosition.z[e]=Nt.z,f.rig[P.Hips].x[e]=F.x,f.rig[P.Hips].y[e]=F.y,f.rig[P.Hips].z[e]=F.z,f.rig[P.Hips].w[e]=F.w,f.rig[P.Spine].x[e]=bt.x,f.rig[P.Spine].y[e]=bt.y,f.rig[P.Spine].z[e]=bt.z,f.rig[P.Spine].w[e]=bt.w,f.rig[P.Chest].x[e]=un.x,f.rig[P.Chest].y[e]=un.y,f.rig[P.Chest].z[e]=un.z,f.rig[P.Chest].w[e]=un.w},Xi=new w,rs=new w,qi=new w,Wn=(e,t,n,r,s,o,i=null,a,c,l=-1)=>{if(!n||!r||!s||l>-1&&(n.visibility+r.visibility+s.visibility)/3<l)return;Xi.set(n.x,t-n.y,-n.z),rs.set(r.x,t-r.y,-r.z),qi.set(s.x,t-s.y,-s.z);const h=new J().setFromUnitVectors(o,Ps.subVectors(Xi,rs).normalize()),m=new J().setFromUnitVectors(o,Ps.subVectors(rs,qi).normalize()),u=new J().copy(h);i&&u.premultiply(new J(f.rig[i].x[e],f.rig[i].y[e],f.rig[i].z[e],f.rig[i].w[e]).invert());const v=new J().copy(m).premultiply(h.clone().invert());f.rig[a].x[e]=u.x,f.rig[a].y[e]=u.y,f.rig[a].z[e]=u.z,f.rig[a].w[e]=u.w,f.rig[c].x[e]=v.x,f.rig[c].y[e]=v.y,f.rig[c].z[e]=v.z,f.rig[c].w[e]=v.w};new w;new w;const Ct=new J,Qi=new w,Zi=new w,Ji=new w,Th=new J().setFromAxisAngle(new w(1,0,0),-Math.PI/2),Sh=(e,t,n,r)=>{Qi.set(-t.x,-t.y,-t.z),Zi.set(-n.x,-n.y,-n.z),Ji.set(-r.x,-r.y,-r.z),_1(Qi,Zi,Ji,Ct,!0),Ct.multiply(Th),f.rig[P.Head].x[e]=Ct.x,f.rig[P.Head].y[e]=Ct.y,f.rig[P.Head].z[e]=Ct.z,f.rig[P.Head].w[e]=Ct.w},ea=new vc,Kn=new w,ta=new w,na=new da,_1=(e,t,n,r,s=!1)=>{ea.setFromCoplanarPoints(s?t:e,s?e:t,n);const o=ea.normal;return Kn.subVectors(e,t).normalize(),ta.crossVectors(o,s?Kn.reflect(new w(0,1,0)):Kn),na.makeBasis(Kn,ta,o),r.setFromRotationMatrix(na)},kh=e=>M1({timestamp:Date.now(),results:e}),Lh=e=>F1(new Uint8Array(e)),Rh={sendResults:kh,receiveResults:Lh},Fs="ee.core.mocap.dataChannel",ra=(e,t,n,r)=>{e.isHosting&&e.bufferToAll(t,n,r);const s=Rh.receiveResults(r);kt.has(n)||kt.set(n,new K1(10)),kt.get(n).add(s)},xh=Mt([f,ie]),kt=new Map,ss=new Map,Ph=25,Fh=()=>{if(!P1)return;const e=ze.worldNetwork;if(e){for(const[t,n]of kt)(!e.peers[t]||ss.get(t)<Date.now()-1e3)&&(kt.delete(t),ss.delete(t));for(const[t,n]of kt){const r=n.getFirst(),s=e.peers[t].userId,o=De.getUserAvatarEntity(s);o&&(ss.set(t,Date.now()),st(o,f),wh(o,r==null?void 0:r.results.worldLandmarks,r==null?void 0:r.results.landmarks),n.clear())}for(const t of xh()){const n=Object.keys(e.peers).find(i=>kt.has(i)),r=T(t,ie);if(!r.bonesToEntities.hips)continue;const s=T(r.bonesToEntities.hips,Yn).parent;if(!n){W1(t,f),s==null||s.position.setY(0);continue}for(const i of rr){const a=T(r.bonesToEntities[i],Yn);if(!a||f.rig[i].x[t]===0&&f.rig[i].y[t]===0&&f.rig[i].z[t]===0&&f.rig[i].w[t]===0)continue;const c=new J().set(f.slerpedRig[i].x[t],f.slerpedRig[i].y[t],f.slerpedRig[i].z[t],f.slerpedRig[i].w[t]).normalize().fastSlerp(new J().set(f.rig[i].x[t],f.rig[i].y[t],f.rig[i].z[t],f.rig[i].w[t]).normalize(),Pe(xn).deltaSeconds*Ph);a.quaternion.copy(c),f.slerpedRig[i].x[t]=c.x,f.slerpedRig[i].y[t]=c.y,f.slerpedRig[i].z[t]=c.z,f.slerpedRig[i].w[t]=c.w}T(r.bonesToEntities.hips,Yn).position.set(f.hipPosition.x[t],f.hipPosition.y[t],f.hipPosition.z[t])}}},Mh=()=>(Gt.useEffect(()=>(R1(Fs,ra),()=>{x1(Fs,ra)}),[]),null);Pn({uuid:"ee.engine.MotionCaptureSystem",insert:{before:f3},execute:Fh,reactor:Mh});class Z{}lt(Z,"startRecording",Et({type:"ee.core.motioncapture.START_RECORDING",recordingID:Je.string})),lt(Z,"recordingStarted",Et({type:"ee.core.motioncapture.RECORDING_STARTED",recordingID:Je.string})),lt(Z,"stopRecording",Et({type:"ee.core.motioncapture.STOP_RECORDING",recordingID:Je.string})),lt(Z,"startPlayback",Et({type:"ee.core.motioncapture.PLAY_RECORDING",recordingID:Je.string,targetUser:I1.optional(),autoplay:Je.boolean})),lt(Z,"playbackChanged",Et({type:"ee.core.motioncapture.PLAYBACK_CHANGED",recordingID:Je.string,playing:Je.boolean})),lt(Z,"stopPlayback",Et({type:"ee.core.motioncapture.STOP_PLAYBACK",recordingID:Je.string})),lt(Z,"error",Et({type:"ee.core.motioncapture.ERROR",error:Je.string}));const fn=Ln({name:"ee.RecordingState",initial:{active:!1,startedAt:null,recordingID:null},receptors:{onStartRecording:Z.startRecording.receive(e=>{const t=rt(fn);t.active.set(!0),t.startedAt.set(null),t.recordingID.set(null)}),onRecordingStarted:Z.recordingStarted.receive(e=>{const t=rt(fn);t.startedAt.set(Date.now()),t.recordingID.set(e.recordingID)}),onStopRecording:Z.stopRecording.receive(e=>{const t=rt(fn);t.active.set(!1),t.startedAt.set(null),t.recordingID.set(null)}),onError:Z.error.receive(e=>{const t=rt(fn);t.active.set(!1),t.startedAt.set(null),t.recordingID.set(null)})},requestRecording:async e=>{try{const t=[];e.user.Avatar&&t.push(pc.ID);const n={user:t,peers:{}};e.user.Avatar,Object.entries(e.peers).forEach(([s,o])=>{const i=[];o.Mocap&&i.push(Fs),o.Video&&i.push(O1),o.Audio&&i.push(N1),i.length&&(n.peers[s]=i)});const r=await S1.instance.service(aa).create({schema:n});r.id&&fn.startRecording({recordingID:r.id})}catch(t){console.error(t)}},startRecording(e){const{recordingID:t}=e,n=Z.startRecording({recordingID:t});ut({...n,$topic:ft.world,$to:ze.worldNetwork.hostPeerID}),ut({...n,$topic:ft.media,$to:ze.mediaNetwork.hostPeerID})},stopRecording(e){const t=Z.stopRecording({recordingID:e.recordingID});ut({...t,$topic:ft.world,$to:ze.worldNetwork.hostPeerID}),ut({...t,$topic:ft.media,$to:ze.mediaNetwork.hostPeerID})}}),v1=Ln({name:"ee.PlaybackState",initial:{recordingID:null,playing:!1,currentTime:null},receptors:{onPlaybackChanged:Z.playbackChanged.receive(e=>{const t=rt(v1);t.playing.set(e.playing),t.recordingID.set(e.playing?e.recordingID:null),t.currentTime.set(e.playing?0:null)})},startPlaybackOnServer(e){const{recordingID:t,targetUser:n}=e,r=Z.startPlayback({recordingID:t,targetUser:n,autoplay:!1});ut({...r,$topic:ft.world,$to:ze.worldNetwork.hostPeerID}),ut({...r,$topic:ft.media,$to:ze.mediaNetwork.hostPeerID})},stopPlaybackOnServer(e){const{recordingID:t}=e,n=Z.stopPlayback({recordingID:t});ut({...n,$topic:ft.world,$to:ze.worldNetwork.hostPeerID}),ut({...n,$topic:ft.media,$to:ze.mediaNetwork.hostPeerID})}});Ln({name:"ee.engine.recording.RecordingAPIState",initial:{createMediaChannelRecorder:null,uploadRecordingChunk:null}});Rn(Z.startRecording.matches);Rn(Z.stopRecording.matches);Rn(Z.startPlayback.matches);Rn(Z.stopPlayback.matches);Pn({uuid:"ee.engine.ECSRecordingSystem",insert:{after:$1}});function Ih(e){const t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-n*3600)/60),s=t-n*3600-r*60,o=n<10?"0"+n:n.toString(),i=r<10?"0"+r:r.toString(),a=s<10?"0"+s:s.toString();return o+":"+i+":"+a}const Oh=(e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime(),Ur=e=>{const{startPlayback:t,stopPlayback:n}=e,r=C1(rt(v1).recordingID),s=k1(aa,{query:{$sort:{createdAt:-1},$limit:10,$skip:0}}),o=[...s.data].sort(Oh),i=a=>{const{recording:c}=a,l=c.resources.some(u=>{var v;return(v=u.key)==null?void 0:v.includes("entities")}),h=c.resources.some(u=>{var v;return(v=u.mimeType)==null?void 0:v.includes("video")}),m=c.resources.some(u=>{var v;return(v=u.key)==null?void 0:v.includes("mocap")});return y.createElement("tr",{key:c.id},y.createElement("td",null,y.createElement("div",{className:"bg-grey"},c.id)),y.createElement("td",null,y.createElement("div",{className:"bg-grey flex flex-row"},l&&y.createElement("div",{className:"bg-grey"},y.createElement(Hr,{content:"Entity"},y.createElement(Pc,{className:"text-2xl"}))),h&&y.createElement("div",{className:"bg-grey"},y.createElement(Hr,{content:"Video"},y.createElement(Fc,{className:"text-2xl"}))),m&&y.createElement("div",{className:"bg-grey"},y.createElement(Hr,{content:"Mocap"},y.createElement(Mc,{className:"text-2xl"}))))),y.createElement("td",null,y.createElement("div",{className:"bg-grey"},new Date(c.createdAt).toLocaleTimeString())),y.createElement("td",null,y.createElement("div",{className:"bg-grey"},Ih((new Date(c.updatedAt).getTime()-new Date(c.createdAt).getTime())/1e3))),y.createElement("td",null,y.createElement("div",{key:c.id,className:""},r.value===c.id?y.createElement("button",{className:"btn btn-ghost",onClick:()=>{n({recordingID:c.id})}},y.createElement(A1,{className:"block min-h-6 min-w-6"})):y.createElement(y.Fragment,null,y.createElement("button",{className:"btn btn-ghost",onClick:()=>t(c.id,!1)},y.createElement(b1,{className:"block min-h-6 min-w-6"})),y.createElement("button",{style:{pointerEvents:"all"},onClick:()=>t(c.id,!0)},y.createElement(T1,{className:"block min-h-6 min-w-6"}))))))};return y.createElement("div",{className:"aspect-video w-full"},y.createElement("table",{className:"table w-full"},y.createElement("thead",null,y.createElement("tr",null,y.createElement("th",null,"Recording"),y.createElement("th",null,"Media"),y.createElement("th",null,"Created At"),y.createElement("th",null,"Duration"),y.createElement("th",null,"Actions"))),y.createElement("tbody",null,o.map(a=>y.createElement(i,{key:a.id,recording:a})))),y.createElement("div",{className:"flex justify-between"},y.createElement("button",{className:"btn btn-ghost",disabled:s.skip<=0,onClick:()=>s.setPage(s.page-1)},"Prev"),y.createElement("div",{className:"flex items-center justify-center"},s.skip/s.limit+1," of ",Math.ceil(s.total/s.limit)),y.createElement("button",{className:"btn btn-ghost",disabled:s.skip+s.limit>=s.total,onClick:()=>s.setPage(s.page+1)},"Next")))};Ur.displayName="RecordingsList";Ur.defaultProps={startPlayback:()=>{},stopPlayback:()=>{},recordingState:{}};const Nh={},au={title:"Primitives/Tailwind/RecordingList",component:Ur,parameters:{componentSubtitle:"RecordingList",jest:"RecordingList.test.tsx",design:{type:"figma",url:""}},argTypes:Nh},$n={args:Ur.defaultProps};var sa,oa,ia;$n.parameters={...$n.parameters,docs:{...(sa=$n.parameters)==null?void 0:sa.docs,source:{originalSource:`{
  args: Component.defaultProps
}`,...(ia=(oa=$n.parameters)==null?void 0:oa.docs)==null?void 0:ia.source}}};const cu=["Default"];export{$n as Default,cu as __namedExportsOrder,au as default};
